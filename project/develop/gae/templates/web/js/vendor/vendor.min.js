/*
 * Pause jQuery plugin v0.1
 *
 * Copyright 2010 by Tobia Conforto <tobia.conforto@gmail.com>
 *
 * Based on Pause-resume-animation jQuery plugin by Joe Weitzel
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or(at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
 * more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * this program; if not, write to the Free Software Foundation, Inc., 51
 * Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 */(function(){function o(){return(new Date).getTime()}var e="extend",t=jQuery,n="jQuery.pause",r=1,i=t.fn.animate,s={};t.fn.animate=function(u,l,h,p){var v=t.speed(l,h,p);return v.complete=v.old,this.each(function(){this[n]||(this[n]=r++);var l=t[e]({},v);i.apply(t(this),[u,t[e]({},l)]),s[this[n]]={run:!0,prop:u,opt:l,start:o(),done:0}})},t.fn.pause=function(){return this.each(function(){this[n]||(this[n]=r++);var e=s[this[n]];e&&e.run&&(e.done+=o()-e.start,e.done>e.opt.duration?delete s[this[n]]:(t(this).stop(),e.run=!1))})},t.fn.resume=function(){return this.each(function(){this[n]||(this[n]=r++);var u=s[this[n]];u&&!u.run&&(u.opt.duration-=u.done,u.done=0,u.run=!0,u.start=o(),i.apply(t(this),[u.prop,t[e]({},u.opt)]))})}})(),function(e){function I(e){if(e in X[a])return e;var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1);if(e in X[a])return e;for(e=0;e<t.length;++e){var r=t[e]+n;if(r in X[a])return r}}function q(e){return b===typeof e&&this.parse(e),this}function R(t,n,r,i){var s=[];e.each(t,function(t){t=e.camelCase(t),t=e[c][H][t]||e.cssProps[t]||t,t=t.replace(/([A-Z])/g,function(e){return"-"+e[P]()}),-1===e.inArray(t,s)&&s.push(t)}),e[T][r]&&(r=e[T][r]);var o=""+W(n)+B+r;0<parseInt(i,10)&&(o+=B+W(i));var u=[];return e.each(s,function(e,t){u.push(t+B+o)}),u.join(", ")}function U(t,r){r||(e.cssNumber[t]=!0),e[c][H][t]=V[n],e[h][t]={get:function(n){return e(n).css(s).get(t)},set:function(n,r){var i=e(n).css(s);i[O](t,r),e(n).css({"transit:transform":i})}}}function z(e,t){return b===typeof e&&!e.match(/^[\-0-9\.]+$/)?e:""+e+t}function W(t){return e.fx.speeds[t]&&(t=e.fx.speeds[t]),z(t,"ms")}var t="transition",n="transform",r="undefined",i="transformOrigin",s="transit:transform",o="translate",u="_translateX",a="style",f="_translateY",l="function",c="transit",h="cssHooks",p="padding",d="perspective",v="margin",m="deg",g=null,y="queue",b="string",w="rotateY",E="rotateX",S="transitionDelay",x="scale",T="cssEase",N="apply",C="transitionEnd",k="prototype",L=",",A="hasOwnProperty",O="setFromString",M="transform3d",_="rotate3d",D="px",P="toLowerCase",H="propertyMap",B=" ",j="complete",F="duration";e[c]={version:"0.9.9",propertyMap:{marginLeft:v,marginRight:v,marginBottom:v,marginTop:v,paddingLeft:p,paddingRight:p,paddingBottom:p,paddingTop:p},enabled:!0,useTransitionEnd:!1};var X=document.createElement("div"),V={},$=-1<navigator.userAgent[P]().indexOf("chrome");V[t]=I(t),V[S]=I(S),V[n]=I(n),V[i]=I(i),X[a][V[n]]="",X[a][V[n]]="rotateY(90deg)",V[M]=""!==X[a][V[n]];var J=V[C]={transition:C,MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[V[t]]||g,K;for(K in V)V[A](K)&&r===typeof e.support[K]&&(e.support[K]=V[K]);X=g,e[T]={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e[h][s]={get:function(t){return e(t).data(n)||new q},set:function(t,r){var i=r;i instanceof q||(i=new q(i)),t[a][V[n]]="WebkitTransform"===V[n]&&!$?i.toString(!0):i.toString(),e(t).data(n,i)}},e[h][n]={set:e[h][s].set},"1.8">e.fn.jquery&&(e[h][i]={get:function(e){return e[a][V[i]]},set:function(e,t){e[a][V[i]]=t}},e[h][t]={get:function(e){return e[a][V[t]]},set:function(e,n){e[a][V[t]]=n}}),U(x),U(o),U("rotate"),U(E),U(w),U(_),U(d),U("skewX"),U("skewY"),U("x",!0),U("y",!0),q[k]={setFromString:function(e,t){var n=b===typeof t?t.split(L):t.constructor===Array?t:[t];n.unshift(e),q[k].set[N](this,n)},set:function(e){var t=Array[k].slice[N](arguments,[1]);this.setter[e]?this.setter[e][N](this,t):this[e]=t.join(L)},get:function(e){return this.getter[e]?this.getter[e][N](this):this[e]||0},setter:{rotate:function(e){this.rotate=z(e,m)},rotateX:function(e){this[E]=z(e,m)},rotateY:function(e){this[w]=z(e,m)},scale:function(e,t){void 0===t&&(t=e),this[x]=e+L+t},skewX:function(e){this.skewX=z(e,m)},skewY:function(e){this.skewY=z(e,m)},perspective:function(e){this[d]=z(e,D)},x:function(e){this.set(o,e,g)},y:function(e){this.set(o,g,e)},translate:function(e,t){void 0===this[u]&&(this[u]=0),void 0===this[f]&&(this[f]=0),g!==e&&void 0!==e&&(this[u]=z(e,D)),g!==t&&void 0!==t&&(this[f]=z(t,D)),this[o]=this[u]+L+this[f]}},getter:{x:function(){return this[u]||0},y:function(){return this[f]||0},scale:function(){var e=(this[x]||"1,1").split(L);return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this[_]||"0,0,0,0deg").split(L),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=z(e[3],m)),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t[O](n,r)})},toString:function(e){var t=[],n;for(n in this)this[A](n)&&(V[M]||E!==n&&w!==n&&d!==n&&i!==n)&&"_"!==n[0]&&(e&&x===n?t.push(n+"3d("+this[n]+",1)"):e&&o===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"));return t.join(B)}},e.fn[t]=e.fn[c]=function(n,i,s,o){var u=this,f=0,h=!0;l===typeof i&&(o=i,i=void 0),l===typeof s&&(o=s,s=void 0),r!==typeof n.easing&&(s=n.easing,delete n.easing),r!==typeof n[F]&&(i=n[F],delete n[F]),r!==typeof n[j]&&(o=n[j],delete n[j]),r!==typeof n[y]&&(h=n[y],delete n[y]),r!==typeof n.delay&&(f=n.delay,delete n.delay),r===typeof i&&(i=e.fx.speeds._default),r===typeof s&&(s=e[T]._default),i=W(i);var p=R(n,i,s,f),d=e[c].enabled&&V[t]?parseInt(i,10)+parseInt(f,10):0;if(0===d)return i=h,s=function(e){u.css(n),o&&o[N](u),e&&e()},!0===i?u[y](s):i?u[y](i,s):s(),u;var v={};return i=h,s=function(r){var i=0;"MozTransition"===V[t]&&25>i&&(i=25),window.setTimeout(function(){var i=!1,s=function(){i&&u.unbind(J,s),0<d&&u.each(function(){this[a][V[t]]=v[this]||g}),l===typeof o&&o[N](u),l===typeof r&&r()};0<d&&J&&e[c].useTransitionEnd?(i=!0,u.bind(J,s)):window.setTimeout(s,d),u.each(function(){0<d&&(this[a][V[t]]=p),e(this).css(n)})},i)},!0===i?u[y](s):i?u[y](i,s):s(),this},e[c].getTransitionValue=R}(jQuery);var dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){var e="createElement",t="text/css",n="appendChild",r="getElementsByTagName",i="head";return{load:function(o,u){var u=u||document,a=u[e]("link");a.type=t,a.rel="stylesheet",a.href=o,u[r](i)[0][n](a)},inject:function(o,u){var u=u||document,a=document[e]("style");a.type=t,a.innerHTML=o,u[r](i)[0][n](a)}}}(),dat.utils.common=function(){var e="forEach",t="prototype",n="call",r="isUndefined",i="length",s=Array[t][e],o=Array[t].slice;return{BREAK:{},extend:function(e){return this.each(o[n](arguments,1),function(t){for(var n in t)this[r](t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(o[n](arguments,1),function(t){for(var n in t)this[r](e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=o[n](arguments);return function(){for(var t=o[n](arguments),r=e[i]-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},each:function(t,r,o){if(s&&t[e]===s)t[e](r,o);else if(t[i]===t[i]+0){for(var u=0,a=t[i];u<a;u++)if(u in t&&r[n](o,t[u],u)===this.BREAK)break}else for(u in t)if(r[n](o,t[u],u)===this.BREAK)break},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():o[n](e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return Object[t].toString[n](e)==="[object Function]"}}}(),dat.controllers.Controller=function(e){var t="initialValue",n="object",r="property",i="__onFinishChange",s="__onChange",o=function(e,o){this[t]=e[o],this.domElement=document.createElement("div"),this[n]=e,this[r]=o,this[i]=this[s]=void 0};return e.extend(o.prototype,{onChange:function(e){return this[s]=e,this},onFinishChange:function(e){return this[i]=e,this},setValue:function(e){return this[n][this[r]]=e,this[s]&&this[s].call(this,e),this.updateDisplay(),this},getValue:function(){return this[n][this[r]]},updateDisplay:function(){return this},isModified:function(){return this[t]!==this.getValue()}}),o}(dat.utils.common),dat.dom.dom=function(e){function m(n){return n==="0"||e[t](n)?0:(n=n.match(y),e.isNull(n)?0:parseFloat(n[1]))}var t="isUndefined",n="style",r=!1,i="auto",s="none",o="on",u=!0,a="bubbles",f="cancelable",l="addEventListener",c="attachEvent",h="removeEventListener",p="detachEvent",d="className",v="offsetParent",g={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,n){e.each(t,function(e){g[e]=n})});var y=/(\d+(\.\d+)?)px/,b={makeSelectable:function(e,t){e!==void 0&&e[n]!==void 0&&(e.onselectstart=t?function(){return r}:function(){},e[n].MozUserSelect=t?i:s,e[n].KhtmlUserSelect=t?i:s,e.unselectable=t?o:"off")},makeFullscreen:function(r,i,s){e[t](i)&&(i=u),e[t](s)&&(s=u),r[n].position="absolute",i&&(r[n].left=0,r[n].right=0),s&&(r[n].top=0,r[n].bottom=0)},fakeEvent:function(t,n,i,s){var i=i||{},o=g[n];if(!o)throw Error("Event type "+n+" not supported.");var l=document.createEvent(o);switch(o){case"MouseEvents":l.initMouseEvent(n,i[a]||r,i[f]||u,window,i.clickCount||1,0,0,i.x||i.clientX||0,i.y||i.clientY||0,r,r,r,r,0,null);break;case"KeyboardEvents":o=l.initKeyboardEvent||l.initKeyEvent,e.defaults(i,{cancelable:u,ctrlKey:r,altKey:r,shiftKey:r,metaKey:r,keyCode:void 0,charCode:void 0}),o(n,i[a]||r,i[f],window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:l.initEvent(n,i[a]||r,i[f]||u)}e.defaults(l,s),t.dispatchEvent(l)},bind:function(e,t,n,i){return e[l]?e[l](t,n,i||r):e[c]&&e[c](o+t,n),b},unbind:function(e,t,n,i){return e[h]?e[h](t,n,i||r):e[p]&&e[p](o+t,n),b},addClass:function(e,t){if(e[d]===void 0)e[d]=t;else if(e[d]!==t){var n=e[d].split(/ +/);n.indexOf(t)==-1&&(n.push(t),e[d]=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return b},removeClass:function(e,t){if(t){if(e[d]!==void 0)if(e[d]===t)e.removeAttribute("class");else{var n=e[d].split(/ +/),r=n.indexOf(t);r!=-1&&(n.splice(r,1),e[d]=n.join(" "))}}else e[d]=void 0;return b},hasClass:function(e,t){return RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e[d])||r},getWidth:function(e){return e=getComputedStyle(e),m(e["border-left-width"])+m(e["border-right-width"])+m(e["padding-left"])+m(e["padding-right"])+m(e.width)},getHeight:function(e){return e=getComputedStyle(e),m(e["border-top-width"])+m(e["border-bottom-width"])+m(e["padding-top"])+m(e["padding-bottom"])+m(e.height)},getOffset:function(e){var t={left:0,top:0};if(e[v])do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e[v]);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return b}(dat.utils.common),dat.controllers.OptionController=function(e,t,n){var r="superclass",i="__select",s="createElement",o="value",u="appendChild",a="updateDisplay",f="prototype",l="__onFinishChange",c=function(e,f,l){c[r].call(this,e,f);var h=this;this[i]=document[s]("select");if(n.isArray(l)){var p={};n.each(l,function(e){p[e]=e}),l=p}n.each(l,function(e,t){var n=document[s]("option");n.innerHTML=t,n.setAttribute(o,e),h[i][u](n)}),this[a](),t.bind(this[i],"change",function(){h.setValue(this.options[this.selectedIndex][o])}),this.domElement[u](this[i])};return c[r]=e,n.extend(c[f],e[f],{setValue:function(e){return e=c[r][f].setValue.call(this,e),this[l]&&this[l].call(this,this.getValue()),e},updateDisplay:function(){return this[i][o]=this.getValue(),c[r][f][a].call(this)}}),c}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(e,t){var n="superclass",r="__min",i="__max",s="__step",o="initialValue",u="prototype",a=function(e,u,f){a[n].call(this,e,u),f=f||{},this[r]=f.min,this[i]=f.max,this[s]=f.step,e=this.__impliedStep=t.isUndefined(this[s])?this[o]==0?1:Math.pow(10,Math.floor(Math.log(this[o])/Math.LN10))/10:this[s],e=e.toString(),this.__precision=e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0};return a[n]=e,t.extend(a[u],e[u],{setValue:function(e){return this[r]!==void 0&&e<this[r]?e=this[r]:this[i]!==void 0&&e>this[i]&&(e=this[i]),this[s]!==void 0&&e%this[s]!=0&&(e=Math.round(e/this[s])*this[s]),a[n][u].setValue.call(this,e)},min:function(e){return this[r]=e,this},max:function(e){return this[i]=e,this},step:function(e){return this[s]=e,this}}),a}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(e,t,n){var r="__input",i="clientY",s="getValue",o="mousemove",u="mouseup",a="__truncationSuspended",f="superclass",l="bind",c="__onFinishChange",h="updateDisplay",p="prototype",d=function(e,p,m){function b(){var e=parseFloat(S[r].value);n.isNaN(e)||S.setValue(e)}function w(e){var t=x-e[i];S.setValue(S[s]()+t*S.__impliedStep),x=e[i]}function E(){t.unbind(window,o,w),t.unbind(window,u,E)}this[a]=!1,d[f].call(this,e,p,m);var S=this,x;this[r]=document.createElement("input"),this[r].setAttribute("type","text"),t[l](this[r],"change",b),t[l](this[r],"blur",function(){b(),S[c]&&S[c].call(S,S[s]())}),t[l](this[r],"mousedown",function(e){t[l](window,o,w),t[l](window,u,E),x=e[i]}),t[l](this[r],"keydown",function(e){e.keyCode===13&&(S[a]=!0,this.blur(),S[a]=!1)}),this[h](),this.domElement.appendChild(this[r])};return d[f]=e,n.extend(d[p],e[p],{updateDisplay:function(){var e=this[r],t;if(this[a])t=this[s]();else{t=this[s]();var n=Math.pow(10,this.__precision);t=Math.round(t*n)/n}return e.value=t,d[f][p][h].call(this)}}),d}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(e,t,n,r,i){var s="__background",o="__min",u="mousemove",a="mouseup",f="__onFinishChange",l="superclass",c="createElement",h="__foreground",p="updateDisplay",d="appendChild",v="prototype",m=function(e,n,r,i,v){function g(e){e.preventDefault();var n=t.getOffset(w[s]),r=t.getWidth(w[s]);return w.setValue(w[o]+(w.__max-w[o])*((e.clientX-n.left)/(n.left+r-n.left))),!1}function y(){t.unbind(window,u,g),t.unbind(window,a,y),w[f]&&w[f].call(w,w.getValue())}m[l].call(this,e,n,{min:r,max:i,step:v});var w=this;this[s]=document[c]("div"),this[h]=document[c]("div"),t.bind(this[s],"mousedown",function(e){t.bind(window,u,g),t.bind(window,a,y),g(e)}),t.addClass(this[s],"slider"),t.addClass(this[h],"slider-fg"),this[p](),this[s][d](this[h]),this.domElement[d](this[s])};return m[l]=e,m.useDefaultStyles=function(){n.inject(i)},r.extend(m[v],e[v],{updateDisplay:function(){return this[h].style.width=(this.getValue()-this[o])/(this.__max-this[o])*100+"%",m[l][v][p].call(this)}}),m}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(e,t,n){var r="superclass",i="__button",s="__onChange",o="__onFinishChange",u=function(e,n,s){u[r].call(this,e,n);var o=this;this[i]=document.createElement("div"),this[i].innerHTML=s===void 0?"Fire":s,t.bind(this[i],"click",function(e){return e.preventDefault(),o.fire(),!1}),t.addClass(this[i],"button"),this.domElement.appendChild(this[i])};return u[r]=e,n.extend(u.prototype,e.prototype,{fire:function(){this[s]&&this[s].call(this),this[o]&&this[o].call(this,this.getValue()),this.getValue().call(this.object)}}),u}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(e,t,n){var r="superclass",i="__prev",s="getValue",o="__checkbox",u="setAttribute",a="updateDisplay",f="prototype",l="__onFinishChange",c="checked",h=function(e,n){h[r].call(this,e,n);var f=this;this[i]=this[s](),this[o]=document.createElement("input"),this[o][u]("type","checkbox"),t.bind(this[o],"change",function(){f.setValue(!f[i])},!1),this.domElement.appendChild(this[o]),this[a]()};return h[r]=e,n.extend(h[f],e[f],{setValue:function(e){return e=h[r][f].setValue.call(this,e),this[l]&&this[l].call(this,this[s]()),this[i]=this[s](),e},updateDisplay:function(){return this[s]()===!0?(this[o][u](c,c),this[o][c]=!0):this[o][c]=!1,h[r][f][a].call(this)}}),h}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(e){return function(t){if(t.a==1||e.isUndefined(t.a)){for(t=t.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(dat.utils.common),dat.color.interpret=function(e,t){var n="match",r=null,i=!1,s="HEX",o="toString",u="RGB",a="isNumber",f="length",l,c,h=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){return e=e[n](/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),e===r?i:{space:s,hex:parseInt("0x"+e[1][o]()+e[1][o]()+e[2][o]()+e[2][o]()+e[3][o]()+e[3][o]())}},write:e},SIX_CHAR_HEX:{read:function(e){return e=e[n](/^#([A-F0-9]{6})$/i),e===r?i:{space:s,hex:parseInt("0x"+e[1][o]())}},write:e},CSS_RGB:{read:function(e){return e=e[n](/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),e===r?i:{space:u,r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:e},CSS_RGBA:{read:function(e){return e=e[n](/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),e===r?i:{space:u,r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:e}}},{litmus:t[a],conversions:{HEX:{read:function(e){return{space:s,hex:e,conversionName:s}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return e[f]!=3?i:{space:u,r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e[f]!=4?i:{space:u,r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return t[a](e.r)&&t[a](e.g)&&t[a](e.b)&&t[a](e.a)?{space:u,r:e.r,g:e.g,b:e.b,a:e.a}:i},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return t[a](e.r)&&t[a](e.g)&&t[a](e.b)?{space:u,r:e.r,g:e.g,b:e.b}:i},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return t[a](e.h)&&t[a](e.s)&&t[a](e.v)&&t[a](e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:i},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return t[a](e.h)&&t[a](e.s)&&t[a](e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:i},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){c=i;var e=arguments[f]>1?t.toArray(arguments):arguments[0];return t.each(h,function(n){if(n.litmus(e))return t.each(n.conversions,function(n,r){l=n.read(e);if(c===i&&l!==i)return c=l,l.conversionName=r,l.conversion=n,t.BREAK}),t.BREAK}),c}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){function jt(e,t,n,s){if(t[n]===void 0)throw Error("Object "+t+' has no property "'+n+'"');s.color?t=new l(t,n):(t=[t,n].concat(s.factoryArgs),t=r.apply(e,t)),s[pt]instanceof i&&(s[pt]=s[pt].__li),qt(e,t),p[m](t[v],"c"),n=document[g]($),p[m](n,"property-name"),n[T]=t[D];var o=document[g](ot);return o[w](n),o[w](t[v]),s=Ft(e,o,s[pt]),p[m](s,nn[ut]),p[m](s,typeof t.getValue()),It(e,s,t),e[_].push(t),t}function Ft(e,t,n){var r=document[g]("li");return t&&r[w](t),n?e[F][U](r,params[pt]):e[F][w](r),e[A](),r}function It(e,t,n){n.__li=t,n.__gui=e,d.extend(n,{options:function(t){if(arguments[W]>1)return n.remove(),jt(e,n[Nt],n[D],{before:n.__li[z],factoryArgs:[d.toArray(arguments)]});if(d.isArray(t)||d.isObject(t))return n.remove(),jt(e,n[Nt],n[D],{before:n.__li[z],factoryArgs:[t]})},name:function(e){return n.__li[B][B][T]=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}});if(n instanceof a){var r=new u(n[Nt],n[D],{min:n.__min,max:n.__max,step:n.__step});d[_t]([P,"onChange","onFinishChange"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array[dt].slice.call(arguments);return t.apply(n,e),i.apply(r,e)}}),p[m](t,"has-slider"),n[v][U](r[v],n[v][B])}else if(n instanceof u){var i=function(t){return d.isNumber(n.__min)&&d.isNumber(n.__max)?(n.remove(),jt(e,n[Nt],n[D],{before:n.__li[z],factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=d[At](i,n.min),n.max=d[At](i,n.max)}else n instanceof s?(p[Y](t,L,function(){p.fakeEvent(n.__checkbox,L)}),p[Y](n.__checkbox,L,function(e){e.stopPropagation()})):n instanceof o?(p[Y](t,L,function(){p.fakeEvent(n[Pt],L)}),p[Y](t,"mouseover",function(){p[m](n[Pt],"hover")}),p[Y](t,"mouseout",function(){p[G](n[Pt],"hover")})):n instanceof l&&(p[m](t,"color"),n[P]=d[At](function(e){return t[J].borderLeftColor=n.__color.toString(),e},n[P]),n[P]());n[yt]=d[At](function(t){return e[j]()[y]&&n.isModified()&&Vt(e[j](),it),t},n[yt])}function qt(e,t){var n=e[j](),r=n[x].indexOf(t[Nt]);if(r!=-1){var i=n[E][r];i===void 0&&(i={},n[E][r]=i),i[t[D]]=t;if(n[V]&&n[V][S]){n=n[V][S];if(n[e[M]])n=n[e[M]];else{if(!n[Jt])return;n=n[Jt]}n[r]&&n[r][t[D]]!==void 0&&(r=n[r][t[D]],t[vt]=r,t[yt](r))}}}function Rt(e){var t=e[rt]=document[g]("li");p[m](e[v],"has-save"),e[F][U](t,e[F].firstChild),p[m](t,"save-row");var n=document[g]($);n[T]="&nbsp;",p[m](n,"button gears");var r=document[g]($);r[T]="Save",p[m](r,gt),p[m](r,"save");var i=document[g]($);i[T]="New",p[m](i,gt),p[m](i,"save-as");var s=document[g]($);s[T]="Revert",p[m](s,gt),p[m](s,Lt);var o=e[y]=document[g]("select");e[V]&&e[V][S]?d[_t](e[V][S],function(t,n){Xt(e,n,n==e[M])}):Xt(e,Jt,H),p[Y](o,"change",function(){for(var t=0;t<e[y][W];t++)e[y][t][T]=e[y][t][Ot];e[M]=this[Ot]}),t[w](o),t[w](n),t[w](r),t[w](i),t[w](s);if(Kt){var t=document[q]("dg-save-locally"),u=document[q]("dg-local-explain");t[J].display="block",t=document[q]("dg-local-storage"),localStorage.getItem(document[at].href+ht)==="true"&&t.setAttribute(Mt,Mt);var a=function(){u[J].display=e[I]?"block":"none"};a(),p[Y](t,"change",function(){e[I]=!e[I],a()})}var f=document[q]("dg-new-constructor");p[Y](f,Dt,function(e){e.metaKey&&(e.which===67||e.keyCode==67)&&Gt.hide()}),p[Y](n,L,function(){f[T]=JSON.stringify(e[lt](),void 0,2),Gt.show(),f.focus(),f.select()}),p[Y](r,L,function(){e.save()}),p[Y](i,L,function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),p[Y](s,L,function(){e[Lt]()})}function Ut(e){function t(t){return t[tt](),i=t.clientX,p[m](e[b],nn[wt]),p[Y](window,Tt,n),p[Y](window,Bt,r),H}function n(t){return t[tt](),e[nt]+=i-t.clientX,e[A](),i=t.clientX,H}function r(){p[G](e[b],nn[wt]),p.unbind(window,Tt,n),p.unbind(window,Bt,r)}e[C]=document[g](ot),d.extend(e[C][J],{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var i;p[Y](e[C],kt,t),p[Y](e[b],kt,t),e[v][U](e[C],e[v][B])}function zt(e,t){e[v][J][nt]=t+St,e[rt]&&e[N]&&(e[rt][J][nt]=t+St),e[b]&&(e[b][J][nt]=t+St)}function Wt(e,t){var n={};return d[_t](e[x],function(r,i){var s={};d[_t](e[E][i],function(e,n){s[n]=t?e[vt]:e.getValue()}),n[i]=s}),n}function Xt(e,t,n){var r=document[g]("option");r[T]=t,r[Ot]=t,e[y][w](r),n&&(e[y][ft]=e[y][W]-1)}function Vt(e,t){var n=e[y][e[y][ft]];n[T]=t?n[Ot]+"*":n[Ot]}function $t(e){e[W]!=0&&c(function(){$t(e)}),d[_t](e,function(e){e[P]()})}var v="domElement",m="addClass",g="createElement",y="__preset_select",b="__closeButton",w="appendChild",E="__rememberedObjectIndecesToControllers",S="remembered",x="__rememberedObjects",T="innerHTML",N="autoPlace",C="__resize_handle",k="closed",L="click",A="onResize",O="isUndefined",M="preset",_="__controllers",D="property",P="updateDisplay",H=!1,B="firstElementChild",j="getRoot",F="__ul",I="useLocalStorage",q="getElementById",R="parent",U="insertBefore",z="nextElementSibling",W="length",X="CLASS_CLOSED",V="load",$="span",J="style",K="__listening",Q="__folders",G="removeClass",Y="bind",Z="CLASS_AUTO_PLACE_CONTAINER",et="CLASS_TOO_TALL",tt="preventDefault",nt="width",rt="__save_row",it=!0,st="scrollable",ot="div",ut="CLASS_CONTROLLER_ROW",at="location",ft="selectedIndex",lt="getSaveObject",ct="folders",ht=".isLocal",pt="before",dt="prototype",vt="initialValue",mt="TEXT_CLOSED",gt="button",yt="setValue",bt="CLASS_CLOSE_BUTTON",wt="CLASS_DRAG",Et="CLASS_AUTO_PLACE",St="px",xt="localStorage",Tt="mousemove",Nt="object",Ct="resizable",kt="mousedown",Lt="revert",At="compose",Ot="value",Mt="checked",_t="each",Dt="keydown",Pt="__button",Ht="DEFAULT_WIDTH",Bt="mouseup";e.inject(n);var Jt="Default",Kt;try{Kt=xt in window&&window[xt]!==null}catch(Qt){Kt=H}var Gt,Yt=it,Zt,en=H,tn=[],nn=function(e){function t(){localStorage.setItem(document[at].href+".gui",JSON.stringify(r[lt]()))}function n(){var e=r[j]();e[nt]+=1,d.defer(function(){e[nt]-=1})}var r=this;this[v]=document[g](ot),this[F]=document[g]("ul"),this[v][w](this[F]),p[m](this[v],"dg"),this[Q]={},this[_]=[],this[x]=[],this[E]=[],this[K]=[],e=e||{},e=d.defaults(e,{autoPlace:it,width:nn[Ht]}),e=d.defaults(e,{resizable:e[N],hideable:e[N]}),d[O](e[V])?e[V]={preset:Jt}:e[M]&&(e[V][M]=e[M]),d[O](e[R])&&e.hideable&&tn.push(this),e[Ct]=d[O](e[R])&&e[Ct],e[N]&&d[O](e[st])&&(e[st]=it);var i=Kt&&localStorage.getItem(document[at].href+ht)==="true";Object.defineProperties(this,{parent:{get:function(){return e[R]}},scrollable:{get:function(){return e[st]}},autoPlace:{get:function(){return e[N]}},preset:{get:function(){return r[R]?r[j]()[M]:e[V][M]},set:function(t){r[R]?r[j]()[M]=t:e[V][M]=t;for(t=0;t<this[y][W];t++)this[y][t][Ot]==this[M]&&(this[y][ft]=t);r[Lt]()}},width:{get:function(){return e[nt]},set:function(t){e[nt]=t,zt(r,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,o&&(o[T]=e.name)}},closed:{get:function(){return e[k]},set:function(t){e[k]=t,e[k]?p[m](r[F],nn[X]):p[G](r[F],nn[X]),this[A](),r[b]&&(r[b][T]=t?nn.TEXT_OPEN:nn[mt])}},load:{get:function(){return e[V]}},useLocalStorage:{get:function(){return i},set:function(e){Kt&&((i=e)?p[Y](window,"unload",t):p.unbind(window,"unload",t),localStorage.setItem(document[at].href+ht,e))}}});if(d[O](e[R])){e[k]=H,p[m](this[v],nn.CLASS_MAIN),p.makeSelectable(this[v],H);if(Kt&&i){r[I]=it;var s=localStorage.getItem(document[at].href+".gui");s&&(e[V]=JSON.parse(s))}this[b]=document[g](ot),this[b][T]=nn[mt],p[m](this[b],nn[bt]),this[v][w](this[b]),p[Y](this[b],L,function(){r[k]=!r[k]})}else{e[k]===void 0&&(e[k]=it);var o=document.createTextNode(e.name);p[m](o,"controller-name"),s=Ft(r,o),p[m](this[F],nn[X]),p[m](s,"title"),p[Y](s,L,function(e){return e[tt](),r[k]=!r[k],H}),e[k]||(this[k]=H)}e[N]&&(d[O](e[R])&&(Yt&&(Zt=document[g](ot),p[m](Zt,"dg"),p[m](Zt,nn[Z]),document.body[w](Zt),Yt=H),Zt[w](this[v]),p[m](this[v],nn[Et])),this[R]||zt(r,e[nt])),p[Y](window,"resize",function(){r[A]()}),p[Y](this[F],"webkitTransitionEnd",function(){r[A]()}),p[Y](this[F],"transitionend",function(){r[A]()}),p[Y](this[F],"oTransitionEnd",function(){r[A]()}),this[A](),e[Ct]&&Ut(this),r[j](),e[R]||n()};return nn.toggleHide=function(){en=!en,d[_t](tn,function(e){e[v][J].zIndex=en?-999:999,e[v][J].opacity=en?0:1})},nn[Et]="a",nn[Z]="ac",nn.CLASS_MAIN="main",nn[ut]="cr",nn[et]="taller-than-window",nn[X]=k,nn[bt]="close-button",nn[wt]="drag",nn[Ht]=245,nn[mt]="Close Controls",nn.TEXT_OPEN="Open Controls",p[Y](window,Dt,function(e){document.activeElement.type!=="text"&&(e.which===72||e.keyCode==72)&&nn.toggleHide()},H),d.extend(nn[dt],{add:function(e,t){return jt(this,e,t,{factoryArgs:Array[dt].slice.call(arguments,2)})},addColor:function(e,t){return jt(this,e,t,{color:it})},remove:function(e){this[F].removeChild(e.__li),this[_].slice(this[_].indexOf(e),1);var t=this;d.defer(function(){t[A]()})},destroy:function(){this[N]&&Zt.removeChild(this[v])},addFolder:function(e){if(this[Q][e]!==void 0)throw Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};return t[N]=this[N],this[V]&&this[V][ct]&&this[V][ct][e]&&(t[k]=this[V][ct][e][k],t[V]=this[V][ct][e]),t=new nn(t),this[Q][e]=t,e=Ft(this,t[v]),p[m](e,"folder"),t},open:function(){this[k]=H},close:function(){this[k]=it},onResize:function(){var e=this[j]();if(e[st]){var t=p.getOffset(e[F]).top,n=0;d[_t](e[F].childNodes,function(t){e[N]&&t===e[rt]||(n+=p.getHeight(t))}),window.innerHeight-t-20<n?(p[m](e[v],nn[et]),e[F][J].height=window.innerHeight-t-20+St):(p[G](e[v],nn[et]),e[F][J].height="auto")}e[C]&&d.defer(function(){e[C][J].height=e[F].offsetHeight+St}),e[b]&&(e[b][J][nt]=e[nt]+St)},remember:function(){d[O](Gt)&&(Gt=new h,Gt[v][T]=t);if(this[R])throw Error("You can only call remember on a top level GUI.");var e=this;d[_t](Array[dt].slice.call(arguments),function(t){e[x][W]==0&&Rt(e),e[x].indexOf(t)==-1&&e[x].push(t)}),this[N]&&zt(this,this[nt])},getRoot:function(){for(var e=this;e[R];)e=e[R];return e},getSaveObject:function(){var e=this[V];return e[k]=this[k],this[x][W]>0&&(e[M]=this[M],e[S]||(e[S]={}),e[S][this[M]]=Wt(this)),e[ct]={},d[_t](this[Q],function(t,n){e[ct][n]=t[lt]()}),e},save:function(){this[V][S]||(this[V][S]={}),this[V][S][this[M]]=Wt(this),Vt(this,H)},saveAs:function(e){this[V][S]||(this[V][S]={},this[V][S][Jt]=Wt(this,it)),this[V][S][e]=Wt(this),this[M]=e,Xt(this,e,it)},revert:function(e){d[_t](this[_],function(t){this[j]()[V][S]?qt(e||this[j](),t):t[yt](t[vt])},this),d[_t](this[Q],function(e){e[Lt](e)}),e||Vt(this[j](),H)},listen:function(e){var t=this[K][W]==0;this[K].push(e),t&&$t(this[K])}}),nn}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"
,dat.controllers.factory=function(e,t,n,r,i,s,o){var u="isNumber";return function(l,h,p,v){var m=l[h];if(o.isArray(p)||o.isObject(p))return new e(l,h,p);if(o[u](m))return o[u](p)&&o[u](v)?new n(l,h,p,v):new t(l,h,{min:p,max:v});if(o.isString(m))return new r(l,h);if(o.isFunction(m))return new i(l,h,"");if(o.isBoolean(m))return new s(l,h)}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(e,t,n){var r="__input",i="superclass",s="__onFinishChange",o="updateDisplay",u="prototype",a=function(e,n){function u(){f.setValue(f[r].value)}a[i].call(this,e,n);var f=this;this[r]=document.createElement("input"),this[r].setAttribute("type","text"),t.bind(this[r],"keyup",u),t.bind(this[r],"change",u),t.bind(this[r],"blur",function(){f[s]&&f[s].call(f,f.getValue())}),t.bind(this[r],"keydown",function(e){e.keyCode===13&&this.blur()}),this[o](),this.domElement.appendChild(this[r])};return a[i]=e,n.extend(a[u],e[u],{updateDisplay:function(){return t.isActive(this[r])||(this[r].value=this.getValue()),a[i][u][o].call(this)}}),a}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(e,t,n,r,i){function U(e,t,n,r){e[l].background="",i.each(X,function(i){e[l][T]+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}function z(e){e[l].background="",e[l][T]+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e[l][T]+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e[l][T]+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e[l][T]+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e[l][T]+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var s="__saturation_field",o="__color",u="createElement",a="__hue_field",f="__selector",l="style",c="__field_knob",h="appendChild",p="extend",d="mouseup",v="__input",m="__field_knob_border",g="mousemove",y="mousedown",b="__hue_knob",w="__input_textShadow",E="className",S="div",x="__state",T="cssText",N="__temp",C="domElement",k=!1,L="bind",A="toString",O="toOriginal",M="1px solid #555",_="100px",D="inline-block",P="#fff",H="12px",B="absolute",j="preventDefault",F="setValue",I="unbind",q="superclass",R="15px",W=function(e,T){function X(e){rt(e),t[L](window,g,rt),t[L](window,d,et)}function et(){t[I](window,g,rt),t[I](window,d,et)}function tt(){var e=r(this.value);e!==k?(st[o][x]=e,st[F](st[o][O]())):this.value=st[o][A]()}function nt(){t[I](window,g,it),t[I](window,d,nt)}function rt(e){e[j]();var n=t.getWidth(st[s]),r=t.getOffset(st[s]),i=(e.clientX-r.left+document.body.scrollLeft)/n,e=1-(e.clientY-r.top+document.body.scrollTop)/n;return e>1?e=1:e<0&&(e=0),i>1?i=1:i<0&&(i=0),st[o].v=e,st[o].s=i,st[F](st[o][O]()),k}function it(e){e[j]();var n=t.getHeight(st[a]),r=t.getOffset(st[a]),e=1-(e.clientY-r.top+document.body.scrollTop)/n;return e>1?e=1:e<0&&(e=0),st[o].h=e*360,st[F](st[o][O]()),k}W[q].call(this,e,T),this[o]=new n(this.getValue()),this[N]=new n(0);var st=this;this[C]=document[u](S),t.makeSelectable(this[C],k),this[f]=document[u](S),this[f][E]="selector",this[s]=document[u](S),this[s][E]="saturation-field",this[c]=document[u](S),this[c][E]="field-knob",this[m]="2px solid ",this[b]=document[u](S),this[b][E]="hue-knob",this[a]=document[u](S),this[a][E]="hue-field",this[v]=document[u]("input"),this[v].type="text",this[w]="0 1px 1px ",t[L](this[v],"keydown",function(e){e.keyCode===13&&tt.call(this)}),t[L](this[v],"blur",tt),t[L](this[f],y,function(){t.addClass(this,"drag")[L](window,d,function(){t.removeClass(st[f],"drag")})});var ot=document[u](S);i[p](this[f][l],{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i[p](this[c][l],{position:B,width:H,height:H,border:this[m]+(this[o].v<.5?P:"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:H,zIndex:1}),i[p](this[b][l],{position:B,width:R,height:"2px",borderRight:"4px solid #fff",zIndex:1}),i[p](this[s][l],{width:_,height:_,border:M,marginRight:"3px",display:D,cursor:"pointer"}),i[p](ot[l],{width:"100%",height:"100%",background:"none"}),U(ot,"top","rgba(0,0,0,0)","#000"),i[p](this[a][l],{width:R,height:_,display:D,border:M,cursor:"ns-resize"}),z(this[a]),i[p](this[v][l],{outline:"none",textAlign:"center",color:P,border:0,fontWeight:"bold",textShadow:this[w]+"rgba(0,0,0,0.7)"}),t[L](this[s],y,X),t[L](this[c],y,X),t[L](this[a],y,function(e){it(e),t[L](window,g,it),t[L](window,d,nt)}),this[s][h](ot),this[f][h](this[c]),this[f][h](this[s]),this[f][h](this[a]),this[a][h](this[b]),this[C][h](this[v]),this[C][h](this[f]),this.updateDisplay()};W[q]=e,i[p](W.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(e!==k){var t=k;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(e[n])&&!i.isUndefined(this[o][x][n])&&e[n]!==this[o][x][n])return t=!0,{}},this),t&&i[p](this[o][x],e)}i[p](this[N][x],this[o][x]),this[N].a=1;var u=this[o].v<.5||this[o].s>.5?255:0,a=255-u;i[p](this[c][l],{marginLeft:100*this[o].s-7+"px",marginTop:100*(1-this[o].v)-7+"px",backgroundColor:this[N][A](),border:this[m]+"rgb("+u+","+u+","+u+")"}),this[b][l].marginTop=(1-this[o].h/360)*100+"px",this[N].s=1,this[N].v=1,U(this[s],"left",P,this[N][A]()),i[p](this[v][l],{backgroundColor:this[v].value=this[o][A](),color:"rgb("+u+","+u+","+u+")",textShadow:this[w]+"rgba("+a+","+a+","+a+",.7)"})}});var X=["-moz-","-o-","-webkit-","-ms-",""];return W}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(e,t,n,r){function h(e,t,n){Object[i](e,t,{get:function(){return this[o][s]===u?this[o][t]:(d(this,t,n),this[o][t])},set:function(e){this[o][s]!==u&&(d(this,t,n),this[o][s]=u),this[o][t]=e}})}function p(e,t){Object[i](e,t,{get:function(){return this[o][s]===a?this[o][t]:(v(this),this[o][t])},set:function(e){this[o][s]!==a&&(v(this),this[o][s]=a),this[o][t]=e}})}function d(e,n,i){if(e[o][s]===f)e[o][n]=t.component_from_hex(e[o].hex,i);else{if(e[o][s]!==a)throw"Corrupted color state";r[l](e[o],t.hsv_to_rgb(e[o].h,e[o].s,e[o].v))}}function v(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r[l](e[o],{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e[o].h)&&(e[o].h=0):e[o].h=n.h}var i="defineProperty",s="space",o="__state",u="RGB",a="HSV",f="HEX",l="extend",c="prototype",m=function(){this[o]=e.apply(this,arguments);if(this[o]===!1)throw"Failed to interpret color arguments";this[o].a=this[o].a||1};return m.COMPONENTS="r,g,b,h,s,v,hex,a".split(","),r[l](m[c],{toString:function(){return n(this)},toOriginal:function(){return this[o].conversion.write(this)}}),h(m[c],"r",2),h(m[c],"g",1),h(m[c],"b",0),p(m[c],"h"),p(m[c],"s"),p(m[c],"v"),Object[i](m[c],"a",{get:function(){return this[o].a},set:function(e){this[o].a=e}}),Object[i](m[c],"hex",{get:function(){return!this[o][s]!==f&&(this[o].hex=t.rgb_to_hex(this.r,this.g,this.b)),this[o].hex},set:function(e){this[o][s]=f,this[o].hex=e}}),m}(dat.color.interpret,dat.color.math=function(){var e="hex_with_component",t;return{hsv_to_rgb:function(e,t,n){var r=e/60-Math.floor(e/60),i=n*(1-t),s=n*(1-r*t),t=n*(1-(1-r)*t),e=[[n,t,i],[s,n,i],[i,n,t],[i,s,n],[t,i,n],[n,i,s]][Math.floor(e/60)%6];return{r:e[0]*255,g:e[1]*255,b:e[2]*255}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),r=i-r;return i==0?{h:NaN,s:0,v:0}:(e=e==i?(t-n)/r:t==i?2+(n-e)/r:4+(e-t)/r,e/=6,e<0&&(e+=1),{h:e*360,s:r/i,v:i/255})},rgb_to_hex:function(t,n,r){return t=this[e](0,2,t),t=this[e](t,1,n),t=this[e](t,0,r)},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(e,n,r){return r<<(t=n*8)|e&~(255<<t)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),dat.dom.CenteredDiv=function(e,t){var n="backgroundElement",r="createElement",i="style",s="none",o="fixed",u="domElement",a="appendChild",f="prototype",l="display",c="block",h="opacity",p="webkitTransform",d="scale(1.1)",v="unbind",m="webkitTransitionEnd",g="transitionend",y="oTransitionEnd",b=function(){this[n]=document[r]("div"),t.extend(this[n][i],{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:s,zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this[n]),this[n][i].position=o,this[u]=document[r]("div"),t.extend(this[u][i],{position:o,display:s,zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body[a](this[n]),document.body[a](this[u]);var f=this;e.bind(this[n],"click",function(){f.hide()})};return b[f].show=function(){var e=this;this[n][i][l]=c,this[u][i][l]=c,this[u][i][h]=0,this[u][i][p]=d,this.layout(),t.defer(function(){e[n][i][h]=1,e[u][i][h]=1,e[u][i][p]="scale(1)"})},b[f].hide=function(){var t=this,r=function(){t[u][i][l]=s,t[n][i][l]=s,e[v](t[u],m,r),e[v](t[u],g,r),e[v](t[u],y,r)};e.bind(this[u],m,r),e.bind(this[u],g,r),e.bind(this[u],y,r),this[n][i][h]=0,this[u][i][h]=0,this[u][i][p]=d},b[f].layout=function(){this[u][i].left=window.innerWidth/2-e.getWidth(this[u])/2+"px",this[u][i].top=window.innerHeight/2-e.getHeight(this[u])/2+"px"},b}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common);var TWEEN=TWEEN||function(){var e=[];return{REVISION:"6",getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){t=e.indexOf(t),-1!==t&&e.splice(t,1)},update:function(t){for(var n=0,r=e.length,t=void 0!==t?t:Date.now();n<r;)e[n].update(t)?n++:(e.splice(n,1),r--)}}}();TWEEN.Tween=function(e){var t=null,n={},r={},i=1e3,s=0,o=t,u=TWEEN.Easing.Linear.None,a=TWEEN.Interpolation.Linear,f=t,l=t,c=t;this.to=function(e,n){return t!==n&&(i=n),r=e,this},this.start=function(i){TWEEN.add(this),o=void 0!==i?i:Date.now(),o+=s;for(var u in r)if(t!==e[u]){if(r[u]instanceof Array){if(0===r[u].length)continue;r[u]=[e[u]].concat(r[u])}n[u]=e[u]}return this},this.stop=function(){return TWEEN.remove(this),this},this.delay=function(e){return s=e,this},this.easing=function(e){return u=e,this},this.interpolation=function(e){return a=e,this},this.chain=function(e){return f=e,this},this.onUpdate=function(e){return l=e,this},this.onComplete=function(e){return c=e,this},this.update=function(s){if(s<o)return!0;var s=(s-o)/i,s=1<s?1:s,p=u(s),d;for(d in n){var v=n[d],m=r[d];e[d]=m instanceof Array?a(m,p):v+(m-v)*p}return t!==l&&l.call(e,p),1==s?(t!==c&&c.call(e),t!==f&&f.start(),!1):!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-0.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/.4)))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),1>(e*=2)?-0.5*n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/.4):.5*n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/.4)+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return 1>(e*=2)?.5*e*e*(3.5949095*e-2.5949095):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),s=TWEEN.Interpolation.Utils.Linear;return 0>t?s(e[0],e[1],r):1<t?s(e[n],e[n-1],n-r):s(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){var n=0,r=e.length-1,i=Math.pow,s=TWEEN.Interpolation.Utils.Bernstein,o;for(o=0;o<=r;o++)n+=i(1-t,r-o)*i(t,o)*e[o]*s(r,o);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),s=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(0>t&&(i=Math.floor(r=n*(1+t))),s(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):0>t?e[0]-(s(e[0],e[0],e[1],e[1],-r)-e[0]):1<t?e[n]-(s(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):s(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=TWEEN.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1,r;if(e[t])return e[t];for(r=t;1<r;r--)n*=r;return e[t]=n}}(),CatmullRom:function(e,t,n,r,i){var e=.5*(n-e),r=.5*(r-t),s=i*i;return(2*t-2*n+e+r)*i*s+(-3*t+3*n-2*e-r)*s+e*i+t}}},this.createjs=this.createjs||{},function(){var e=!1,t="progress",n=null,r="onProgress",i="onLoadStart",s="onFileLoad",o="onFileProgress",u="onComplete",a="onError",f="_isCanceled",l="target",c=function(){this.init()};c.prototype={};var h=c.prototype;h.loaded=e,h.canceled=e,h[t]=0,h._item=n,h[r]=n,h[i]=n,h[s]=n,h[o]=n,h[u]=n,h[a]=n,h.getItem=function(){return this._item},h.init=function(){},h.load=function(){},h.cancel=function(){},h._sendLoadStart=function(){!this[f]()&&this[i]&&this[i]({target:this})},h._sendProgress=function(e){if(!this[f]()){var n;if(e instanceof Number)this[t]=e,n={loaded:this[t],total:1};else if(n=e,this[t]=e.loaded/e.total,isNaN(this[t])||this[t]==Infinity)this[t]=0;n[l]=this,this[r]&&this[r](n)}},h._sendFileProgress=function(e){this[f]()?this._cleanUp():this[o]&&(e[l]=this,this[o](e))},h._sendComplete=function(){!this[f]()&&this[u]&&this[u]({target:this})},h._sendFileComplete=function(e){!this[f]()&&this[s]&&(e[l]=this,this[s](e))},h._sendError=function(e){!this[f]()&&this[a]&&(e==n&&(e={}),e[l]=this,this[a](e))},h[f]=function(){return window.createjs==n||this.canceled?!0:e},h.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=c}(),this.createjs=this.createjs||{},function(){var e="PreloadJS",t="_currentLoads",n=null,r="_loadedScripts",i="_numItemsLoaded",s="_loadStartWasDispatched",o=!1,u="_handleFileTagComplete",a="_updateProgress",f="extensionHandlers",l="_loadedItemsBySrc",c="length",h="_numItems",p="_loadedItemsById",d=!0,v="JAVASCRIPT",m="_createResultData",g="_scriptOrder",y="createElement",b="type",w="_loadNext",E="_loadQueue",S="typeHandlers",x="_maxConnections",T="_sendError",N="TAG_LOAD_OGGS",C="_removeLoadItem",k="getResult",L="_createTagItem",A="getItem",O="determineCapabilities",M="_createScript",_="IMAGE",D="_getNameAfter",P="SOUND",H="_handleFileComplete",B="maintainScriptOrder",j="_createAudio",F="getPreloadHandlers",I="useXHR",q="_checkScriptLoadOrder",R="_createImage",U="extensions",z="_paused",W="_createLink",X="setPaused",V="indexOf",$="image/svg+xml",J="_handleFileError",K="_createLoadItem",Q="_targetProgress",G="_handleProgress",Y="_createSVG",Z="_createXML",et="_addItem",tt="BrowserDetect",nt="XHRLoader",rt="completeHandler",it="_createResult",st="progress",ot=function(e){this.initialize(e)},ut=ot.prototype=new createjs.AbstractLoader;ot[_]="image",ot.SVG="svg",ot[P]="sound",ot.JSON="json",ot[v]="javascript",ot.CSS="css",ot.XML="xml",ot.TEXT="text",ot.TIMEOUT_TIME=8e3,ut[I]=d,ut.stopOnError=o,ut[B]=d,ut.next=n,ut[S]=n,ut[f]=n,ut[s]=o,ut[x]=1,ut[t]=n,ut[E]=n,ut[p]=n,ut[l]=n,ut[Q]=0,ut[h]=0,ut[i]=n,ut[g]=n,ut[r]=n,ut[N]=d,ut.initialize=function(e){this[Q]=this[i]=this[h]=0,this[z]=o,this[t]=[],this[E]=[],this[g]=[],this[r]=[],this[p]={},this[l]={},this[S]={},this[f]={},this[s]=o,this[I]=e!=o&&window.XMLHttpRequest!=n,this[O]()},ut[O]=function(){var t=createjs[e][tt];t!=n&&(createjs[e][N]=t.isFirefox||t.isOpera)},ot.isBinary=function(t){switch(t){case createjs[e][_]:case createjs[e][P]:return d;default:return o}},ut.installPlugin=function(e){if(e!=n&&e[F]!=n){e=e[F]();if(e.types!=n)for(var t=0,r=e.types[c];t<r;t++)this[S][e.types[t]]=e.callback;if(e[U]!=n)for(t=0,r=e[U][c];t<r;t++)this[f][e[U][t]]=e.callback}},ut.setMaxConnections=function(e){this[x]=e,this[z]||this[w]()},ut.loadFile=function(e,t){e==n?this[T]({text:"File is null."}):(this[et](e),t!==o&&this[X](o))},ut.loadManifest=function(e,t){var r;if(e instanceof Array){if(e[c]==0){this[T]({text:"Manifest is empty."});return}r=e}else{if(e==n){this[T]({text:"Manifest is null."});return}r=[e]}for(var i=0,s=r[c];i<s;i++)this[et](r[i],o);t!==o&&this[w]()},ut.load=function(){this[X](o)},ut[k]=function(e){return this[p][e]||this[l][e]},ut[X]=function(e){(this[z]=e)||this[w]()},ut.close=function(){for(;this[t][c];)this[t].pop().cancel();this[g][c]=0,this[r][c]=0},ut[et]=function(t){t=this[K](t),t!=n&&(this[E].push(t),this[h]++,this[a](),t[A]()[b]==createjs[e][v]&&(this[g].push(t[A]()),this[r].push(n)))},ut[w]=function(){if(!this[z]){this[s]||(this._sendLoadStart(),this[s]=d),this[h]==this[i]&&(this.loaded=d,this._sendComplete(),this.next&&this.next.load&&this.next.load.apply(this.next));for(;this[E][c]&&this[t][c]<this[x];)this._loadItem(this[E].shift())}},ut._loadItem=function(n){n.onProgress=createjs[e].proxy(this[G],this),n.onComplete=createjs[e].proxy(this[H],this),n.onError=createjs[e].proxy(this[J],this),this[t].push(n),n.load()},ut[J]=function(e){var e=e.target,t=this[m](e[A]());this[i]++,this[a](),this[T](t),this.stopOnError||(this[C](e),this[w]())},ut[m]=function(e){var t={id:e.id,result:n,data:e.data,type:e[b],src:e.src};return this[p][e.id]=t,this[l][e.src]=t},ut[H]=function(t){var t=t.target,n=t[A](),i=this[m](n);this[C](t),i.result=t instanceof createjs[nt]?this[it](n,t[k]()):n.tag;switch(n[b]){case createjs[e][_]:if(t instanceof createjs[nt]){var s=this;i.result.onload=function(){s[u](n,i)};return}break;case createjs[e][v]:if(this[B]){this[r][this[g][V](n)]=n,this[q](t);return}}this[u](n,i)},ut[q]=function(){for(var e=this[r][c],t=0;t<e;t++){var i=this[r][t];if(i===n)break;if(i!==d){var s=this[k](i.src),i=this[k](i.id);i.result=s.result,this[u](s,i),this[r][t]=d,t--,e--}}},ut[u]=function(e,t){this[i]++,e[rt]&&e[rt](t),this[a](),this._sendFileComplete(t),this[w]()},ut[C]=function(e){for(var n=this[t][c],r=0;r<n;r++)if(this[t][r]==e){this[t].splice(r,1);break}},ut[it]=function(t,r){var i=n,s;switch(t[b]){case createjs[e][_]:i=this[R]();break;case createjs[e][P]:i=t.tag||this[j]();break;case createjs[e].CSS:i=this[W]();break;case createjs[e][v]:i=this[M]();break;case createjs[e].SVG:var i=this[Y](),o=this[Z](r,$);i.appendChild(o);break;case createjs[e].XML:s=this[Z](r,"text/xml");break;case createjs[e].JSON:case createjs[e].TEXT:s=r}return i?(t[b]==createjs[e].CSS?i.href=t.src:t[b]!=createjs[e].SVG&&(i.src=t.src),i):s},ut[Z]=function(e,t){var n;return window.DOMParser?(n=new DOMParser,n=n.parseFromString(e,t)):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=o,n.loadXML(e)),n},ut[G]=function(e){var e=e.target,t=this[m](e[A]());t[st]=e[st],this._sendFileProgress(t),this[a]()},ut[a]=function(){var e=this[i]/this[h],n=this[h]-this[i];if(n>0){for(var r=0,s=0,o=this[t][c];s<o;s++)r+=this[t][s][st];e+=r/n*(n/this[h])}this._sendProgress({loaded:e,total:1})},ut[K]=function(t){var r={};switch(typeof t){case"string":r.src=t;break;case"object":t instanceof HTMLAudioElement?(r.tag=t,r.src=r.tag.src,r[b]=createjs[e][P]):r=t}r.ext=this[D](r.src,"."),r[b]||(r[b]=this.getType(r.ext));if(r.id==n||r.id=="")r.id=r.src;if(t=this[S][r[b]]||this[f][r.ext]){t=t(r.src,r[b],r.id,r.data);if(t===o)return n;t!==d&&(t.src!=n&&(r.src=t.src),t.id!=n&&(r.id=t.id),t.tag!=n&&t.tag.load instanceof Function&&(r.tag=t.tag)),r.ext=this[D](r.src,".")}t=this[I];switch(r[b]){case createjs[e].JSON:case createjs[e].XML:case createjs[e].TEXT:t=d;break;case createjs[e][P]:r.ext=="ogg"&&createjs[e][N]&&(t=o)}return this[I]!=d||r[b]!=createjs[e][_]&&r[b]!=createjs[e].SVG?t?new createjs[nt](r):r.tag?new createjs.TagLoader(r):this[L](r):(r=this[L](r),r[I]=d,r)},ut[L]=function(t){var n,r="src",i=o;switch(t[b]){case createjs[e][_]:n=this[R]();break;case createjs[e][P]:n=this[j]();break;case createjs[e].CSS:r="href",i=d,n=this[W]();break;case createjs[e][v]:i=d,n=this[M]();break;case createjs[e].SVG:r="data",n=this[Y]()}return t.tag=n,new createjs.TagLoader(t,r,i)},ut.getType=function(t){switch(t){case"jpeg":case"jpg":case"gif":case"png":return createjs[e][_];case"ogg":case"mp3":case"wav":return createjs[e][P];case"json":return createjs[e].JSON;case"xml":return createjs[e].XML;case"css":return createjs[e].CSS;case"js":return createjs[e][v];case"svg":return createjs[e].SVG;default:return createjs[e].TEXT}},ut[D]=function(e,t){var n=e.lastIndexOf(t),n=e.substr(n+1),r=n.lastIndexOf(/[\b|\?|\#|\s]/);return r==-1?n:n.substr(0,r)},ut[R]=function(){return document[y]("img")},ut[Y]=function(){var e=document[y]("object");return e[b]=$,e},ut[j]=function(){var e=document[y]("audio");return e.autoplay=o,e[b]="audio/ogg",e},ut[M]=function(){var e=document[y]("script");return e[b]="text/javascript",e},ut[W]=function(){var e=document[y]("link");return e[b]="text/css",e.rel="stylesheet",e},ut.toString=function(){return"[PreloadJS]"},ot.proxy=function(e,t){return function(n){return e.apply(t,arguments)}},createjs[e]=ot;var at=function(){};at.init=function(){var e=navigator.userAgent;at.isFirefox=e[V]("Firefox")>-1,at.isOpera=window.opera!=n,at.isIOS=e[V]("iPod")>-1||e[V]("iPhone")>-1||e[V]("iPad")>-1},at.init(),createjs[e][tt]=at}(),this.createjs=this.createjs||{},function(){var e="_srcAttr",t=null,n="_loadTimeOutTimeout",r="tagCompleteProxy",i="src",s=!0,o="isAudio",u="proxy",a="PreloadJS",f="_handleTagLoad",l="_clean",c="getItem",h="loadTag",p="_handleProgress",d="onFileLoad",v="_handleXHRComplete",m="onComplete",g="_handleLoadError",y="_isCanceled",b="target",w="onload",E="_sendComplete",S="_sendError",x="_handleLoadTimeOut",T="onprogress",N="_handleStalled",C="canplaythrough",k="getElementsByTagName",L="body",A="removeEventListener",O="buffered",M=function(e,t,n){this.init(e,t,n)},_=M.prototype=new createjs.AbstractLoader;_[e]=t,_[n]=t,_[r]=t,_.init=function(t,n,l){this._item=t,this[e]=n||i,this.useXHR=l==s,this[o]=t.tag instanceof HTMLAudioElement,this[r]=createjs[a][u](this[f],this)},_.cancel=function(){this.canceled=s,this[l]();var e=this[c]();e!=t&&(e[i]=t)},_.load=function(){this.useXHR?this.loadXHR():this[h]()},_.loadXHR=function(){var e=this[c](),e=new createjs.XHRLoader(e);e.onProgress=createjs[a][u](this[p],this),e[d]=createjs[a][u](this[v],this),e[m]=createjs[a][u](this[v],this),e.onError=createjs[a][u](this[g],this),e.load()},_[v]=function(n){if(!this[y]()){this[l](),n[b][d]=t,n[b][m]=t;var r=n[b][c]();n[b].getResult(),r.type==createjs[a].IMAGE?(r.tag[w]=createjs[a][u](this[E],this),r.tag[i]=r[i]):(r.tag[this[e]]=r[i],this[E]())}},_[g]=function(e){e.error&&e.error.code==101?this[h]():(this[l](),this[S](e))},_[h]=function(){var s=this[c](),l=s.tag;clearTimeout(this[n]),this[n]=setTimeout(createjs[a][u](this[x],this),createjs[a].TIMEOUT_TIME),this[o]&&(l[i]=t,l.preload="auto",l.setAttribute("data-temp","true")),l.onerror=createjs[a][u](this[g],this),l[T]=createjs[a][u](this[p],this),this[o]?(l.onstalled=createjs[a][u](this[N],this),l.addEventListener(C,this[r],!1)):l[w]=createjs[a][u](this[f],this),l[this[e]]=s[i],s.type==createjs[a].SVG&&document[k](L)[0].appendChild(l),s=s.type==createjs[a].SOUND&&s.ext=="ogg"&&createjs[a].BrowserDetect.isFirefox,l.load!=t&&!s&&l.load()},_[x]=function(){this[l](),this[S]()},_[N]=function(){},_[g]=function(){this[l](),this[S]()},_[f]=function(){if(!this[y]()){var e=this[c]().tag;clearTimeout(this[n]),this.loaded||this[o]&&e.readyState!==4||(this[c]().type==createjs[a].SVG&&document[k](L)[0].removeChild(e),this.loaded=s,this[l](),this[E]())}},_[l]=function(){clearTimeout(this[n]);var e=this[c]().tag;e[w]=t,e[A]&&e[A](C,this[r],!1),e.onstalled=t,e[T]=t,e.onerror=t},_[p]=function(e){clearTimeout(this[n]);if(this[o]){e=this[c]();if(e[O]==t)return;e={loaded:e[O].length>0?e[O].end(0):0,total:e.duration}}this._sendProgress(e)},_.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=M}(),this.createjs=this.createjs||{},function(){var e=!1,t="_request",n=null,r="_loadTimeOutTimeout",i="_xhrLevel",s="_createXHR",o="responseText",u=!0,a="_clean",f="handleError",l="proxy",c="PreloadJS",h="handleTimeout",p="onloadstart",d="handleLoadStart",v="onprogress",m="handleProgress",g="handleAbort",y="handleLoad",b="onreadystatechange",w="handleReadyStateChange",E="_sendError",S="loaded",x="_checkError",T="_hasResponse",N="_hasTextResponse",C="_hasXMLResponse",k="overrideMimeType",L=function(e){this.init(e)},A=L.prototype=new createjs.AbstractLoader;A._wasLoaded=e,A[t]=n,A[r]=n,A[i]=n,A.init=function(e){this._item=e,this[s](e)},A.getResult=function(){try{return this[t][o]}catch(e){}return this[t].response},A.cancel=function(){this.canceled=u,this[a](),this[t].abort()},A.load=function(){if(this[t]==n)this[f]();else{this[i]==1&&(this[r]=setTimeout(createjs[c][l](this[h],this),createjs[c].TIMEOUT_TIME)),this[t][p]=createjs[c][l](this[d],this),this[t][v]=createjs[c][l](this[m],this),this[t].onabort=createjs[c][l](this[g],this),this[t].onerror=createjs[c][l](this[f],this),this[t].ontimeout=createjs[c][l](this[h],this),this[t].onload=createjs[c][l](this[y],this),this[t][b]=createjs[c][l](this[w],this);try{this[t].send()}catch(e){this[E]({source:e})}}},A[m]=function(e){e[S]>0&&e.total==0||this._sendProgress({loaded:e[S],total:e.total})},A[d]=function(){clearTimeout(this[r]),this._sendLoadStart()},A[g]=function(){this[a](),this[E]()},A[f]=function(){this[a](),this[E]()},A[w]=function(){this[t].readyState==4&&this[y]()},A[x]=function(){switch(parseInt(this[t].status)){case 404:case 0:return e}return this[T]()||this[N]()||this[C]()},A[T]=function(){return this[t].response!=n},A[N]=function(){try{return this[t][o]!=n}catch(r){return e}},A[C]=function(){try{return this[t].responseXML!=n}catch(r){return e}},A[y]=function(){this[S]||(this[S]=u,this[x]()?(this[a](),this._sendComplete()):this[f]())},A[h]=function(){this[a](),this[E]()},A[s]=function(e){this[i]=1,window.ArrayBuffer&&(this[i]=2);if(window.XMLHttpRequest)this[t]=new XMLHttpRequest;else try{this[t]=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(r){return n}return e.type==createjs[c].TEXT&&this[t][k]&&this[t][k]("text/plain; charset=x-user-defined"),this[t].open("GET",e.src,u),createjs[c].isBinary(e.type)&&(this[t].responseType="arraybuffer"),u},A[a]=function(){clearTimeout(this[r]);var e=this[t];e[p]=n,e[v]=n,e.onabort=n,e.onerror=n,e.onload=n,e.ontimeout=n,e.onloadend=n,e[b]=n,clearInterval(this._checkLoadInterval)},A.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=L}();var Stats=function(){var e="createElement",t="div",n="cssText",r="style",i="appendChild",s="span",o="display",u="block",a="none",f="textContent",l="firstChild",c=Date.now(),h=c,p=0,d=1e3,v=0,m=0,g=1e3,y=0,b=0,w=0,E=document[e](t);E.id="stats",E.addEventListener("mousedown",function(e){e.preventDefault(),A(++w%2)},!1),E[r][n]="width:80px;opacity:0.9;cursor:pointer;z-index:99;";var S=document[e](t);S.id="fps",S[r][n]="padding:0 0 3px 3px;text-align:left;background-color:#002",E[i](S);var x=document[e](t);x.id="fpsText",x[r][n]="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",x.innerHTML="FPS",S[i](x);var T=document[e](t);T.id="fpsGraph",T[r][n]="position:relative;width:74px;height:30px;background-color:#0ff";for(S[i](T);74>T.children.length;){var N=document[e](s);N[r][n]="width:1px;height:30px;float:left;background-color:#113",T[i](N)}var C=document[e](t);C.id="ms",C[r][n]="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",E[i](C);var k=document[e](t);k.id="msText",k[r][n]="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",k.innerHTML="MS",C[i](k);var L=document[e](t);L.id="msGraph",L[r][n]="position:relative;width:74px;height:30px;background-color:#0f0";for(C[i](L);74>L.children.length;)N=document[e](s),N[r][n]="width:1px;height:30px;float:left;background-color:#131",L[i](N);var A=function(e){w=e;switch(w){case 0:S[r][o]=u,C[r][o]=a;break;case 1:S[r][o]=a,C[r][o]=u}};return{domElement:E,setMode:A,begin:function(){c=Date.now()},end:function(){var e=Date.now();p=e-c,d=Math.min(d,p),v=Math.max(v,p),k[f]=p+" MS ("+d+"-"+v+")";var t=Math.min(30,30-30*(p/200));return L[i](L[l])[r].height=t+"px",b++,e>h+1e3&&(m=Math.round(1e3*b/(e-h)),g=Math.min(g,m),y=Math.max(y,m),x[f]=m+" FPS ("+g+"-"+y+")",t=Math.min(30,30-30*(m/100)),T[i](T[l])[r].height=t+"px",h=e,b=0),e},update:function(){c=this.end()}}};(function(){function x(m){this.data=m.path||m.data,this[e]=[],this[t]=m[t]||1,this[n]=m[n]||0,this.fps=m.fps||25,this[r]=~~m[r]||1,this[i]=m[i]||1,this[s]=m[s]||.05,this[o]=m[o]||u,this[a]=m[a]||f,this[l]=m[l]||f,this[c]=typeof m.step=="string"?k[m.step]:m.step||k.square,this._setup=m.setup||S,this._teardown=m.teardown||S,this._preStep=m.preStep||S,this[h]=m[h],this[p]=m[p],this[d]=this[h]+2*this[n],this[v]=this[p]+2*this[n],this[o]=m[o]||u,this.setup()}var e="imageData",t="multiplier",n="padding",r="stepsPerFrame",i="trailLength",s="pointDistance",o="domClass",u="sonic",a="fillColor",f="#FFF",l="strokeColor",c="stepMethod",h="width",p="height",d="fullWidth",v="fullHeight",m="_last",g="canvas",y="points",b="length",w="frame",E="stopped",S=function(){},T=x.argTypes={DIM:1,DEGREE:2,RADIUS:3,OTHER:0},N=x.argSignatures={arc:[1,1,3,2,2,0],bezier:[1,1,1,1,1,1,1,1],line:[1,1,1,1]},C=x.pathMethods={bezier:function(e,t,n,r,i,s,o,u,a){e=1-e;var f=1-e,l=e*e,c=f*f,h=l*e,p=3*l*f,d=3*e*c,v=c*f;return[h*t+p*s+d*u+v*r,h*n+p*o+d*a+v*i]},arc:function(e,t,n,r,i,s){var o=(s-i)*e+i,u=[Math.cos(o)*r+t,Math.sin(o)*r+n];return u.angle=o,u.t=e,u},line:function(e,t,n,r,i){return[(r-t)*e+t,(i-n)*e+n]}},k=x.stepMethods={square:function(e,t,n,r,i){this._.fillRect(e.x-3,e.y-3,6,6)},fader:function(e,t,n,r,i){this._.beginPath(),this[m]&&this._.moveTo(this[m].x,this[m].y),this._.lineTo(e.x,e.y),this._.closePath(),this._.stroke(),this[m]=e}};x.prototype={setup:function(){var e,r,i,u,a=this.data;this[g]=document.createElement(g),this._=this[g].getContext("2d"),this[g].className=this[o],this[g][p]=this[v],this[g][h]=this[d],this[y]=[];for(var f=-1,l=a[b];++f<l;){e=a[f].slice(1),i=a[f][0];if(i in N)for(var c=-1,m=e[b];++c<m;){r=N[i][c],u=e[c];switch(r){case T.RADIUS:u*=this[t];break;case T.DIM:u*=this[t],u+=this[n];break;case T.DEGREE:u*=Math.PI/180}e[c]=u}e.unshift(0);for(var E,S=this[s],x=S;x<=1;x+=S)x=Math.round(x*1/S)/(1/S),e[0]=x,E=C[i].apply(null,e),this[y].push({x:E[0],y:E[1],progress:x})}this[w]=0},prep:function(t){if(t in this[e])return;this._.clearRect(0,0,this[d],this[v]);var n=this[y],r=n[b],o=this[s],u,f,h,p;this._setup();for(var m=-1,g=r*this[i];++m<g&&!this[E];){f=t+m,u=n[f]||n[f-r];if(!u)continue;this.alpha=Math.round(1e3*(m/(g-1)))/1e3,this._.globalAlpha=this.alpha,this._.fillStyle=this[a],this._.strokeStyle=this[l],p=t/(this[y][b]-1),h=m/(g-1),this._preStep(u,h,p),this[c](u,h,p)}return this._teardown(),this[e][t]=this._.getImageData(0,0,this[d],this[d]),!0},draw:function(){this.prep(this[w])||(this._.clearRect(0,0,this[d],this
[d]),this._.putImageData(this[e][this[w]],0,0)),this.iterateFrame()},iterateFrame:function(){this[w]+=this[r],this[w]>=this[y][b]&&(this[w]=0)},play:function(){this[E]=!1;var e=this;this.timer=setInterval(function(){e.draw()},1e3/this.fps)},stop:function(){this[E]=!0,this.timer&&clearInterval(this.timer)}},window.Sonic=x})(),this.createjs=this.createjs||{},function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){var e=null,t="_listeners",n="_pauseable",r="_paused",i=!1,s="_inited",o="_startTime",u="_pausedTime",a="_ticks",f="_pausedTicks",l="_interval",c="_lastTime",h="_times",p="_tickTimes",d="_rafActive",v="removeListener",m="length",g=!0,y="_getTime",b="setInterval",w="_setupTick",E="_handleTimeout",S="timeoutID",x=function(){throw"Ticker cannot be instantiated."};x.useRAF=e,x[t]=e,x[n]=e,x[r]=i,x[s]=i,x[o]=0,x[u]=0,x[a]=0,x[f]=0,x[l]=50,x[c]=0,x[h]=e,x[p]=e,x[d]=i,x._timeoutID=e,x.addListener=function(r,i){r!=e&&(x[s]||x.init(),x[v](r),x[n][x[t][m]]=i==e?g:i,x[t].push(r))},x.init=function(){x[s]=g,x[h]=[],x[p]=[],x[n]=[],x[t]=[],x[h].push(x[c]=x[o]=x[y]()),x[b](x[l])},x[v]=function(e){var r=x[t];r&&(e=r.indexOf(e),e!=-1&&(r.splice(e,1),x[n].splice(e,1)))},x.removeAllListeners=function(){x[t]=[],x[n]=[]},x[b]=function(e){x[l]=e,x[s]&&x[w]()},x.getInterval=function(){return x[l]},x.setFPS=function(e){x[b](1e3/e)},x.getFPS=function(){return 1e3/x[l]},x.getMeasuredFPS=function(t){return x[h][m]<2?-1:(t==e&&(t=x.getFPS()|0),t=Math.min(x[h][m]-1,t),1e3/((x[h][0]-x[h][t])/t))},x.setPaused=function(e){x[r]=e},x.getPaused=function(){return x[r]},x.getTime=function(e){return x[y]()-x[o]-(e?x[u]:0)},x.getTicks=function(e){return x[a]-(e?x[f]:0)},x._handleAF=function(){x[d]=i,x[w](),x[y]()-x[c]>=(x[l]-1)*.97&&x._tick()},x[E]=function(){x[S]=e,x[w](),x._tick()},x[w]=function(){if(!x[d]&&x[S]==e){if(x.useRAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t){t(x._handleAF),x[d]=g;return}}x[S]=setTimeout(x[E],x[l])}},x._tick=function(){var i=x[y]();x[a]++;var s=i-x[c],o=x[r];o&&(x[f]++,x[u]+=s),x[c]=i;for(var l=x[n],d=x[t].slice(),v=d?d[m]:0,g=0;g<v;g++){var b=d[g];b==e||o&&l[g]||(b.tick?b.tick(s,o):b instanceof Function&&b(s,o))}for(x[p].unshift(x[y]()-i);x[p][m]>100;)x[p].pop();for(x[h].unshift(i);x[h][m]>100;)x[h].pop()};var T=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);x[y]=function(){return T&&T.call(performance)||(new Date).getTime()},createjs.Ticker=x}(),this.createjs=this.createjs||{},function(){var e="initialize",t="stageX",n="stageY",r=null,i="nativeEvent",s="target",o="pointerID",u="primary",a=function(t,n,r,i,s,o,u,a,f){this[e](t,n,r,i,s,o,u,a,f)},f=a.prototype;f[t]=0,f[n]=0,f.rawX=0,f.rawY=0,f.type=r,f[i]=r,f.onMouseMove=r,f.onMouseUp=r,f[s]=r,f[o]=0,f[u]=!1,f[e]=function(e,a,f,l,c,p,d,v,m){this.type=e,this[t]=a,this[n]=f,this[s]=l,this[i]=c,this[o]=p,this[u]=d,this.rawX=v==r?a:v,this.rawY=m==r?f:m},f.clone=function(){return new a(this.type,this[t],this[n],this[s],this[i],this[o],this[u],this.rawX,this.rawY)},f.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this[t]+" stageY="+this[n]+")]"},createjs.MouseEvent=a}(),this.createjs=this.createjs||{},function(){var e="initialize",t="identity",n=null,r="DEG_TO_RAD",i="alpha",s="shadow",o="compositeOperation",u="prepend",a="append",f="prependProperties",l="appendProperties",c="cos",h="sin",p="rotation",d=function(t,n,r,i,s,o){this[e](t,n,r,i,s,o)},v=d.prototype;d[t]=n,d[r]=Math.PI/180,v.a=1,v.b=0,v.c=0,v.d=1,v.tx=0,v.ty=0,v[i]=1,v[s]=n,v[o]=n,v[e]=function(e,t,r,i,s,o){return e!=n&&(this.a=e),this.b=t||0,this.c=r||0,i!=n&&(this.d=i),this.tx=s||0,this.ty=o||0,this},v[u]=function(e,t,n,r,i,s){var o=this.tx;if(e!=1||t!=0||n!=0||r!=1){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},v[a]=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},v.prependMatrix=function(e){return this[u](e.a,e.b,e.c,e.d,e.tx,e.ty),this[f](e[i],e[s],e[o]),this},v.appendMatrix=function(e){return this[a](e.a,e.b,e.c,e.d,e.tx,e.ty),this[l](e[i],e[s],e[o]),this},v.prependTransform=function(e,t,n,i,s,o,a,f,l){if(s%360)var p=s*d[r],s=Math[c](p),p=Math[h](p);else s=1,p=0;if(f||l)this.tx-=f,this.ty-=l;return o||a?(o*=d[r],a*=d[r],this[u](s*n,p*n,-p*i,s*i,0,0),this[u](Math[c](a),Math[h](a),-Math[h](o),Math[c](o),e,t)):this[u](s*n,p*n,-p*i,s*i,e,t),this},v.appendTransform=function(e,t,n,i,s,o,u,f,l){if(s%360)var p=s*d[r],s=Math[c](p),p=Math[h](p);else s=1,p=0;o||u?(o*=d[r],u*=d[r],this[a](Math[c](u),Math[h](u),-Math[h](o),Math[c](o),e,t),this[a](s*n,p*n,-p*i,s*i,0,0)):this[a](s*n,p*n,-p*i,s*i,e,t);if(f||l)this.tx-=f*this.a+l*this.c,this.ty-=f*this.b+l*this.d;return this},v.rotate=function(e){var t=Math[c](e),e=Math[h](e),n=this.a,r=this.c,i=this.tx;return this.a=n*t-this.b*e,this.b=n*e+this.b*t,this.c=r*t-this.d*e,this.d=r*e+this.d*t,this.tx=i*t-this.ty*e,this.ty=i*e+this.ty*t,this},v.skew=function(e,t){return e*=d[r],t*=d[r],this[a](Math[c](t),Math[h](t),-Math[h](e),Math[c](e),0,0),this},v.scale=function(e,t){return this.a*=e,this.d*=t,this.tx*=e,this.ty*=t,this},v.translate=function(e,t){return this.tx+=e,this.ty+=t,this},v[t]=function(){return this[i]=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this[s]=this[o]=n,this},v.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},v.isIdentity=function(){return this.tx==0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1},v.decompose=function(e){e==n&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var t=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a);return t==i?(e[p]=i/d[r],this.a<0&&this.d>=0&&(e[p]+=e[p]<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=t/d[r],e.skewY=i/d[r]),e},v.reinitialize=function(t,n,r,u,a,f,l,c,h){return this[e](t,n,r,u,a,f),this[i]=l||1,this[s]=c,this[o]=h,this},v[l]=function(e,t,n){return this[i]*=e,this[s]=t||this[s],this[o]=n||this[o],this},v[f]=function(e,t,n){return this[i]*=e,this[s]=this[s]||t,this[o]=this[o]||n,this},v.clone=function(){var e=new d(this.a,this.b,this.c,this.d,this.tx,this.ty);return e[s]=this[s],e[i]=this[i],e[o]=this[o],e},v.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},d[t]=new d(1,0,0,1,0,0),createjs.Matrix2D=d}(),this.createjs=this.createjs||{},function(){var e="initialize",t=function(t,n){this[e](t,n)},n=t.prototype;n.x=0,n.y=0,n[e]=function(e,t){this.x=e==null?0:e,this.y=t==null?0:t},n.clone=function(){return new t(this.x,this.y)},n.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){var e="initialize",t="width",n="height",r=null,i=function(t,n,r,i){this[e](t,n,r,i)},s=i.prototype;s.x=0,s.y=0,s[t]=0,s[n]=0,s[e]=function(e,i,s,o){this.x=e==r?0:e,this.y=i==r?0:i,this[t]=s==r?0:s,this[n]=o==r?0:o},s.clone=function(){return new i(this.x,this.y,this[t],this[n])},s.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this[t]+" height="+this[n]+")]"},createjs.Rectangle=i}(),this.createjs=this.createjs||{},function(){var e="initialize",t="offsetX",n="offsetY",r=function(t,n,r,i){this[e](t,n,r,i)},i=r.prototype;r.identity=null,i.color=null,i[t]=0,i[n]=0,i.blur=0,i[e]=function(e,r,i,s){this.color=e,this[t]=r,this[n]=i,this.blur=s},i.toString=function(){return"[Shadow]"},i.clone=function(){return new r(this.color,this[t],this[n],this.blur)},r.identity=new r("transparent",0,0,0),createjs.Shadow=r}(),this.createjs=this.createjs||{},function(){var e="initialize",t="complete",n=!0,r="onComplete",i=null,s="_animations",o="_frames",u="_images",a="_data",f="_loadCount",l="_frameHeight",c="_frameWidth",h="_numFrames",p="images",d="length",v="push",m="_handleImageLoad",g="frames",y="_calculateFrames",b="frequency",w="next",E=function(t){this[e](t)},S=E.prototype;S[t]=n,S[r]=i,S[s]=i,S[o]=i,S[u]=i,S[a]=i,S[f]=0,S[l]=0,S[c]=0,S[h]=0,S._regX=0,S._regY=0,S[e]=function(e){var r,E,S;if(e!=i){if(e[p]&&(E=e[p][d])>0){S=this[u]=[];for(r=0;r<E;r++){var A=e[p][r];if(typeof A=="string"){var O=A,A=new Image;A.src=O}S[v](A),!A.getContext&&!A[t]&&(this[f]++,this[t]=!1,function(e){A.onload=function(){e[m]()}}(this))}}if(e[g]!=i)if(e[g]instanceof Array){this[o]=[],S=e[g];for(r=0,E=S[d];r<E;r++)O=S[r],this[o][v]({image:this[u][O[4]?O[4]:0],rect:new createjs.Rectangle(O[0],O[1],O[2],O[3]),regX:O[5]||0,regY:O[6]||0})}else E=e[g],this[c]=E.width,this[l]=E.height,this._regX=E.regX||0,this._regY=E.regY||0,this[h]=E.count,this[f]==0&&this[y]();if((E=e.animations)!=i){this[s]=[],this[a]={};for(var M in E){e={name:M},O=E[M];if(isNaN(O))if(O instanceof Array){e[b]=O[3],e[w]=O[2],S=e[g]=[];for(r=O[0];r<=O[1];r++)S[v](r)}else e[b]=O[b],e[w]=O[w],r=O[g],S=e[g]=isNaN(r)?r.slice(0):[r];else S=e[g]=[O];e[w]=S[d]<2||e[w]==0?i:e[w]==i||e[w]==n?M:e[w],e[b]||(e[b]=1),this[s][v](M),this[a][M]=e}}}},S.getNumFrames=function(e){return e==i?this[o]?this[o][d]:this[h]:(e=this[a][e],e==i?0:e[g][d])},S.getAnimations=function(){return this[s].slice(0)},S.getAnimation=function(e){return this[a][e]},S.getFrame=function(e){return this[t]&&this[o]&&(frame=this[o][e])?frame:i},S.toString=function(){return"[SpriteSheet]"},S.clone=function(){var e=new E;return e[t]=this[t],e[s]=this[s],e[o]=this[o],e[u]=this[u],e[a]=this[a],e[l]=this[l],e[c]=this[c],e[h]=this[h],e[f]=this[f],e},S[m]=function(){--this[f]==0&&(this[y](),this[t]=n,this[r]&&this[r]())},S[y]=function(){if(!this[o]&&this[c]!=0){this[o]=[];for(var e=0,t=this[c],n=this[l],r=0,i=this[u];r<i[d];r++){for(var s=i[r],a=(s.width+1)/t|0,f=(s.height+1)/n|0,f=this[h]>0?Math.min(this[h]-e,a*f):a*f,p=0;p<f;p++)this[o][v]({image:s,rect:new createjs.Rectangle(p%a*t,(p/a|0)*n,t,n),regX:this._regX,regY:this._regY});e+=f}this[h]=e}},createjs.SpriteSheet=E}(),this.createjs=this.createjs||{},function(){function X(e,t,n){this.f=e,this.params=t,this.path=n==h?b:n}var e="_activeInstructions",t="_instructions",n="_strokeInstructions",r="_fillInstructions",i="_strokeStyleInstructions",s="bezierCurveTo",o="_active",u=!1,a="_ctx",f="_setProp",l="_oldInstructions",c="_dirty",h=null,p="quadraticCurveTo",d="_newPath",v="_updateInstructions",m="push",g="strokeStyle",y="fillStyle",b=!0,w="drawRoundRectComplex",E="length",S="moveTo",x="addColorStop",T="lineTo",N="beginLinearGradientFill",C="closePath",k="beginLinearGradientStroke",L="beginRadialGradientStroke",A="beginRadialGradientFill",O="drawAsPath",M="STROKE_JOINTS_MAP",_="apply",D="createLinearGradient",P="createRadialGradient",H=",",B="beginFill",j="beginStroke",F="STROKE_CAPS_MAP",I="beginBitmapStroke",q="slice",R="beginBitmapFill",U="setStrokeStyle",z="drawRoundRect",W="createPattern";X.prototype.exec=function(e){this.f[_](e,this.params)};var V=function(){this.initialize()},$=V.prototype;V.getRGB=function(e,t,n,r){return e!=h&&n==h&&(r=t,n=e&255,t=e>>8&255,e=e>>16&255),r==h?"rgb("+e+H+t+H+n+")":"rgba("+e+H+t+H+n+H+r+")"},V.getHSL=function(e,t,n,r){return r==h?"hsl("+e%360+H+t+"%,"+n+"%)":"hsla("+e%360+H+t+"%,"+n+"%,"+r+")"},V.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},V[F]=["butt","round","square"],V[M]=["miter","round","bevel"],V[a]=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),V.beginCmd=new X(V[a].beginPath,[],u),V.fillCmd=new X(V[a].fill,[],u),V.strokeCmd=new X(V[a].stroke,[],u),$[n]=h,$[i]=h,$[r]=h,$[t]=h,$[l]=h,$[e]=h,$[o]=u,$[c]=u,$.initialize=function(){this.clear(),this[a]=V[a]},$.draw=function(e){this[c]&&this[v]();for(var n=this[t],r=0,i=n[E];r<i;r++)n[r].exec(e)},$[O]=function(e){this[c]&&this[v]();for(var n,r=this[t],i=0,s=r[E];i<s;i++)((n=r[i]).path||i==0)&&n.exec(e)},$[S]=function(t,n){return this[e][m](new X(this[a][S],[t,n])),this},$[T]=function(t,n){return this[c]=this[o]=b,this[e][m](new X(this[a][T],[t,n])),this},$.arcTo=function(t,n,r,i,s){return this[c]=this[o]=b,this[e][m](new X(this[a].arcTo,[t,n,r,i,s])),this},$.arc=function(t,n,r,i,s,f){return this[c]=this[o]=b,f==h&&(f=u),this[e][m](new X(this[a].arc,[t,n,r,i,s,f])),this},$[p]=function(t,n,r,i){return this[c]=this[o]=b,this[e][m](new X(this[a][p],[t,n,r,i])),this},$[s]=function(t,n,r,i,u,f){return this[c]=this[o]=b,this[e][m](new X(this[a][s],[t,n,r,i,u,f])),this},$.rect=function(t,n,r,i){return this[c]=this[o]=b,this[e][m](new X(this[a].rect,[t,n,r,i])),this},$[C]=function(){return this[o]&&(this[c]=b,this[e][m](new X(this[a][C],[]))),this},$.clear=function(){return this[t]=[],this[l]=[],this[e]=[],this[i]=this[n]=this[r]=h,this[o]=this[c]=u,this},$[B]=function(e){return this[o]&&this[d](),this[r]=e?[new X(this[f],[y,e],u)]:h,this},$[N]=function(e,t,n,i,s,l){this[o]&&this[d](),n=this[a][D](n,i,s,l),i=0;for(s=e[E];i<s;i++)n[x](t[i],e[i]);return this[r]=[new X(this[f],[y,n],u)],this},$[A]=function(e,t,n,i,s,l,c,h){this[o]&&this[d](),n=this[a][P](n,i,s,l,c,h),i=0;for(s=e[E];i<s;i++)n[x](t[i],e[i]);return this[r]=[new X(this[f],[y,n],u)],this},$[R]=function(e,t){this[o]&&this[d]();var n=this[a][W](e,t||"");return this[r]=[new X(this[f],[y,n],u)],this},$.endFill=function(){return this[B]()},$[U]=function(e,t,n,r){return this[o]&&this[d](),this[i]=[new X(this[f],["lineWidth",e==h?"1":e],u),new X(this[f],["lineCap",t==h?"butt":isNaN(t)?t:V[F][t]],u),new X(this[f],["lineJoin",n==h?"miter":isNaN(n)?n:V[M][n]],u),new X(this[f],["miterLimit",r==h?"10":r],u)],this},$[j]=function(e){return this[o]&&this[d](),this[n]=e?[new X(this[f],[g,e],u)]:h,this},$[k]=function(e,t,r,i,s,l){this[o]&&this[d](),r=this[a][D](r,i,s,l),i=0;for(s=e[E];i<s;i++)r[x](t[i],e[i]);return this[n]=[new X(this[f],[g,r],u)],this},$[L]=function(e,t,r,i,s,l,c,h){this[o]&&this[d](),r=this[a][P](r,i,s,l,c,h),i=0;for(s=e[E];i<s;i++)r[x](t[i],e[i]);return this[n]=[new X(this[f],[g,r],u)],this},$[I]=function(e,t){this[o]&&this[d]();var r=this[a][W](e,t||"");return this[n]=[new X(this[f],[g,r],u)],this},$.endStroke=function(){return this[j](),this},$.curveTo=$[p],$.drawRect=$.rect,$[z]=function(e,t,n,r,i){return this[w](e,t,n,r,i,i,i,i),this},$[w]=function(t,n,r,i,s,u,f,l){var h=(r<i?r:i)/2,p=0,d=0,v=0,g=0;s<0&&(s*=p=-1),s>h&&(s=h),u<0&&(u*=d=-1),u>h&&(u=h),f<0&&(f*=v=-1),f>h&&(f=h),l<0&&(l*=g=-1),l>h&&(l=h),this[c]=this[o]=b;var h=this[a].arcTo,y=this[a][T];return this[e][m](new X(this[a][S],[t+r-u,n]),new X(h,[t+r+u*d,n-u*d,t+r,n+u,u]),new X(y,[t+r,n+i-f]),new X(h,[t+r+f*v,n+i+f*v,t+r-f,n+i,f]),new X(y,[t+l,n+i]),new X(h,[t-l*g,n+i+l*g,t,n+i-l,l]),new X(y,[t,n+s]),new X(h,[t-s*p,n-s*p,t+s,n,s]),new X(this[a][C])),this},$.drawCircle=function(e,t,n){return this.arc(e,t,n,0,Math.PI*2),this},$.drawEllipse=function(t,n,r,i){this[c]=this[o]=b;var u=r/2*.5522848,f=i/2*.5522848,l=t+r,h=n+i,r=t+r/2,i=n+i/2;return this[e][m](new X(this[a][S],[t,i]),new X(this[a][s],[t,i-f,r-u,n,r,n]),new X(this[a][s],[r+u,n,l,i-f,l,i]),new X(this[a][s],[l,i+f,r+u,h,r,h]),new X(this[a][s],[r-u,h,t,i+f,t,i])),this},$.drawPolyStar=function(t,n,r,i,s,u){this[c]=this[o]=b,s==h&&(s=0),s=1-s,u==h?u=0:u/=180/Math.PI;var f=Math.PI/i;this[e][m](new X(this[a][S],[t+Math.cos(u)*r,n+Math.sin(u)*r]));for(var l=0;l<i;l++)u+=f,s!=1&&this[e][m](new X(this[a][T],[t+Math.cos(u)*r*s,n+Math.sin(u)*r*s])),u+=f,this[e][m](new X(this[a][T],[t+Math.cos(u)*r,n+Math.sin(u)*r]));return this},$.decodePath=function(e){for(var t=[this[S],this[T],this[p],this[s]],n=[2,2,4,6],r=0,i=e[E],o=[],u=0,a=0,f=V.BASE_64;r<i;){var l=e.charAt(r),c=f[l],h=c>>3,d=t[h];if(!d||c&3)throw"bad path data (@"+r+"): "+l;l=n[h],h||(u=a=0),o[E]=0,r++,c=(c>>2&1)+2;for(h=0;h<l;h++){var v=f[e.charAt(r)],m=v>>5?-1:1,v=(v&31)<<6|f[e.charAt(r+1)];c==3&&(v=v<<6|f[e.charAt(r+2)]),v=m*v/10,h%2?u=v+=u:a=v+=a,o[h]=v,r+=c}d[_](this,o)}return this},$.clone=function(){var s=new V;return s[t]=this[t][q](),s[e]=this[e][q](),s[l]=this[l][q](),this[r]&&(s[r]=this[r][q]()),this[n]&&(s[n]=this[n][q]()),this[i]&&(s[i]=this[i][q]()),s[o]=this[o],s[c]=this[c],s[O]=this[O],s},$.toString=function(){return"[Graphics]"},$.mt=$[S],$.lt=$[T],$.at=$.arcTo,$.bt=$[s],$.qt=$[p],$.a=$.arc,$.r=$.rect,$.cp=$[C],$.c=$.clear,$.f=$[B],$.lf=$[N],$.rf=$[A],$.bf=$[R],$.ef=$.endFill,$.ss=$[U],$.s=$[j],$.ls=$[k],$.rs=$[L],$.bs=$[I],$.es=$.endStroke,$.dr=$.drawRect,$.rr=$[z],$.rc=$[w],$.dc=$.drawCircle,$.de=$.drawEllipse,$.dp=$.drawPolyStar,$.p=$.decodePath,$[v]=function(){this[t]=this[l][q](),this[t][m](V.beginCmd),this[r]&&this[t][m][_](this[t],this[r]),this[n]&&(this[t][m][_](this[t],this[n]),this[i]&&this[t][m][_](this[t],this[i])),this[t][m][_](this[t],this[e]),this[r]&&this[t][m](V.fillCmd),this[n]&&this[t][m](V.strokeCmd)},$._getEllipseArc=function(t,n,r,i){var o=r/2*.5522848,u=i/2*.5522848,f=t+r,l=n+i,r=t+r/2,i=n+i/2;return this[e][m](new X(this[a][S],[t,i]),new X(this[a][s],[t,i-u,r-o,n,r,n]),new X(this[a][s],[r+o,n,f,i-u,f,i]),new X(this[a][s],[f,i+u,r+o,l,r,l]),new X(this[a][s],[r-o,l,t,i+u,t,i])),this},$[d]=function(){this[c]&&this[v](),this[l]=this[t],this[e]=[],this[o]=this[c]=u},$[f]=function(e,t){this[e]=t},createjs.Graphics=V}(),this.createjs=this.createjs||{},function(){var e="cacheCanvas",t="compositeOperation",n=null,r="_hitTestCanvas",i="_cacheOffsetX",s="_cacheOffsetY",o="_cacheScale",u="rotation",a="getConcatenatedMatrix",f="_cacheDataURL",l="getContext",c="createCanvas",h="scaleY",p="scaleX",d="_matrix",v="shadow",m="suppressCrossDomainErrors",g="globalCompositeOperation",y="width",b="transform",w="filters",E="mouseEnabled",S="height",x="alpha",T="skewX",N="skewY",C="identity",k="setTransform",L="cacheID",A=!0,O="visible",M="2d",_="_hitTestContext",D="appendTransform",P="_cacheDataURLID",H="Matrix2D",B="regY",j="parent",F="onTick",I="regX",q=!1,R="createElement",U="canvas",z="_nextCacheID",W="_applyFilters",X="localToGlobal",V="globalToLocal",$=function(){this.initialize()},J=$.prototype;$[m]=q,$[r]=createjs[c]?createjs[c]():document[R](U),$[r][y]=$[r][S]=1,$[_]=$[r][l](M),$[z]=1,J[x]=1,J[e]=n,J.id=-1,J[E]=A,J.name=n,J[j]=n,J[I]=0,J[B]=0,J[u]=0,J[p]=1,J[h]=1,J[T]=0,J[N]=0,J[v]=n,J[O]=A,J.x=0,J.y=0,J[t]=n,J.snapToPixel=q,J.onPress=n,J.onClick=n,J.onDoubleClick=n,J.onMouseOver=n,J.onMouseOut=n,J[F]=n,J[w]=n,J[L]=0,J.mask=n,J.hitArea=n,J[i]=0,J[s]=0,J[o]=1,J[P]=0,J[f]=n,J[d]=n,J.initialize=function(){this.id=createjs.UID.get(),this[d]=new createjs[H]},J.isVisible=function(){return this[O]&&this[x]>0&&this[p]!=0&&this[h]!=0},J.draw=function(t,n){var r=this[e];if(n||!r)return q;var u=this[o];return t.drawImage(r,this[i],this[s],r[y]/u,r[S]/u),A},J.updateContext=function(e){var n,r=this.mask;r&&r.graphics&&(n=r.getMatrix(r[d]),e[b](n.a,n.b,n.c,n.d,n.tx,n.ty),r.graphics.drawAsPath(e),e.clip(),n.invert(),e[b](n.a,n.b,n.c,n.d,n.tx,n.ty)),n=this[d][C]()[D](this.x,this.y,this[p],this[h],this[u],this[T],this[N],this[I],this[B]),createjs.Stage._snapToPixelEnabled&&this.snapToPixel?e[b](n.a,n.b,n.c,n.d,n.tx+.5|0,n.ty+.5|0):e[b](n.a,n.b,n.c,n.d,n.tx,n.ty),e.globalAlpha*=this[x],this[t]&&(e[g]=this[t]),this[v]&&this._applyShadow(e,this[v])},J.cache=function(t,n,r,u,a){a=a||1,this[e]||(this[e]=createjs[c]?createjs[c]():document[R](U)),this[e][y]=Math.ceil(r*a),this[e][S]=Math.ceil(u*a),this[i]=t,this[s]=n,this[o]=a||1,this.updateCache()},J.updateCache=function(t){var n=this[e],r=this[i],u=this[s],a=this[o];if(!n)throw"cache() must be called before updateCache()";var f=n[l](M);f.save(),t||f.clearRect(0,0,n[y],n[S]),f[g]=t,f[k](a,0,0,a,-r,-u),this.draw(f,A),this[W](),f.restore(),this[L]=$[z]++},J.uncache=function(){this[f]=this[e]=n,this[L]=this[i]=this[s]=0,this[o]=1},J.getCacheDataURL=function(){return this[e]?(this[L]!=this[P]&&(this[f]=this[e].toDataURL()),this[f]):n},J.getStage=function(){for(var e=this;e[j];)e=e[j];return e instanceof createjs.Stage?e:n},J[X]=function(e,t){var r=this[a](this[d]);return r==n?n:(r.append(1,0,0,1,e,t),new createjs.Point(r.tx,r.ty))},J[V]=function(e,t){var r=this[a](this[d]);return r==n?n:(r.invert(),r.append(1,0,0,1,e,t),new createjs.Point(r.tx,r.ty))},J.localToLocal=function(e,t,n){return e=this[X](e,t),n[V](e.x,e.y)},J[k]=function(e,t,r,i,s,o,a,f,l){return this.x=e||0,this.y=t||0,this[p]=r==n?1:r,this[h]=i==n?1:i,this[u]=s||0,this[T]=o||0,this[N]=a||0,this[I]=f||0,this[B]=l||0,this},J.getMatrix=function(e){return(e?e[C]():new createjs[H])[D](this.x,this.y,this[p],this[h],this[u],this[T],this[N],this[I],this[B]).appendProperties(this[x],this[v],this[t])},J[a]=function(e){e?e[C]():e=new createjs[H];for(var r=this;r!=n;)e.prependTransform(r.x,r.y,r[p],r[h],r[u],r[T],r[N],r[I],r[B]).prependProperties(r[x],r[v],r[t]),r=r[j];return e},J.hitTest=function(e,t){var n=$[_],i=$[r];return n[k](1,0,0,1,-e,-t),this.draw(n),n=this._testHit(n),i[y]=0,i[y]=1,n},J.clone=function(){var e=new $;return this.cloneProps(e),e},J.toString=function(){return"[DisplayObject (name="+this.name+")]"},J.cloneProps=function(n){n[x]=this[x],n.name=this.name,n[I]=this[I],n[B]=this[B],n[u]=this[u],n[p]=this[p],n[h]=this[h],n[v]=this[v],n[T]=this[T],n[N]=this[N],n[O]=this[O],n.x=this.x,n.y=this.y,n[E]=this[E],n[t]=this[t],this[e]&&(n[e]=this[e].cloneNode(A),n[e][l](M).putImageData(this[e][l](M).getImageData(0,0,this[e][y],this[e][S]),0,0))},J._applyShadow=function(e,t){t=t||Shadow[C],e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},J._tick=function(e){this[F]&&(e?this[F].apply(this,e):this[F]())},J._testHit=function(e){try{var t=e.getImageData(0,0,1,1).data[3]>1}catch(n){if(!$[m])throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return t},J[W]=function(){if(this[w]&&this[w].length!=0&&this[e])for(var t=this[w].length,n=this[e][l](M),r=this[e][y],i=this[e][S],s=0;s<t;s++)this[w][s].applyFilter(n,0,0,r,i)},createjs.DisplayObject=$}(),this.createjs=this.createjs||{},function(){var e="initialize",t="DisplayObject",n="children",r=null,i="DisplayObject_initialize",s="isVisible",o="alpha",u="length",a="DisplayObject_draw",f="draw",l=!0,c="parent",h="removeChild",p="addChildAt",d="splice",v="removeChildAt",m="getObjectUnderPoint",g="localToGlobal",y="_getObjectsUnderPoint",b="DisplayObject__tick",w="_tick",E="onDoubleClick",S="onMouseOver",x="onMouseOut",T="getConcatenatedMatrix",N="setTransform",C="globalAlpha",k="width",L=function(){this[e]()},A=L.prototype=new createjs[t];A[n]=r,A[i]=A[e],A[e]=function(){this[i](),this[n]=[]},A[s]=function(){return this.visible&&this[o]>0&&this[n][u]&&this.scaleX!=0&&this.scaleY!=0},A[a]=A[f],A[f]=function(e,t){if(this[a](e,t))return l;for(var r=this[n].slice(0),i=0,o=r[u];i<o;i++){var c=r[i];c[s]()&&(e.save(),c.updateContext(e),c[f](e),e.restore())}return l},A.addChild=function(e){if(e==r)return e;var t=arguments[u];if(t>1){for(var i=0;i<t;i++)this.addChild(arguments[i]);return arguments[t-1]}return e[c]&&e[c][h](e),e[c]=this,this[n].push(e),e},A[p]=function(e,t){var r=arguments[u],i=arguments[r-1];if(i<0||i>this[n][u])return arguments[r-2];if(r>2){for(var s=0;s<r-1;s++)this[p](arguments[s],i+s);return arguments[r-2]}return e[c]&&e[c][h](e),e[c]=this,this[n][d](t,0,e),e},A[h]=function(e){var t=arguments[u];if(t>1){for(var r=l,i=0;i<t;i++)r=r&&this[h](arguments[i]);return r}return this[v](this[n].indexOf(e))},A[v]=function(e){var t=arguments[u];if(t>1){for(var i=[],s=0;s<t;s++)i[s]=arguments[s];i.sort(function(e,t){return t-e});for(var o=l,s=0;s<t;s++)o=o&&this[v](i[s]);return o}if(e<0||e>this[n][u]-1)return!1;if(t=this[n][e])t[c]=r;return this[n][d](e,1),l},A.removeAllChildren=function(){for(var e=this[n];e[u];)e.pop()[c]=r},A.getChildAt=function(e){return this[n][e]},A.sortChildren=function(e){this[n].sort(e)},A.getChildIndex=function(e){return this[n].indexOf(e)},A.getNumChildren=function(){return this[n][u]},A.swapChildrenAt=function(e,t){var r=this[n],i=r[e],s=r[t];i&&s&&(r[e]=s,r[t]=i)},A.swapChildren=function(e,t){for(var i=this[n],s,o,a=0,f=i[u];a<f;a++)if(i[a]==e&&(s=a),i[a]==t&&(o=a),s!=r&&o!=r)break;a!=f&&(i[s]=t,i[o]=e)},A.setChildIndex=function(e,t){var r=this[n],i=r[u];if(!(e[c]!=this||t<0||t>=i)){for(var s=0;s<i;s++)if(r[s]==e)break;s==i||s==t||(r[d](s,1),t<s&&t--,r[d](t,0,e))}},A.contains=function(e){for(;e;){if(e==this)return l;e=e[c]}return!1},A.hitTest=function(e,t){return this[m](e,t)!=r},A.getObjectsUnderPoint=function(e,t){var n=[],r=this[g](e,t);return this[y](r.x,r.y,n),n},A[m]=function(e,t){var n=this[g](e,t);return this[y](n.x,n.y)},A.clone=function(e){var t=new L;this.cloneProps(t);if(e)for(var r=t[n]=[],i=0,s=this[n][u];i<s;i++){var o=this[n][i].clone(e);o[c]=t,r.push(o)}return t},A.toString=function(){return"[Container (name="+this.name+")]"},A[b]=A[w],A[w]=function(e){for(var t=this[n][u]-1;t>=0;t--){var r=this[n][t];r[w]&&r[w](e)}this[b](e)},A[y]=function(e,i,a,l){var c=createjs[t]._hitTestContext,h=createjs[t]._hitTestCanvas,p=this._matrix,d=l&1&&(this.onPress||this.onClick||this[E])||l&2&&(this[S]||this[x]);if(this.cacheCanvas&&d&&(this[T](p),c[N](p.a,p.b,p.c,p.d,p.tx-e,p.ty-i),c[C]=p[o],this[f](c),this._testHit(c)))return h[k]=0,h[k]=1,this;for(var v=this[n][u]-1;v>=0;v--){var m=this[n][v];if(m[s]()&&m.mouseEnabled)if(m instanceof L){if(d){if(m=m[y](e,i))return this}else if(m=m[y](e,i,a,l),!a&&m)return m}else if(!l||d||l&1&&(m.onPress||m.onClick||m[E])||l&2&&(m[S]||m[x])){var g=m.hitArea;m[T](p),g&&(p.appendTransform(g.x+m.regX,g.y+m.regY,g.scaleX,g.scaleY,g.rotation,g.skewX,g.skewY,g.regX,g.regY),p[o]*=g[o]/m[o]),c[C]=p[o],c[N](p.a,p.b,p.c,p.d,p.tx-e,p.ty-i),(g||m)[f](c);if(this._testHit(c)){if(h[k]=0,h[k]=1,d)return this;if(!a)return m;a.push(m)}}}return r},createjs.Container=L}(),this.createjs=this.createjs||{},function(){var e="_primaryPointerID",t="_mouseOverIntervalID",n="canvas",r="MouseEvent",i="_mouseOverTarget",s=null,o="_getObjectsUnderPoint",u="onMouseMove",a="addEventListener",f="onDoubleClick",l="_getPointerData",c="onMouseUp",h="globalCompositeOperation",p=!1,d="_updatePointerPosition",v="target",m="_pointerData",g="mouseY",y="mouseX",b="mouseInBounds",w="event",E="onMouseDown",S="mouseMoveOutside",x="Container_initialize",T=!0,N="inBounds",C="_snapToPixelEnabled",k="onMouseOver",L="_enableMouseEvents",A="getContext",O="_handlePointerMove",M="snapToPixelEnabled",_="_handlePointerDown",D="_handleDoubleClick",P="initialize",H="onMouseOut",B="_handleMouseDown",j="_handleMouseMove",F="_handlePointerUp",I="onClick",q="_getElementRect",R="onPress",U="_testMouseOver",z="_handleMouseUp",W="tickOnUpdate",X="rawY",V=function(e){this[P](e)},$=V.prototype=new createjs.Container;V[C]=p,$.autoClear=T,$[n]=s,$[y]=0,$[g]=0,$[u]=s,$[c]=s,$[E]=s,$[M]=p,$[b]=p,$[W]=T,$[S]=p,$[m]=s,$._pointerCount=0,$[e]=s,$[t]=s,$[x]=$[P],$[P]=function(e){this[x](),this[n]=e instanceof HTMLCanvasElement?e:document.getElementById(e),this[m]={},this[L](T)},$.update=function(){if(this[n]){this.autoClear&&this.clear(),V[C]=this[M],this[W]&&this._tick(arguments.length?arguments:s);var e=this[n][A]("2d");e.save(),this.updateContext(e),this.draw(e,p),e.restore()}},$.tick=$.update,$.clear=function(){if(this[n]){var e=this[n][A]("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this[n].width,this[n].height)}},$.toDataURL=function(e,t){t||(t="image/png");var r=this[n][A]("2d"),i=this[n].width,s=this[n].height,o;if(e){o=r.getImageData(0,0,i,s);var u=r[h];r[h]="destination-over",r.fillStyle=e,r.fillRect(0,0,i,s)}var a=this[n].toDataURL(t);return e&&(r.clearRect(0,0,i,s),r.putImageData(o,0,0),r[h]=u),a},$.enableMouseOver=function(e){this[t]&&(clearInterval(this[t]),this[t]=s);if(e==s)e=20;else if(e<=0)return;var n=this;this[t]=setInterval(function(){n[U]()},1e3/Math.min(50,e))},$.clone=function(){var e=new V(s);return this.cloneProps(e),e},$.toString=function(){return"[Stage (name="+this.name+")]"},$[L]=function(){var e=this,t=window[a]?window:document;t[a]("mouseup",function(t){e[z](t)},p),t[a]("mousemove",function(t){e[j](t)},p),t[a]("dblclick",function(t){e[D](t)},p),this[n]&&this[n][a]("mousedown",function(t){e[B](t)},p)},$[l]=function(t){var n=this[m][t];return!n&&(n=this[m][t]={x:0,y:0},this[e]==s)&&(this[e]=t),n},$[j]=function(e){e||(e=window[w]),this[O](-1,e,e.pageX,e.pageY)},$[O]=function(t,i,s,o){if(this[n]){var a=this[l](t),f=a[N];this[d](t,s,o);if(f||a[N]||this[S])t=new createjs[r](u,a.x,a.y,this,i,t,t==this[e],a.rawX,a[X]),this[u]&&this[u](t),a[w]&&a[w][u]&&(t=t.clone(),t[v]=a[w][v],a[w][u](t))}},$[d]=function(t,r,i){var s=this[q](this[n]);r-=s.left,i-=s.top;var o=this[n].width,u=this[n].height;r/=(s.right-s.left)/o,i/=(s.bottom-s.top)/u,s=this[l](t),(s[N]=r>=0&&i>=0&&r<=o-1&&i<=u-1)?(s.x=r,s.y=i):this[S]&&(s.x=r<0?0:r>o-1?o-1:r,s.y=i<0?0:i>u-1?u-1:i),s.rawX=r,s[X]=i,t==this[e]&&(this[y]=s.x,this[g]=s.y,this[b]=s[N])},$[q]=function(e){var t=e.getBoundingClientRect(),n=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),r=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),i=window.getComputedStyle?getComputedStyle(e):e.currentStyle,e=parseInt(i.paddingLeft)+parseInt(i.borderLeftWidth),s=parseInt(i.paddingTop)+parseInt(i.borderTopWidth),o=parseInt(i.paddingRight)+parseInt(i.borderRightWidth),i=parseInt(i.paddingBottom)+parseInt(i.borderBottomWidth);return{left:t.left+n+e,right:t.right+n-o,top:t.top+r+s,bottom:t.bottom+r-i}},$[z]=function(e){this[F](-1,e,p)},$[F]=function(n,i,u){var a=this[l](n),f=new createjs[r](c,a.x,a.y,this,i,n,n==this[e],a.rawX,a[X]);this[c]&&this[c](f),a[w]&&a[w][c]&&(f=f.clone(),f[v]=a[w][v],a[w][c](f)),a[v]&&a[v][I]&&this[o](a.x,a.y,s,T,this[t]?3:1)==a[v]&&a[v][I](new createjs[r](I,a.x,a.y,a[v],i,n,n==this[e],a.rawX,a[X])),u?(n==this[e]&&(this[e]=s),delete this[m][n]):a[w]=a[v]=s},$[B]=function(e){this[_](-1,e,p)},$[_]=function(n,i,a,f){var h=this[l](n);f!=s&&this[d](n,a,f),this[E]&&this[E](new createjs[r](E,h.x,h.y,this,i,n,n==this[e],h.rawX,h[X]));if(a=this[o](h.x,h.y,s,this[t]?3:1))a[R]&&(n=new createjs[r](R,h.x,h.y,a,i,n,n==this[e],h.rawX,h[X]),a[R](n),n[u]||n[c])&&(h[w]=n),h[v]=a},$[U]=function(){if(this[e]==-1&&(this[y]!=this._mouseOverX||this[g]!=this._mouseOverY||!this[b])){var t=s;this[b]&&(t=this[o](this[y],this[g],s,3),this._mouseOverX=this[y],this._mouseOverY=this[g]),this[i]!=t&&(this[i]&&this[i][H]&&this[i][H](new createjs[r](H,this[y],this[g],this[i])),t&&t[k]&&t[k](new createjs[r](k,this[y],this[g],t)),this[i]=t)}},$[D]=function(e){this[f]&&this[f](new createjs[r](f,this[y],this[g],this,e,-1,T));var n=this[o](this[y],this[g],s,this[t]?3:1);n&&n[f]&&n[f](new createjs[r](f,this[y],this[g],n,e,-1,T))},createjs.Stage=V}(),this.createjs=this.createjs||{},function(){var e="initialize",t="image",n=!0,r="sourceRect",i="DisplayObject_initialize",s="DisplayObject_draw",o=function(t){this[e](t)},u=o.prototype=new createjs.DisplayObject;u[t]=null,u.snapToPixel=n,u[r]=null,u[i]=u[e],u[e]=function(e){this[i](),typeof e=="string"?(this[t]=new Image,this[t].src=e):this[t]=e},u.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this[t]&&(this[t].complete||this[t].getContext||this[t].readyState>=2)},u[s]=u.draw,u.draw=function(e,i){if(this[s](e,i))return n;var o=this[r];return o?e.drawImage(this[t],o.x,o.y,o.width,o.height,0,0,o.width,o.height):e.drawImage(this[t],0,0),n},u.clone=function(){var e=new o(this[t]);return this.cloneProps(e),e},u.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=o}(),this.createjs=this.createjs||{},function(){var e="initialize",t="onAnimationEnd",n=null,r="currentFrame",i="currentAnimation",s="paused",o=!0,u="spriteSheet",a="offset",f="currentAnimationFrame",l="_advanceCount",c="_animation",h="DisplayObject_initialize",p="DisplayObject_draw",d="_normalizeFrame",v="_goto",m="cloneProps",g="DisplayObject__tick",y="frames",b="DisplayObject_cloneProps",w=function(t){this[e](t)},E=w.prototype=new createjs.DisplayObject;E[t]=n,E[r]=-1,E[i]=n,E[s]=o,E[u]=n,E.snapToPixel=o,E[a]=0,E[f]=0,E[l]=0,E[c]=n,E[h]=E[e],E[e]=function(e){this[h](),this[u]=e},E.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this[u].complete&&
this[r]>=0},E[p]=E.draw,E.draw=function(e,t){if(this[p](e,t))return o;this[d]();var i=this[u].getFrame(this[r]);if(i!=n){var s=i.rect;return e.drawImage(i.image,s.x,s.y,s.width,s.height,-i.regX,-i.regY,s.width,s.height),o}},E.play=function(){this[s]=!1},E.stop=function(){this[s]=o},E.gotoAndPlay=function(e){this[s]=!1,this[v](e)},E.gotoAndStop=function(e){this[s]=o,this[v](e)},E.advance=function(){this[c]?this[f]++:this[r]++,this[d]()},E.clone=function(){var e=new w(this[u]);return this[m](e),e},E.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},E[g]=E._tick,E._tick=function(e){var t=this[c]?this[c].frequency:1;!this[s]&&(++this[l]+this[a])%t==0&&this.advance(),this[g](e)},E[d]=function(){var e=this[c];e?this[f]>=e[y].length?(e.next?this[v](e.next):(this[s]=o,this[f]=e[y].length-1,this[r]=e[y][this[f]]),this[t])&&this[t](this,e.name):this[r]=e[y][this[f]]:this[r]>=this[u].getNumFrames()&&(this[r]=0,this[t])&&this[t](this,n)},E[b]=E[m],E[m]=function(e){this[b](e),e[t]=this[t],e[r]=this[r],e[i]=this[i],e[s]=this[s],e[a]=this[a],e[c]=this[c],e[f]=this[f]},E[v]=function(e){if(isNaN(e)){var t=this[u].getAnimation(e);t&&(this[f]=0,this[c]=t,this[i]=e,this[d]())}else this[i]=this[c]=n,this[r]=e},createjs.BitmapAnimation=w}(),this.createjs=this.createjs||{},function(){var e="initialize",t="graphics",n="DisplayObject_initialize",r="DisplayObject_draw",i=function(t){this[e](t)},s=i.prototype=new createjs.DisplayObject;s[t]=null,s[n]=s[e],s[e]=function(e){this[n](),this[t]=e?e:new createjs.Graphics},s.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this[t])},s[r]=s.draw,s.draw=function(e,n){return this[r](e,n)?!0:(this[t].draw(e),!0)},s.clone=function(e){return e=new i(e&&this[t]?this[t].clone():this[t]),this.cloneProps(e),e},s.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=i}(),this.createjs=this.createjs||{},function(){var e="initialize",t="_workingContext",n="createCanvas",r="text",i="font",s=null,o="color",u="#000",a="textAlign",f="textBaseline",l="maxWidth",c="outline",h="lineHeight",p="lineWidth",d="DisplayObject_initialize",v="DisplayObject_draw",m="start",g="alphabetic",y="_drawText",b="width",w="measureText",E="_getWorkingContext",S="getMeasuredLineHeight",x="cloneProps",T="length",N="DisplayObject_cloneProps",C="_drawTextLine",k=function(t,n,r){this[e](t,n,r)},L=k.prototype=new createjs.DisplayObject;k[t]=(createjs[n]?createjs[n]():document.createElement("canvas")).getContext("2d"),L[r]="",L[i]=s,L[o]=u,L[a]="left",L[f]="top",L[l]=s,L[c]=!1,L[h]=0,L[p]=s,L[d]=L[e],L[e]=function(e,t,n){this[d](),this[r]=e,this[i]=t,this[o]=n?n:u},L.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this[r]!=s&&this[r]!=="")},L[v]=L.draw,L.draw=function(e,t){return this[v](e,t)?!0:(this[c]?e.strokeStyle=this[o]:e.fillStyle=this[o],e[i]=this[i],e[a]=this[a]||m,e[f]=this[f]||g,this[y](e),!0)},L.getMeasuredWidth=function(){return this[E]()[w](this[r])[b]},L[S]=function(){return this[E]()[w]("M")[b]*1.2},L.getMeasuredHeight=function(){return this[y]()*(this[h]||this[S]())},L.clone=function(){var e=new k(this[r],this[i],this[o]);return this[x](e),e},L.toString=function(){return"[Text (text="+(this[r][T]>20?this[r].substr(0,17)+"...":this[r])+")]"},L[N]=L[x],L[x]=function(e){this[N](e),e[a]=this[a],e[f]=this[f],e[l]=this[l],e[c]=this[c],e[h]=this[h],e[p]=this[p]},L[E]=function(){var e=k[t];return e[i]=this[i],e[a]=this[a]||m,e[f]=this[f]||g,e},L[y]=function(e){var t=!!e;t||(e=this[E]());for(var n=String(this[r]).split(/(?:\r\n|\r|\n)/),i=this[h]||this[S](),o=0,u=0,a=n[T];u<a;u++){var f=e[w](n[u])[b];if(this[p]==s||f<this[p])t&&this[C](e,n[u],o*i);else{for(var f=n[u].split(/(\s)/),l=f[0],c=1,d=f[T];c<d;c+=2)e[w](l+f[c]+f[c+1])[b]>this[p]?(t&&this[C](e,l,o*i),o++,l=f[c+1]):l+=f[c]+f[c+1];t&&this[C](e,l,o*i)}o++}return o},L[C]=function(e,t,n){this[c]?e.strokeText(t,0,n,this[l]||65535):e.fillText(t,0,n,this[l]||65535)},createjs.Text=k}(),this.createjs=this.createjs||{},function(){var e="_workingCanvas",t="createCanvas",n="createElement",r="canvas",i="_workingContext",s="getContext",o="_flip",u=!0,a="frames",f="width",l="height",c="drawImage",h="image/png",p="length",d=function(){throw"SpriteSheetUtils cannot be instantiated"};d[e]=createjs[t]?createjs[t]():document[n](r),d[i]=d[e][s]("2d"),d.addFlippedFrames=function(e,t,n,r){if(t||n||r){var i=0;t&&d[o](e,++i,u,!1),n&&d[o](e,++i,!1,u),r&&d[o](e,++i,u,u)}},d.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n)[a][0]);var r=t.getFrame(n);if(!r)return null;var s=r.rect,o=d[e];return o[f]=s[f],o[l]=s[l],d[i][c](r.image,s.x,s.y,s[f],s[l],0,0,s[f],s[l]),r=new Image,r.src=o.toDataURL(h),r},d.mergeAlpha=function(e,i,o){o||(o=createjs[t]?createjs[t]():document[n](r)),o[f]=Math.max(i[f],e[f]),o[l]=Math.max(i[l],e[l]);var u=o[s]("2d");return u.save(),u[c](e,0,0),u.globalCompositeOperation="destination-in",u[c](i,0,0),u.restore(),o},d[o]=function(t,n,r,s){for(var o=t._images,u=d[e],v=d[i],m=o[p]/n,g=0;g<m;g++){var y=o[g];y.__tmp=g,u[f]=0,u[f]=y[f],u[l]=y[l],v.setTransform(r?-1:1,0,0,s?-1:1,r?y[f]:0,s?y[l]:0),v[c](y,0,0);var b=new Image;b.src=u.toDataURL(h),b[f]=y[f],b[l]=y[l],o.push(b)}v=t._frames,u=v[p]/n;for(g=0;g<u;g++){var y=v[g],C=y.rect.clone(),b=o[y.image.__tmp+m*n],k={image:b,rect:C,regX:y.regX,regY:y.regY};r&&(C.x=b[f]-C.x-C[f],k.regX=C[f]-y.regX),s&&(C.y=b[l]-C.y-C[l],k.regY=C[l]-y.regY),v.push(k)}r="_"+(r?"h":"")+(s?"v":""),s=t._animations,t=t._data,o=s[p]/n;for(g=0;g<o;g++){v=s[g],y=t[v],m={name:v+r,frequency:y.frequency,next:y.next,frames:[]},y.next&&(m.next+=r),v=y[a],y=0;for(b=v[p];y<b;y++)m[a].push(v[y]+u*n);t[m.name]=m,s.push(m.name)}},createjs.SpriteSheetUtils=d}(),this.createjs=this.createjs||{},function(){var e="initialize",t="ERR_DIMENSIONS",n="ERR_RUNNING",r="maxWidth",i="maxHeight",s="spriteSheet",o=null,u="scale",a="_frames",f="_animations",l="_data",c="_index",h="_callback",p="_timeSlice",d="_timerID",v="_scale",m="nominalBounds",g="getBounds",y="length",b="height",w="addAnimation",E="actionsEnabled",S="index",x="_startBuild",T="_drawNext",N="_endBuild",C="createCanvas",k="_getSize",L="sourceRect",A=function(){this[e]()},O=A.prototype;A[t]="frame dimensions exceed max spritesheet dimensions",A[n]="a build is already running",O[r]=2048,O[i]=2048,O[s]=o,O[u]=1,O.padding=1,O[a]=o,O[f]=o,O[l]=o,O._nextFrameIndex=0,O[c]=0,O[h]=o,O[p]=o,O[d]=o,O[v]=1,O[e]=function(){this[a]=[],this[f]={}},O.addFrame=function(e,t,r,i,s,u){if(this[l])throw A[n];return t=t||e.bounds||e[m],!t&&e[g]&&(t=e[g]()),t?(r=r||1,this[a].push({source:e,sourceRect:t,scale:r,funct:i,params:s,scope:u,index:this[a][y],height:t[b]*r})-1):o},O[w]=function(e,t,r,i){if(this[l])throw A[n];this[f][e]={frames:t,next:r,frequency:i}},O.addMovieClip=function(e,t,r){if(this[l])throw A[n];var i=e.frameBounds,s=t||e.bounds||e[m];!s&&e[g]&&(s=e[g]());if(!s&&!i)return o;for(var t=e.timeline.duration,u=0;u<t;u++)this.addFrame(e,i&&i[u]?i[u]:s,r,function(e){var t=this[E];this[E]=!1,this.gotoAndStop(e),this[E]=t},[u],e);var u=e.timeline._labels,e=[],a;for(a in u)e.push({index:u[a],label:a});if(e[y]){e.sort(function(e,t){return e[S]-t[S]}),u=0;for(a=e[y];u<a;u++){for(var r=e[u].label,i=u==a-1?t:e[u+1][S],s=[],f=e[u][S];f<i;f++)s.push(f);this[w](r,s,!0)}}},O.build=function(){if(this[l])throw A[n];this[h]=o;for(this[x]();this[T](););return this[N](),this[s]},O.buildAsync=function(e,t){if(this[l])throw A[n];this[h]=e,this[x](),this[p]=Math.max(.01,Math.min(.99,t||.3))*50;var r=this;this[d]=setTimeout(function(){r._run()},50-this[p])},O.stopAsync=function(){clearTimeout(this[d]),this[l]=o},O.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},O.toString=function(){return"[SpriteSheetBuilder]"},O[x]=function(){var e=this.padding||0;this[s]=o,this[c]=0,this[v]=this[u];var n=[];this[l]={images:[],frames:n,animations:this[f]};var h=this[a].slice();h.sort(function(e,t){return e[b]<=t[b]?-1:1});if(h[h[y]-1][b]+e*2>this[i])throw A[t];for(var p=0,d=0,m=0;h[y];){var g=this._fillRow(h,p,m,n,e);g.w>d&&(d=g.w),p+=g.h;if(!g.h||!h[y]){var w=createjs[C]?createjs[C]():document.createElement("canvas");w.width=this[k](d,this[r]),w[b]=this[k](p,this[i]),this[l].images[m]=w,g.h||(d=p=0,m++)}}},O[k]=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},O._fillRow=function(e,n,s,o,a){var f=this[r],l=this[i]-n,c=a;n+=a;for(var h=0,p=e[y]-1;p>=0;p--){var d=e[p],m=this[v]*d[u],g=d[L],w=d.source,E=Math.floor(m*g.x-a),x=Math.floor(m*g.y-a),T=Math.ceil(m*g[b]+a*2),g=Math.ceil(m*g.width+a*2);if(g>f)throw A[t];T>l||c+g>f||(d.img=s,d.rect=new createjs.Rectangle(c,n,g,T),h=h||T,e.splice(p,1),o[d[S]]=[c,n,g,T,s,Math.round(-E+m*w.regX-a),Math.round(-x+m*w.regY-a)],c+=g)}return{w:c,h:h}},O[N]=function(){this[s]=new createjs.SpriteSheet(this[l]),this[l]=o,this[h]&&this[h](this)},O._run=function(){for(var e=(new Date).getTime()+this[p],t=!1;e>(new Date).getTime();)if(!this[T]()){t=!0;break}if(t)this[N]();else{var n=this;this[d]=setTimeout(function(){n._run()},50-this[p])}},O[T]=function(){var e=this[a][this[c]],t=e[u]*this[v],n=e.rect,r=e[L],i=this[l].images[e.img].getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),i.save(),i.beginPath(),i.rect(n.x,n.y,n.width,n[b]),i.clip(),i.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),i[u](t,t),e.source.draw(i),i.restore(),++this[c]<this[a][y]},createjs.SpriteSheetBuilder=A}(),this.createjs=this.createjs||{},function(){var e="initialize",t="htmlElement",n=null,r="_style",i="DisplayObject_initialize",s="style",o="visibility",u="visible",a="hidden",f="matrix(",l=function(t){this[e](t)},c=l.prototype=new createjs.DisplayObject;c[t]=n,c[r]=n,c[i]=c[e],c[e]=function(e){typeof e=="string"&&(e=document.getElementById(e)),this[i](),this.mouseEnabled=!1;if(this[t]=e)this[r]=e[s],this[r].position="absolute",this[r].transformOrigin=this[r].WebkitTransformOrigin=this[r].msTransformOrigin=this[r].MozTransformOrigin=this[r].OTransformOrigin="0% 0%"},c.isVisible=function(){return this[t]!=n},c.draw=function(){if(this[t]!=n){var e=this.getConcatenatedMatrix(this._matrix),r=this[t];return r[s].opacity=""+e.alpha,r[s][o]=this[u]?u:a,r[s].transform=r[s].WebkitTransform=r[s].OTransform=r[s].msTransform=[f+e.a,e.b,e.c,e.d,e.tx+.5|0,(e.ty+.5|0)+")"].join(","),r[s].MozTransform=[f+e.a,e.b,e.c,e.d,(e.tx+.5|0)+"px",(e.ty+.5|0)+"px)"].join(","),!0}},c.cache=function(){},c.uncache=function(){},c.updateCache=function(){},c.hitTest=function(){},c.localToGlobal=function(){},c.globalToLocal=function(){},c.localToLocal=function(){},c.clone=function(){var e=new l;return this.cloneProps(e),e},c.toString=function(){return"[DOMElement (name="+this.name+")]"},c._tick=function(e){this[t]!=n&&(this[t][s][o]=a,this.onTick)&&this.onTick(e)},createjs.DOMElement=l}(),this.createjs=this.createjs||{},function(){var e="initialize",t=function(){this[e]()},n=t.prototype;n[e]=function(){},n.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},n.applyFilter=function(){},n.toString=function(){return"[Filter]"},n.clone=function(){return new t},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){var e="isSupported",t="ontouchstart",n="msPointerEnabled",r="navigator",i="canvas",s=!1,o="__touch",u="_IOS_enable",a="_IE_enable",f=!0,l="_IOS_disable",c="_IE_disable",h="_IOS_handleEvent",p="addEventListener",d="touchstart",v="touchmove",m="touchend",g="touchcancel",y="removeEventListener",b="preventDefault",w="_handleStart",E="pageX",S="pageY",x="_handleMove",T="_handleEnd",N="_IE_handleEvent",C="MSPointerDown",k="MSPointerMove",L="MSPointerUp",A="MSPointerCancel",O="pointers",M=function(){throw"Touch cannot be instantiated"};M[e]=function(){return t in window||window[r][n]},M.enable=function(l,c,h){return!l||!l[i]||!M[e]()?s:(l[o]={pointers:{},multitouch:!c,preventDefault:!h,count:0},t in window?M[u](l):window[r][n]&&M[a](l),f)},M.disable=function(e){e&&(t in window?M[l](e):window[r][n]&&M[c](e))},M[u]=function(e){var t=e[i],n=e[o].f=function(t){M[h](e,t)};t[p](d,n,s),t[p](v,n,s),t[p](m,n,s),t[p](g,n,s)},M[l]=function(e){var t=e[i];t&&(e=e[o].f,t[y](d,e,s),t[y](v,e,s),t[y](m,e,s),t[y](g,e,s))},M[h]=function(e,t){if(e){e[o][b]&&t[b]&&t[b]();for(var n=t.changedTouches,r=t.type,s=0,u=n.length;s<u;s++){var a=n[s],f=a.identifier;a.target==e[i]&&(r==d?this[w](e,f,t,a[E],a[S]):r==v?this[x](e,f,t,a[E],a[S]):(r==m||r==g)&&this[T](e,f,t))}}},M[a]=function(e){var t=e[i],n=e[o].f=function(t){M[N](e,t)};t[p](C,n,s),window[p](k,n,s),window[p](L,n,s),window[p](A,n,s),e[o][b]&&(t.style.msTouchAction="none"),e[o].activeIDs={}},M[c]=function(e){var t=e[o].f;window[y](k,t,s),window[y](L,t,s),window[y](A,t,s),e[i]&&e[i][y](C,t,s)},M[N]=function(e,t){if(e){e[o][b]&&t[b]&&t[b]();var n=t.type,r=t.pointerId,s=e[o].activeIDs;if(n==C)t.srcElement==e[i]&&(s[r]=f,this[w](e,r,t,t[E],t[S]));else if(s[r])if(n==k)this[x](e,r,t,t[E],t[S]);else if(n==L||n==A)delete s[r],this[T](e,r,t)}},M[w]=function(e,t,n,r,i){var s=e[o];if(s.multitouch||!s.count){var u=s[O];u[t]||(u[t]=f,s.count++,e._handlePointerDown(t,n,r,i))}},M[x]=function(e,t,n,r,i){e[o][O][t]&&e._handlePointerMove(t,n,r,i)},M[T]=function(e,t,n){var r=e[o],i=r[O];i[t]&&(r.count--,e._handlePointerUp(t,n,f),delete i[t])},createjs.Touch=M}(),(window._gsQueue||(window._gsQueue=[])).push(function(){var e="core.Animation",t="core.SimpleTimeline",n="TweenLite",r="call",i="_cycle",s="_yoyo",o="vars",u="_repeat",a="repeat",f="_repeatDelay",l="repeatDelay",c="_dirty",h="prototype",p="version",d="1.8.0",v="constructor",m="getTweensOf",g="invalidate",y="_uncache",b="ratio",w=null,E="timeline",S="_startTime",x="_time",T="_timeline",N="_enabled",C="_initted",k="_firstPT",L="_duration",A="render",O="_next",M="totalDuration",_="_totalDuration",D="_totalTime",P="_calcEnd",H="_ease",B="getRatio",j="_reversed",F="onComplete",I="_rawPrevTime",q="onReverseComplete",R="_active",U="_onUpdate",z="apply",W="onUpdateScope",X="onUpdateParams",V="_paused",$="onStart",J="onStartScope",K="onStartParams",Q="onRepeat",G="onRepeatScope",Y="onRepeatParams",Z="autoRemoveChildren",et="Scope",tt="Params",nt="runBackwards",rt="immediateRender",it="startAt",st="staggerTo",ot="length",ut="onCompleteParams",at="staggerFromTo",ft="delayedCall",lt="_first",ct="concat",ht="_rootFramesTimeline",pt="target",dt="totalTime",vt="killChildTweensOf",mt="parentNode",gt="progress",yt="duration",bt="totalProgress",wt="time",Et="TimelineLite",St="_labels",xt="smoothChildTiming",Tt="_sortChildren",Nt="number",Ct="_parseTimeOrLabel",kt="string",Lt="function",At="_timeScale",Ot="indexOf",Mt="=",_t="charAt",Dt="substr",Pt="_hasPausedChild",Ht="_prev",Bt="getChildren",jt="shiftChildren",Ft="_kill",It="easing.Ease",qt="_locked",Rt="getLabelsArray",Ut="getLabelBefore",zt="plugins.TweenPlugin",Wt="bezier",Xt="_overwriteProps",Vt="bezierThrough",$t=",",Jt="sqrt",Kt="splice",Qt="soft",Gt="greensock",Yt="GreenSockGlobals",Zt="_parseToProxy",en="_setPluginRatio",tn="_registerComplexSpecialProp",nn="data",rn="plugin",sn="setRatio",on="autoRotate",un="top",an="rotation",fn="_transform",ln="_enableTransforms",cn="_gsTransform",hn="_target",pn="_onInitTween",dn="_tween",vn="_props",mn="_timeRes",gn="timeResolution",yn="_autoRotate",bn="get",wn="_beziers",En="type",Sn="_lengths",xn="_segments",Tn="_curSeg",Nn="atan2",Cn="activate",kn="defaultTransformPerspective",Ln="px",An="suffixMap",On="toUpperCase",Mn="createElement",_n="opacity",Dn="style",Pn="currentStyle",Hn="filter",Bn="toLowerCase",jn="getPropertyValue",Fn="replace",In="none",qn="auto",Rn="auto auto",Un="_gsOverwrittenClassNamePT",zn="skewX",Wn="scaleX",Xn="scaleY",Vn="rotationX",$n="rotationY",Jn="scaleZ",Kn="cssText",Qn="className",Gn="width",Yn="offsetWidth",Zn="offsetHeight",er="padding",tr="border",nr="%",rr="em",ir="borderTopWidth",sr="height",or="0 0",ur="split",ar=" ",fr="match",lr="transparent",cr=")",hr="parse",pr="firstMPT",dr="xn",vr="xs",mr="css_",gr="parseComplex",yr="appendXtra",br="xfirst",wr="format",Er="perspective",Sr="transform",xr="transformOrigin",Tr="zOrigin",Nr="ieOffsetX",Cr="ieOffsetY",kr="removeAttribute",Lr="_ffFix",Ar="matrix(",Or="shortRotation",Mr="shortRotationZ",_r="shortRotationX",Dr="shortRotationY",Pr="skewY",Hr="50% 50%",Br="_transformType",jr="0px",Fr="borderLeft",Ir="visible",qr="autoAlpha",Rr="visibility",Ur="hidden",zr="alpha(opacity=",Wr="removeProperty",Xr="_classNamePT",Vr="zIndex",$r="WebkitBackfaceVisibility",Jr="_linkCSSP",Kr="css_autoAlpha",Qr="roundProps",Gr="easing.",Yr="config";_gsDefine("TweenMax",[e,t,n],function(e,t,n){var Et=function(e,t,h){n[r](this,e,t,h),this[i]=0,this[s]=this[o].yoyo===!0,this[u]=this[o][a]||0,this[f]=this[o][l]||0,this[c]=!0},St=Et[h]=n.to({},.1,{}),xt=[];Et[p]=d,St[v]=Et,St.kill()._gc=!1,Et.killTweensOf=Et.killDelayedCallsTo=n.killTweensOf,Et[m]=n[m],Et.ticker=n.ticker,St[g]=function(){return this[s]=this[o].yoyo===!0,this[u]=this[o][a]||0,this[f]=this[o][l]||0,this[y](!0),n[h][g][r](this)},St.updateTo=function(e,t){var r,i=this[b];t&&w!=this[E]&&this[S]<this[T][x]&&(this[S]=this[T][x],this[y](!1),this._gc?this[N](!0,!1):this[T].insert(this,this[S]-this._delay));for(r in e)this[o][r]=e[r];if(this[C])if(t)this[C]=!1;else if(this._notifyPluginsOfEnabled&&this[k]&&n._onPluginEvent("_onDisable",this),this[x]/this[L]>.998){var s=this[x];this[A](0,!0,!1),this[C]=!1,this[A](s,!0,!1)}else if(this[x]>0){this[C]=!1,this._init();for(var u,a=1/(1-i),f=this[k];f;)u=f.s+f.c,f.c*=a,f.s=u-f.c,f=f[O]}return this},St[A]=function(e,t,n){var r,a,l,h=this[c]?this[M]():this[_],p=this[x],d=this[D],v=this[i];if(e>=h)this[D]=h,this[i]=this[u],this[s]&&0!==(1&this[i])?(this[x]=0,this[b]=this[H][P]?this[H][B](0):0):(this[x]=this[L],this[b]=this[H][P]?this[H][B](1):1),this[j]||(r=!0,a=F),0===this[L]&&((0===e||0>this[I])&&this[I]!==e&&(n=!0),this[I]=e);else if(0>=e)this[D]=this[x]=this[i]=0,this[b]=this[H][P]?this[H][B](0):0,(0!==d||0===this[L]&&this[I]>0)&&(a=q,r=this[j]),0>e?(this[R]=!1,0===this[L]&&(this[I]>=0&&(n=!0),this[I]=e)):this[C]||(n=!0);else{if(this[D]=this[x]=e,0!==this[u]){var m=this[L]+this[f];this[i]=this[D]/m>>0,0!==this[i]&&this[i]===this[D]/m&&this[i]--,this[x]=this[D]-this[i]*m,this[s]&&0!==(1&this[i])&&(this[x]=this[L]-this[x]),this[x]>this[L]?this[x]=this[L]:0>this[x]&&(this[x]=0)}if(this._easeType){var g=this[x]/this[L],y=this._easeType,w=this._easePower;(1===y||3===y&&g>=.5)&&(g=1-g),3===y&&(g*=2),1===w?g*=g:2===w?g*=g*g:3===w?g*=g*g*g:4===w&&(g*=g*g*g*g),this[b]=1===y?1-g:2===y?g:.5>this[x]/this[L]?g/2:1-g/2}else this[b]=this[H][B](this[x]/this[L])}if(p===this[x]&&!n)return d!==this[D]&&this[U]&&(t||this[U][z](this[o][W]||this,this[o][X]||xt)),void 0;for(this[C]||(this._init(),!r&&this[x]&&(this[b]=this[H][B](this[x]/this[L]))),this[R]||this[V]||(this[R]=!0),0===d&&this[o][$]&&(0!==this[D]||0===this[L])&&(t||this[o][$][z](this[o][J]||this,this[o][K]||xt)),l=this[k];l;)l.f?l.t[l.p](l.c*this[b]+l.s):l.t[l.p]=l.c*this[b]+l.s,l=l[O];this[U]&&(t||this[U][z](this[o][W]||this,this[o][X]||xt)),this[i]!==v&&(t||this._gc||this[o][Q]&&this[o][Q][z](this[o][G]||this,this[o][Y]||xt)),a&&(this._gc||(r&&(this[T][Z]&&this[N](!1,!1),this[R]=!1),t||this[o][a]&&this[o][a][z](this[o][a+et]||this,this[o][a+tt]||xt)))},Et.to=function(e,t,n){return new Et(e,t,n)},Et.from=function(e,t,n){return n[nt]=!0,n[rt]!==!1&&(n[rt]=!0),new Et(e,t,n)},Et.fromTo=function(e,t,n,r){return r[it]=n,n[rt]&&(r[rt]=!0),new Et(e,t,r)},Et[st]=Et.allTo=function(e,t,n,r,i,s,o){r=r||0;var u,a,f,l=[],c=e[ot],h=n.delay||0;for(a=0;c>a;a++){u={};for(f in n)u[f]=n[f];u.delay=h,a===c-1&&i&&(u[F]=function(){n[F]&&n[F][z](n.onCompleteScope,n[ut]),i[z](o,s)}),l[a]=new Et(e[a],t,u),h+=r}return l},Et.staggerFrom=Et.allFrom=function(e,t,n,r,i,s,o){return n[nt]=!0,n[rt]!==!1&&(n[rt]=!0),Et[st](e,t,n,r,i,s,o)},Et[at]=Et.allFromTo=function(e,t,n,r,i,s,o,u){return r[it]=n,n[rt]&&(r[rt]=!0),Et[st](e,t,r,i,s,o,u)},Et[ft]=function(e,t,n,r,i){return new Et(t,0,{delay:e,onComplete:t,onCompleteParams:n,onCompleteScope:r,onReverseComplete:t,onReverseCompleteParams:n,onReverseCompleteScope:r,immediateRender:!1,useFrames:i,overwrite:0})},Et.set=function(e,t){return new Et(e,0,t)},Et.isTweening=function(e){for(var t,r=n[m](e),i=r[ot];--i>-1;)if((t=r[i])[R]||t[S]===t[E][x]&&t[E][R])return!0;return!1};var Tt=function(e,t){for(var r=[],i=0,s=e[lt];s;)s instanceof n?r[i++]=s:(t&&(r[i++]=s),r=r[ct](Tt(s,t)),i=r[ot]),s=s[O];return r},Nt=Et.getAllTweens=function(t){var n=Tt(e._rootTimeline,t);return n[ct](Tt(e[ht],t))};Et.killAll=function(e,n,r,i){w==n&&(n=!0),w==r&&(r=!0);var s,u,a,f=Nt(0!=i),l=f[ot],c=n&&r&&i;for(a=0;l>a;a++)u=f[a],(c||u instanceof t||(s=u[pt]===u[o][F])&&r||n&&!s)&&(e?u[dt](u[M]()):u[N](!1,!1))},Et[vt]=function(e,t){if(w!=e){if(e.jquery)return e.each(function(e,n){Et[vt](n,t)}),void 0;var r,i,s,o,u=n._tweenLookup,a=[];for(i in u)for(r=u[i][pt][mt];r;)r===e&&(a=a[ct](u[i].tweens)),r=r[mt];for(o=a[ot],s=0;o>s;s++)t&&a[s][dt](a[s][M]()),a[s][N](!1,!1)}},Et.pauseAll=function(e,t,n){Ct(!0,e,t,n)},Et.resumeAll=function(e,t,n){Ct(!1,e,t,n)};var Ct=function(e,n,r,i){void 0===n&&(n=!0),void 0===r&&(r=!0);for(var s,u,a=Nt(i),f=n&&r&&i,l=a[ot];--l>-1;)u=a[l],(f||u instanceof t||(s=u[pt]===u[o][F])&&r||n&&!s)&&u.paused(e)};return St[gt]=function(e){return arguments[ot]?this[dt](this[yt]()*(this[s]&&0!==(1&this[i])?1-e:e)+this[i]*(this[L]+this[f]),!1):this[x]/this[yt]()},St[bt]=function(e){return arguments[ot]?this[dt](this[M]()*e,!1):this[D]/this[M]()},St[wt]=function(e,t){return arguments[ot]?(this[c]&&this[M](),e>this[L]&&(e=this[L]),this[s]&&0!==(1&this[i])?e=this[L]-e+this[i]*(this[L]+this[f]):0!==this[u]&&(e+=this[i]*(this[L]+this[f])),this[dt](e,t)):this[x]},St[M]=function(e){return arguments[ot]?-1===this[u]?this:this[yt]((e-this[u]*this[f])/(this[u]+1)):(this[c]&&(this[_]=-1===this[u]?999999999999:this[L]*(this[u]+1)+this[f]*this[u],this[c]=!1),this[_])},St[a]=function(e){return arguments[ot]?(this[u]=e,this[y](!0)):this[u]},St[l]=function(e){return arguments[ot]?(this[f]=e,this[y](!0)):this[f]},St.yoyo=function(e){return arguments[ot]?(this[s]=e,this):this[s]},Et},!0),_gsDefine(Et,[e,t,n],function(e,t,n){"use strict";var i=function(e){t[r](this,e),this[St]={},this[Z]=this[o][Z]===!0,this[xt]=this[o][xt]===!0,this[Tt]=!0,this[U]=this[o].onUpdate;for(var n,i,u=s[ot];--u>-1;)if(i=this[o][s[u]])for(n=i[ot];--n>-1;)"{self}"===i[n]&&(i=this[o][s[u]]=i[ct](),i[n]=this);this[o].tweens instanceof Array&&this.add(this[o].tweens,0,this[o].align,this[o].stagger)},s=[K,X,ut,"onReverseCompleteParams",Y],u=[],a=function(e){var t,n={};for(t in e)n[t]=e[t];return n},f=i[h]=new t;return i[p]=d,f[v]=i,f.kill()._gc=!1,f.to=function(e,t,r,i){return this.add(new n(e,t,r),i)},f.from=function(e,t,r,i){return this.add(n.from(e,t,r),i)},f.fromTo=function(e,t,r,i,s){return this.add(n.fromTo(e,t,r,i),s)},f[st]=function(e,t,r,s,o,u,f,l){var c=new i({onComplete:u,onCompleteParams:f,onCompleteScope:l});s=s||0;for(var h=0;e[ot]>h;h++)w!=r[it]&&(r[it]=a(r[it])),c.add(new n(e[h],t,a(r)),h*s);return this.add(c,o)},f.staggerFrom=function(e,t,n,r,i,s,o,u){return w==n[rt]&&(n[rt]=!0),n[nt]=!0,this[st](e,t,n,r,i,s,o,u)},f[at]=function(e,t,n,r,i,s,o,u,a){return r[it]=n,n[rt]&&(r[rt]=!0),this[st](e,t,r,i,s,o,u,a)},f[r]=function(e,t,r,i){return this.add(n[ft](0,e,t,r),i)},f.set=function(e,t,r){return t[rt]=!1,this.add(new n(e,0,t),r)},i.exportRoot=function(e,t){e=e||{},w==e[xt]&&(e[xt]=!0);var r=new i(e),s=r[T];w==t&&(t=!0),s._remove(r,!0),r[S]=0,r[I]=r[x]=r[D]=s[x];for(var u,a=s[lt];a;)u=a[O],t&&a instanceof n&&a[pt]===a[o][F]||r.add(a,a[S]-a._delay),a=u;return s.add(r,0),r},f.add=function(s,o,u,a){if(Nt!=typeof o&&(o=this[Ct](o,0,!0,s)),!(s instanceof e)){if(s instanceof Array){u=u||"normal",a=a||0;var f,l,c=o,p=s[ot];for(f=0;p>f;f++)(l=s[f])instanceof Array&&(l=new i({tweens:l})),this.add(l,c),kt!=typeof l&&Lt!=typeof l&&("sequence"===u?c=l[S]+l[M]()/l[At]:"start"===u&&(l[S]-=l.delay())),c+=a;return this[y](!0)}if(kt==typeof s)return this.addLabel(s,o);if(Lt!=typeof s)throw"Cannot add "+s+" into the TimelineLite/Max: it is neither a tween, timeline, function, nor a String.";s=n[ft](0,s)}if(t[h].add[r](this,s,o),this._gc&&!this[V]&&this[x]===this[L]&&this[x]<this[yt]())for(var d=this;d._gc&&d[T];)d[T][xt]?d[dt](d[D],!0):d[N](!0,!1),d=d[T];return this},f.remove=function(t){if(t instanceof e)return this._remove(t,!1);if(t instanceof Array){for(var n=t[ot];--n>-1;)this.remove(t[n]);return this}return kt==typeof t?this.removeLabel(t):this.kill(w,t)},f.append=function(e,t){return this.add(e,this[Ct](w,t,!0,e))},f.insert=f.insertMultiple=function(e,t,n,r){return this.add(e,t||0,n,r)},f.appendMultiple=function(e,t,n,r){return this.add(e,this[Ct](w,t,!0,e),n,r)},f.addLabel=function(e,t){return this[St][e]=this[Ct](t),this},f.removeLabel=function(e){return delete this[St][e],this},f.getLabelTime=function(e){return w!=this[St][e]?this[St][e]:-1},f[Ct]=function(t,n,r,i){var s;if(i instanceof e&&i[E]===this)this.remove(i);else if(i instanceof Array)for(s=i[ot];--s>-1;)i[s]instanceof e&&i[s][E]===this&&this.remove(i[s]);if(kt==typeof n)return this[Ct](n,r&&Nt==typeof t&&w==this[St][n]?t-this[yt]():0,r);if(n=n||0,kt!=typeof t||!isNaN(t)&&w==this[St][t])w==t&&(t=this[yt]());else{if(s=t[Ot](Mt),-1===s)return w==this[St][t]?r?this[St][t]=this[yt]()+n:n:this[St][t]+n;n=parseInt(t[_t](s-1)+"1",10)*Number(t[Dt](s+1)),t=s>1?this[Ct](t[Dt](0,s-1),0,r):this[yt]()}return Number(t)+n},f.seek=function(e,t){return this[dt](Nt==typeof e?e:this[Ct](e),t!==!1)},f.stop=function(){return this.paused(!0)},f.gotoAndPlay=function(e,n){return t[h].play[r](this,e,n)},f.gotoAndStop=function(e,t){return this.pause(e,t)},f[A]=function(e,t,n){this._gc&&this[N](!0,!1),this[R]=!this[V];var r,i,s,a,f=this[c]?this[M]():this[_],l=this[x],h=this[S],p=this[At],d=this[V];if(e>=f?(this[D]=this[x]=f,this[j]||this[Pt]()||(i=!0,a=F,0===this[L]&&(0===e||0>this[I])&&this[I]!==e&&(n=!0)),this[I]=e,e=f+1e-6):0>=e?(this[D]=this[x]=0,(0!==l||0===this[L]&&this[I]>0)&&(a=q,i=this[j]),0>e?(this[R]=!1,0===this[L]&&this[I]>=0&&(n=!0)):this[C]||(n=!0),this[I]=e,e=-0.000001):this[D]=this[x]=this[I]=e,this[x]!==l||n){if(this[C]||(this[C]=!0),0===l&&this[o][$]&&0!==this[x]&&(t||this[o][$][z](this[o][J]||this,this[o][K]||u)),this[x]>l)for(r=this[lt];r&&(s=r[O],!this[V]||d);)(r[R]||r[S]<=this[x]&&!r[V]&&!r._gc)&&(r[j]?r[A]((r[c]?r[M]():r[_])-(e-r[S])*r[At],t,!1):r[A]((e-r[S])*r[At],t,!1)),r=s;else for(r=this._last;r&&(s=r[Ht],!this[V]||d);)(r[R]||l>=r[S]&&!r[V]&&!r._gc)&&(r[j]?r[A]((r[c]?r[M]():r[_])-(e-r[S])*r[At],t,!1):r[A]((e-r[S])*r[At],t,!1)),r=s;this[U]&&(t||this[U][z](this[o][W]||this,this[o][X]||u)),a&&(this._gc||(h===this[S]||p!=this[At])&&(0===this[x]||f>=this[M]())&&(i&&(this[T][Z]&&this[N](!1,!1),this[R]=!1),t||this[o][a]&&this[o][a][z](this[o][a+et]||this,this[o][a+tt]||u)))}},f[Pt]=function(){for(var e=this[lt];e;){if(e[V]||e instanceof i&&e[Pt]())return!0;e=e[O]}return!1},f[Bt]=function(e,t,r,i){i=i||-9999999999;for(var s=[],o=this[lt],u=0;o;)i>o[S]||(o instanceof n?t!==!1&&(s[u++]=o):(r!==!1&&(s[u++]=o),e!==!1&&(s=s[ct](o[Bt](!0,t,r)),u=s[ot]))),o=o[O];return s},f[m]=function(e,t){for(var r=n[m](e),i=r[ot],s=[],o=0;--i>-1;)(r[i][E]===this||t&&this._contains(r[i]))&&(s[o++]=r[i]);return s},f._contains=function(e){for(var t=e[E];t;){if(t===this)return!0;t=t[E]}return!1},f[jt]=function(e,t,n){n=n||0;for(var r=this[lt];r;)r[S]>=n&&(r[S]+=e),r=r[O];if(t)for(var i in this[St])this[St][i]>=n&&(this[St][i]+=e);return this[y](!0)},f[Ft]=function(e,t){if(w==e&&w==t)return this[N](!1,!1);for(var n=w==t?this[Bt](!0,!0,!1):this[m](t),r=n[ot],i=!1;--r>-1;)n[r][Ft](e,t)&&(i=!0);return i},f.clear=function(e){var t=this[Bt](!1,!0,!0),n=t[ot];for(this[x]=this[D]=0;--n>-1;)t[n][N](!1,!1);return e!==!1&&(this[St]={}),this[y](!0)},f[g]=function(){for(var e=this[lt];e;)e[g](),e=e[O];return this},f[N]=function(e,n){if(e===this._gc)for(var i=this[lt];i;)i[N](e,!0),i=i[O];return t[h][N][r](this,e,n)},f[gt]=function(e){return arguments[ot]?this[dt](this[yt]()*e,!1):this[x]/this[yt]()},f[yt]=function(e){return arguments[ot]?(0!==this[yt]()&&0!==e&&this.timeScale(this[L]/e),this):(this[c]&&this[M](),this[L])},f[M]=function(e){if(!arguments[ot]){if(this[c]){for(var t,n,r=0,i=this[lt],s=-999999999999;i;)t=i[O],s>i[S]&&this[Tt]?this.add(i,i[S]-i._delay):s=i[S],0>i[S]&&(r-=i[S],this[jt](-i[S],!1,-9999999999)),n=i[S]+(i[c]?i[M]():i[_])/i[At],n>r&&(r=n),i=t;this[L]=this[_]=r,this[c]=!1}return this[_]}return 0!==this[M]()&&0!==e&&this.timeScale(this[_]/e),this},f.usesFrames=function(){for(var t=this[T];t[T];)t=t[T];return t===e[ht]},f.rawTime=function(){return this[V]||0!==this[D]&&this[D]!==this[_]?this[D]:(this[T].rawTime()-this[S])*this[At]},i},!0),_gsDefine("TimelineMax",[Et,n,It],function(e,t,n){var b=function(t){e[r](this,t),this[u]=this[o][a]||0,this[f]=this[o][l]||0,this[i]=0,this[s]=this[o].yoyo===!0,this[c]=!0},E=[],k=new n(w,w,1,0),P=function(e){for(;e;){if(e[V])return!0;e=e[T]}return!1},H=b[h]=new e;return H[v]=b,H.kill()._gc=!1,b[p]=d,H[g]=function(){return this[s]=this[o].yoyo===!0,this[u]=this[o][a]||0,this[f]=this[o][l]||0,this[y](!0),e[h][g][r](this)},H.addCallback=function(e,n,r,i){return this.add(t[ft](0,e,r,i),n)},H.removeCallback=function(e,t){if(w==t)this[Ft](w,e);else for(var n=this[m](e,!1),r=n[ot],i=this[Ct](t);--r>-1;)n[r][S]===i&&n[r][N](!1,!1);return this},H.tweenTo=function(e,n){n=n||{};var r,i,s={ease:k,overwrite:2,useFrames:this.usesFrames(),immediateRender:!1};for(r in n)s[r]=n[r];return s[wt]=this[Ct](e),i=new t(this,Math.abs(Number(s[wt])-this[x])/this[At]||.001,s),s[$]=function(){i[pt].paused(!0),i[o][wt]!==i[pt][wt]()&&i[yt](Math.abs(i[o][wt]-i[pt][wt]())/i[pt][At]),n[$]&&n[$][z](n[J]||i,n[K]||E)},i},H.tweenFromTo=function(e,t,n){n=n||{},n[it]={time:this[Ct](e)};var r=this.tweenTo(t,n);return r[yt](Math.abs(r[o][wt]-r[o][it][wt])/this[At]||.001)},H[A]=function(e,t,n){this._gc&&this[N](!0,!1),this[R]=!this[V];var r,a,l,h,p=this[c]?this[M]():this[_],d=this[x],v=this[D],m=this[S],g=this[At],y=this[I],b=this[V],w=this[i];if(e>=p)this[qt]||(this[D]=p,this[i]=this[u]),this[j]||this[Pt]()||(a=!0,h=F,0===this[L]&&(0===e||0>this[I])&&this[I]!==e&&(n=!0)),this[I]=e,this[s]&&0!==(1&this[i])?(this[x]=0,e=-0.000001):(this[x]=this[L],e=this[L]+1e-6);else if(0>=e)this[qt]||(this[D]=this[i]=0),this[x]=0,(0!==d||0===this[L]&&this[I]>0&&!this[qt])&&(h=q,a=this[j]),0>e?(this[R]=!1,0===this[L]&&this[I]>=0&&(n=!0)):this[C]||(n=!0),this[I]=e,e=0===this[L]?0:-0.000001;else if(this[x]=this[I]=e,!this[qt]&&(this[D]=e,0!==this[u])){var k=this[L]+this[f];this[i]=this[D]/k>>0,0!==this[i]&&this[i]===this[D]/k&&this[i]--,this[x]=this[D]-this[i]*k,this[s]&&0!==(1&this[i])&&(this[x]=this[L]-this[x]),this[x]>this[L]?(this[x]=this[L],e=this[L]+1e-6):0>this[x]?this[x]=e=0:e=this[x]}if(this[i]!==w&&!this[qt]){var P=this[s]&&0!==(1&w),H=P===(this[s]&&0!==(1&this[i])),B=this[D],nt=this[i],rt=this[I],it=this[x];this[D]=w*this[L],w>this[i]?P=!P:this[D]+=this[L],this[x]=d,this[I]=0===this[L]?y-1e-5:y,this[i]=w,this[qt]=!0,d=P?0:this[L],this[A](d,t,0===this[L]),t||this._gc||this[o][Q]&&this[o][Q][z](this[o][G]||this,this[o][Y]||E),H&&(d=P?this[L]+1e-6:-0.000001,this[A](d,!0,!1)),this[x]=it,this[D]=B,this[i]=nt,this[I]=rt,this[qt]=!1}if(this[x]===d&&!n)return v!==this[D]&&this[U]&&(t||this[U][z](this[o][W]||this,this[o][X]||E)),void 0;if(this[C]||(this[C]=!0),0===v&&this[o][$]&&0!==this[D]&&(t||this[o][$][z](this[o][J]||this,this[o][K]||E)),this[x]>d)for(r=this[lt];r&&(l=r[O],!this[V]||b);)(r[R]||r[S]<=this[x]&&!r[V]&&!r._gc)&&(r[j]?r[A]((r[c]?r[M]():r[_])-(e-r[S])*r[At],t,!1):r[A]((e-r[S])*r[At],t,!1)),r=l;else for(r=this._last;r&&(l=r[Ht],!this[V]||b);)(r[R]||d>=r[S]&&!r[V]&&!r._gc)&&(r[j]?r[A]((r[c]?r[M]():r[_])-(e-r[S])*r[At],t,!1):r[A]((e-r[S])*r[At],t,!1)),r=l;this[U]&&(t||this[U][z](this[o][W]||this,this[o][X]||E)),h&&(this[qt]||this._gc||(m===this[S]||g!==this[At])&&(0===this[x]||p>=this[M]())&&(a&&(this[T][Z]&&this[N](!1,!1),this[R]=!1),t||this[o][h]&&this[o][h][z](this[o][h+et]||this,this[o][h+tt]||E)))},H.getActive=function(e,t,n){w==e&&(e=!0),w==t&&(t=!0),w==n&&(n=!1);var r,i,s=[],o=this[Bt](e,t,n),u=0,a=o[ot];for(r=0;a>r;r++)i=o[r],i[V]||i[T][x]>=i[S]&&i[T][x]<i[S]+i[_]/i[At]&&(P(i[T])||(s[u++]=i));return s},H.getLabelAfter=function(e){e||0!==e&&(e=this[x]);var t,n=this[Rt](),r=n[ot];for(t=0;r>t;t++)if(n[t][wt]>e)return n[t].name;return w},H[Ut]=function(e){w==e&&(e=this[x]);for(var t=this[Rt](),n=t[ot];--n>-1;)if(e>t[n][wt])return t[n].name;return w},H[Rt]=function(){var e,t=[],n=0;for(e in this[St])t[n++]={time:this[St][e],name:e};return t.sort(function(e,t){return e[wt]-t[wt]}),t},H[gt]=function(e){return arguments[ot]?this[dt](this[yt]()*(this[s]&&0!==(1&this[i])?1-e:e)+this[i]*(this[L]+this[f]),!1):this[x]/this[yt]()},H[bt]=function(e){return arguments[ot]?this[dt](this[M]()*e,!1):this[D]/this[M
]()},H[M]=function(t){return arguments[ot]?-1===this[u]?this:this[yt]((t-this[u]*this[f])/(this[u]+1)):(this[c]&&(e[h][M][r](this),this[_]=-1===this[u]?999999999999:this[L]*(this[u]+1)+this[f]*this[u]),this[_])},H[wt]=function(e,t){return arguments[ot]?(this[c]&&this[M](),e>this[L]&&(e=this[L]),this[s]&&0!==(1&this[i])?e=this[L]-e+this[i]*(this[L]+this[f]):0!==this[u]&&(e+=this[i]*(this[L]+this[f])),this[dt](e,t)):this[x]},H[a]=function(e){return arguments[ot]?(this[u]=e,this[y](!0)):this[u]},H[l]=function(e){return arguments[ot]?(this[f]=e,this[y](!0)):this[f]},H.yoyo=function(e){return arguments[ot]?(this[s]=e,this):this[s]},H.currentLabel=function(e){return arguments[ot]?this.seek(e,!0):this[Ut](this[x]+1e-8)},b},!0),_gsDefine("plugins.BezierPlugin",[zt],function(e){var t=function(){e[r](this,Wt,-1),this[Xt].pop(),this._func={},this._round={}},n=t[h]=new e(Wt,1),i=180/Math.PI,s=Math.PI/180,u=[],a=[],f=[],l={},c=function(t,n,r,i){this.a=t,this.b=n,this.c=r,this.d=i,this.da=i-t,this.ca=r-t,this.ba=n-t},p=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",d=t[Vt]=function(e,t,n,r,i,s){var o,c,h,d,v,m,b,E,S={},x=[],T=s||e[0];i=kt==typeof i?$t+i+$t:p,w==t&&(t=1);for(c in e[0])x.push(c);if(e[ot]>1){for(E=e[e[ot]-1],b=!0,o=x[ot];--o>-1;)if(c=x[o],Math.abs(T[c]-E[c])>.05){b=!1;break}b&&(e=e[ct](),s&&e.unshift(s),e.push(e[1]),s=e[e[ot]-3])}for(u[ot]=a[ot]=f[ot]=0,o=x[ot];--o>-1;)c=x[o],l[c]=-1!==i[Ot]($t+c+$t),S[c]=g(e,c,l[c],s);for(o=u[ot];--o>-1;)u[o]=Math[Jt](u[o]),a[o]=Math[Jt](a[o]);if(!r){for(o=x[ot];--o>-1;)if(l[c])for(h=S[x[o]],m=h[ot]-1,d=0;m>d;d++)v=h[d+1].da/a[d]+h[d].da/u[d],f[d]=(f[d]||0)+v*v;for(o=f[ot];--o>-1;)f[o]=Math[Jt](f[o])}for(o=x[ot],d=n?4:1;--o>-1;)c=x[o],h=S[c],y(h,t,n,r,l[c]),b&&(h[Kt](0,d),h[Kt](h[ot]-d,d));return S},m=function(e,t,n){t=t||Qt;var r,i,s,o,u,a,f,l,h,p,d,v={},m="cubic"===t?3:2,g=Qt===t,y=[];if(g&&n&&(e=[n][ct](e)),w==e||m+1>e[ot])throw"invalid Bezier data";for(h in e[0])y.push(h);for(a=y[ot];--a>-1;){for(h=y[a],v[h]=u=[],p=0,l=e[ot],f=0;l>f;f++)r=w==n?e[f][h]:kt==typeof (d=e[f][h])&&Mt===d[_t](1)?n[h]+Number(d[_t](0)+d[Dt](2)):Number(d),g&&f>1&&l-1>f&&(u[p++]=(r+u[p-2])/2),u[p++]=r;for(l=p-m+1,p=0,f=0;l>f;f+=m)r=u[f],i=u[f+1],s=u[f+2],o=2===m?0:u[f+3],u[p++]=d=3===m?new c(r,i,s,o):new c(r,(2*i+r)/3,(2*i+s)/3,s);u[ot]=p}return v},g=function(e,t,n,r){var i,s,o,f,l,h,p=[];if(r)for(e=[r][ct](e),s=e[ot];--s>-1;)kt==typeof (h=e[s][t])&&Mt===h[_t](1)&&(e[s][t]=r[t]+Number(h[_t](0)+h[Dt](2)));if(i=e[ot]-2,0>i)return p[0]=new c(e[0][t],0,0,e[-1>i?0:1][t]),p;for(s=0;i>s;s++)o=e[s][t],f=e[s+1][t],p[s]=new c(o,0,0,f),n&&(l=e[s+2][t],u[s]=(u[s]||0)+(f-o)*(f-o),a[s]=(a[s]||0)+(l-f)*(l-f));return p[s]=new c(e[s][t],0,0,e[s+1][t]),p},y=function(e,t,n,r,i){var s,o,l,c,h,p,d,v,m,g,y,w,E,S=e[ot]-1,x=0,T=e[0].a;for(s=0;S>s;s++)h=e[x],o=h.a,l=h.d,c=e[x+1].d,i?(y=u[s],w=a[s],E=.25*(w+y)*t/(r?.5:f[s]||.5),p=l-(l-o)*(r?.5*t:E/y),d=l+(c-l)*(r?.5*t:E/w),v=l-(p+(d-p)*(3*y/(y+w)+.5)/4)):(p=l-.5*(l-o)*t,d=l+.5*(c-l)*t,v=l-(p+d)/2),p+=v,d+=v,h.c=m=p,h.b=0!==s?T:T=h.a+.6*(h.c-h.a),h.da=l-o,h.ca=m-o,h.ba=T-o,n?(g=b(o,T,m,l),e[Kt](x,1,g[0],g[1],g[2],g[3]),x+=4):x++,T=d;h=e[x],h.b=T,h.c=T+.4*(h.d-T),h.da=h.d-h.a,h.ca=h.c-h.a,h.ba=T-h.a,n&&(g=b(h.a,T,h.c,h.d),e[Kt](x,1,g[0],g[1],g[2],g[3]))},b=t.cubicToQuadratic=function(e,t,n,r){var i={a:e},s={},o={},u={c:r},a=(e+t)/2,f=(t+n)/2,l=(n+r)/2,c=(a+f)/2,h=(f+l)/2,p=(h-c)/8;return i.b=a+(e-a)/4,s.b=c+p,i.c=s.a=(i.b+s.b)/2,s.c=o.a=(c+h)/2,o.b=h-p,u.b=l+(r-l)/4,o.c=u.a=(o.b+u.b)/2,[i,s,o,u]},E=function(e,t){t=t>>0||6;var n,r,i,s,o=[],u=[],a=0,f=0,l=t-1,c=[],h=[];for(n in e)S(e[n],o,t);for(i=o[ot],r=0;i>r;r++)a+=Math[Jt](o[r]),s=r%t,h[s]=a,s===l&&(f+=a,s=r/t>>0,c[s]=h,u[s]=f,a=0,h=[]);return{length:f,lengths:u,segments:c}},S=function(e,t,n){for(var r,i,s,o,u,a,f,l,c,h,p,d=1/n,v=e[ot];--v>-1;)for(h=e[v],s=h.a,o=h.d-s,u=h.c-s,a=h.b-s,r=i=0,l=1;n>=l;l++)f=d*l,c=1-f,r=i-(i=(f*f*o+3*c*(f*u+c*a))*f),p=v*n+l-1,t[p]=(t[p]||0)+r*r};return n[v]=t,t.API=2,t._autoCSS=!0,t.quadraticToCubic=function(e,t,n){return new c(e,(2*t+e)/3,(2*t+n)/3,n)},t._cssRegister=function(){var e=(window[Yt]||window).com[Gt].plugins.CSSPlugin;if(e){var n=e._internals,r=n[Zt],i=n[en],o=n.CSSPropTween;n[tn](Wt,w,function(e,n,u,a,f,l){n instanceof Array&&(n={values:n}),l=new t;var c,h,p,d=n.values,v=d[ot]-1,m=[],g={};if(0>v)return f;for(c=0;v>=c;c++)p=r(e,d[c],a,f,l,v!==c),m[c]=p.end;for(h in n)g[h]=n[h];return g.values=m,f=new o(e,Wt,0,0,p.pt,2),f[nn]=p,f[rn]=l,f[sn]=i,0===g[on]&&(g[on]=!0),g[on]&&(g[on]instanceof Array||(c=g[on]===!0?0:Number(g[on])*s,g[on]=w!=p.end.left?[["left",un,an,c,!0]]:w!=p.end.x?[["x","y",an,c,!0]]:!1)),g[on]&&(a[fn]||a[ln](!1),p[on]=a[hn][cn]),l[pn](p.proxy,g,a[dn]),f})}},n[pn]=function(e,t,n){this[hn]=e,t instanceof Array&&(t={values:t}),this[vn]=[],this[mn]=w==t[gn]?6:parseInt(t[gn],10);var r,i,s,u,a,f=t.values||[],l={},c=f[0],h=t[on]||n[o].orientToBezier;this[yn]=h?h instanceof Array?h:[["x","y",an,h===!0?0:Number(h)||0]]:w;for(r in c)this[vn].push(r);for(s=this[vn][ot];--s>-1;)r=this[vn][s],this[Xt].push(r),i=this._func[r]=Lt==typeof e[r],l[r]=i?e[r[Ot]("set")||Lt!=typeof e[bn+r[Dt](3)]?r:bn+r[Dt](3)]():parseFloat(e[r]),a||l[r]!==f[0][r]&&(a=l);if(this[wn]="cubic"!==t[En]&&"quadratic"!==t[En]&&Qt!==t[En]?d(f,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t[En],t.correlate,a):m(f,t[En],l),this._segCount=this[wn][r][ot],this[mn]){var p=E(this[wn],this[mn]);this._length=p[ot],this[Sn]=p.lengths,this[xn]=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this[Sn][0],this[Tn]=this[xn][0],this._s2=this[Tn][0],this._prec=1/this[Tn][ot]}if(h=this[yn])for(h[0]instanceof Array||(this[yn]=h=[h]),s=h[ot];--s>-1;)for(u=0;3>u;u++)r=h[s][u],this._func[r]=Lt==typeof e[r]?e[r[Ot]("set")||Lt!=typeof e[bn+r[Dt](3)]?r:bn+r[Dt](3)]:!1;return!0},n[sn]=function(e){var t,n,s,o,u,a,f,l,c,h,p=this._segCount,d=this._func,v=this[hn];if(this[mn]){if(c=this[Sn],h=this[Tn],e*=this._length,s=this._li,e>this._l2&&p-1>s){for(l=p-1;l>s&&e>=(this._l2=c[++s]););this._l1=c[s-1],this._li=s,this[Tn]=h=this[xn][s],this._s2=h[this._s1=this._si=0]}else if(this._l1>e&&s>0){for(;s>0&&(this._l1=c[--s])>=e;);0===s&&this._l1>e?this._l1=0:s++,this._l2=c[s],this._li=s,this[Tn]=h=this[xn][s],this._s1=h[(this._si=h[ot]-1)-1]||0,this._s2=h[this._si]}if(t=s,e-=this._l1,s=this._si,e>this._s2&&h[ot]-1>s){for(l=h[ot]-1;l>s&&e>=(this._s2=h[++s]););this._s1=h[s-1],this._si=s}else if(this._s1>e&&s>0){for(;s>0&&(this._s1=h[--s])>=e;);0===s&&this._s1>e?this._s1=0:s++,this._s2=h[s],this._si=s}a=(s+(e-this._s1)/(this._s2-this._s1))*this._prec}else t=0>e?0:e>=1?p-1:p*e>>0,a=(e-t*(1/p))*p;for(n=1-a,s=this[vn][ot];--s>-1;)o=this[vn][s],u=this[wn][o][t],f=(a*a*u.da+3*n*(a*u.ca+n*u.ba))*a+u.a,this._round[o]&&(f=f+(f>0?.5:-0.5)>>0),d[o]?v[o](f):v[o]=f;if(this[yn]){var m,g,y,b,w,E,S,x=this[yn];for(s=x[ot];--s>-1;)o=x[s][2],E=x[s][3]||0,S=x[s][4]===!0?1:i,u=this[wn][x[s][0]][t],m=this[wn][x[s][1]][t],g=u.a+(u.b-u.a)*a,b=u.b+(u.c-u.b)*a,g+=(b-g)*a,b+=(u.c+(u.d-u.c)*a-b)*a,y=m.a+(m.b-m.a)*a,w=m.b+(m.c-m.b)*a,y+=(w-y)*a,w+=(m.c+(m.d-m.c)*a-w)*a,f=Math[Nn](w-y,b-g)*S+E,d[o]?d[o][r](v,f):v[o]=f}},n._roundProps=function(e,t){for(var n=this[Xt],r=n[ot];--r>-1;)(e[n[r]]||e[Wt]||e[Vt])&&(this._round[n[r]]=t)},n[Ft]=function(t){var n,i,s=this[vn];for(n in this[wn])if(n in t)for(delete this[wn][n],delete this._func[n],i=s[ot];--i>-1;)s[i]===n&&s[Kt](i,1);return e[h][Ft][r](this,t)},e[Cn]([t]),t},!0),_gsDefine("plugins.CSSPlugin",[zt,n],function(e){"use strict";var t,n,i,s,o=function(){e[r](this,"css"),this[Xt][ot]=0},u={},a=o[h]=new e("css");a[v]=o,o[p]=d,o.API=2,o[kn]=0,a=Ln,o[An]={top:a,right:a,bottom:a,left:a,width:a,height:a,fontSize:a,padding:a,margin:a,perspective:a};var f,l,c,m,g,y,b=/(?:\d|\-\d|\.\d|\-\.\d)+/g,E=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,S=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,T=/[^\d\-\.]/g,N=/(?:\d|\-|\+|=|#|\.)*/g,C=/opacity *= *([^)]*)/,A=/opacity:([^;]*)/,M=/alpha\(opacity *=.+?\)/i,_=/([A-Z])/g,D=/-([a-z])/gi,P=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,H=function(e,t){return t[On]()},B=/(?:Left|Right|Width)/i,j=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,F=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,q=Math.PI/180,R=180/Math.PI,U={},z=document,W=z[Mn]("div"),X=z[Mn]("img"),V=o._internals={_specialProps:u},$=navigator.userAgent,J=function(){var e,t=$[Ot]("Android"),n=z[Mn]("div");return c=-1!==$[Ot]("Safari")&&-1===$[Ot]("Chrome")&&(-1===t||Number($[Dt](t+8,1))>3),g=c&&6>Number($[Dt]($[Ot]("Version/")+8,1)),m=-1!==$[Ot]("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec($),y=parseFloat(RegExp.$1),n.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",e=n.getElementsByTagName("a")[0],e?/^0.55/.test(e[Dn][_n]):!1}(),K=function(e){return C.test(kt==typeof e?e:(e[Pn]?e[Pn][Hn]:e[Dn][Hn])||"")?parseFloat(RegExp.$1)/100:1},Q=function(e){window.console&&console.log(e)},G="",Y="",Z=function(e,t){t=t||W;var n,r,i=t[Dn];if(void 0!==i[e])return e;for(e=e[_t](0)[On]()+e[Dt](1),n=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===i[n[r]+e];);return r>=0?(Y=3===r?"ms":n[r],G="-"+Y[Bn]()+"-",Y+e):w},et=z.defaultView?z.defaultView.getComputedStyle:function(){},tt=o.getStyle=function(e,t,n,r,i){var s;return J||_n!==t?(!r&&e[Dn][t]?s=e[Dn][t]:(n=n||et(e,w))?(e=n[jn](t[Fn](_,"-$1")[Bn]()),s=e||n[ot]?e:n[t]):e[Pn]&&(n=e[Pn],s=n[t]),w==i||s&&In!==s&&qn!==s&&Rn!==s?s:i):K(e)},nt=function(e,t,n){var r,i,s={},o=e[Un];if(o&&!n){for(;o;)o[sn](0),o=o[O];e[Un]=w}if(t=t||et(e,w))if(r=t[ot])for(;--r>-1;)s[t[r][Fn](D,H)]=t[jn](t[r]);else for(r in t)s[r]=t[r];else if(t=e[Pn]||e[Dn])for(r in t)s[r[Fn](D,H)]=t[r];return J||(s[_n]=K(e)),i=qt(e,t,!1),s[an]=i[an]*R,s[zn]=i[zn]*R,s[Wn]=i[Wn],s[Xn]=i[Xn],s.x=i.x,s.y=i.y,It&&(s.z=i.z,s[Vn]=i[Vn]*R,s[$n]=i[$n]*R,s[Jn]=i[Jn]),s.filters&&delete s.filters,s},rt=function(e,t,n,r){var i,s,o,u={},a=e[Dn];for(s in n)Kn!==s&&ot!==s&&isNaN(s)&&t[s]!==(i=n[s])&&-1===s[Ot]("Origin")&&(Nt==typeof i||kt==typeof i)&&(u[s]=""!==i&&qn!==i&&In!==i||kt!=typeof t[s]||""===t[s][Fn](T,"")?i:0,void 0!==a[s]&&(o=new wt(a,s,a[s],o)));if(r)for(s in r)Qn!==s&&(u[s]=r[s]);return{difs:u,firstMPT:o}},it={width:["Left","Right"],height:["Top","Bottom"]},st=["marginLeft","marginRight","marginTop","marginBottom"],ut=function(e,t,n){var r=parseFloat(Gn===t?e[Yn]:e[Zn]),i=it[t],s=i[ot];for(n=n||et(e,w);--s>-1;)r-=parseFloat(tt(e,er+i[s],n,!0))||0,r-=parseFloat(tt(e,tr+i[s]+"Width",n,!0))||0;return r},at=function(e,t,n,r,i){if(Ln===r||!r)return n;if(qn===r||!n)return 0;var s,o=B.test(t),u=e,a=W[Dn],f=0>n;return f&&(n=-n),nr===r&&-1!==t[Ot](tr)?s=n/100*(o?e.clientWidth:e.clientHeight):(a[Kn]="border-style:solid; border-width:0; position:absolute; line-height:0;",nr!==r&&rr!==r&&u.appendChild?a[o?"borderLeftWidth":ir]=n+r:(u=e[mt]||z.body,a[o?Gn:sr]=n+r),u.appendChild(W),s=parseFloat(W[o?Yn:Zn]),u.removeChild(W),0!==s||i||(s=at(e,t,n,r,!0))),f?-s:s},ft=function(e,t){(w==e||""===e||qn===e||Rn===e)&&(e=or);var n=e[ur](ar),r=-1!==e[Ot]("left")?"0%":-1!==e[Ot]("right")?"100%":n[0],i=-1!==e[Ot](un)?"0%":-1!==e[Ot]("bottom")?"100%":n[1];return w==i?i="0":"center"===i&&(i="50%"),("center"===r||isNaN(parseFloat(r)))&&(r="50%"),t&&(t.oxp=-1!==r[Ot](nr),t.oyp=-1!==i[Ot](nr),t.oxr=Mt===r[_t](1),t.oyr=Mt===i[_t](1),t.ox=parseFloat(r[Fn](T,"")),t.oy=parseFloat(i[Fn](T,""))),r+ar+i+(n[ot]>2?ar+n[2]:"")},lt=function(e,t){return kt==typeof e&&Mt===e[_t](1)?parseInt(e[_t](0)+"1",10)*parseFloat(e[Dt](2)):parseFloat(e)-parseFloat(t)},ct=function(e,t){return w==e?t:kt==typeof e&&Mt===e[_t](1)?parseInt(e[_t](0)+"1",10)*Number(e[Dt](2))+t:parseFloat(e)},ht=function(e,t){if(w==e)return t;var n=-1===e[Ot]("rad")?q:1,r=Mt===e[_t](1);return e=Number(e[Fn](T,""))*n,r?e+t:e},pt=function(e,t){var n=Nt==typeof e?e*q:ht(e,t),r=(n-t)%(2*Math.PI);return r!==r%Math.PI&&(r+=Math.PI*(0>r?2:-2)),t+r},dt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},vt=function(e){if(!e||""===e)return dt.black;if(dt[e])return dt[e];if(Nt==typeof e)return[e>>16,255&e>>8,255&e];if("#"===e[_t](0)){if(4===e[ot]){var t=e[_t](1),n=e[_t](2),r=e[_t](3);e="#"+t+t+n+n+r+r}return e=parseInt(e[Dt](1),16),[e>>16,255&e>>8,255&e]}return e=e[fr](b)||dt[lr],e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2]),e[ot]>3&&(e[3]=Number(e[3])),e},gt="(?:\\b(?:(?:rgb|rgba)\\(.+?\\))|\\B#.+?\\b";for(a in dt)gt+="|"+a+"\\b";gt=RegExp(gt+cr,"gi");var yt=function(e,t,n){if(w==e)return function(e){return e};var r=t?(e[fr](gt)||[""])[0]:"",i=e[ur](r).join("")[fr](S)||[],s=e[Dt](0,e[Ot](i[0])),o=cr===e[_t](e[ot]-1)?cr:"",u=-1!==e[Ot](ar)?ar:$t,a=i[ot],f=a>0?i[0][Fn](b,""):"";return t?function(e){Nt==typeof e&&(e+=f);var t=(e[fr](gt)||[r])[0],l=e[ur](t).join("")[fr](S)||[],c=l[ot];if(a>c--)for(;a>++c;)l[c]=n?l[(c-1)/2>>0]:i[c];return s+l.join(u)+u+t+o}:function(e){Nt==typeof e&&(e+=f);var t=e[fr](S)||[],r=t[ot];if(a>r--)for(;a>++r;)t[r]=n?t[(r-1)/2>>0]:i[r];return s+t.join(u)+o}},bt=function(e){return e=e[ur]($t),function(t,n,r,i,s,o,u){var a,f=(n+"")[ur](ar);for(u={},a=0;4>a;a++)u[e[a]]=f[a]=f[a]||f[(a-1)/2>>0];return i[hr](t,u,s,o)}},wt=(V[en]=function(e){this[rn][sn](e);for(var t,n,r,i,s=this[nn],o=s.proxy,u=s[pr],a=1e-6;u;)t=o[u.v],u.r?t=t>0?t+.5>>0:t-.5>>0:a>t&&t>-a&&(t=0),u.t[u.p]=t,u=u[O];if(s[on]&&(s[on][an]=o[an]),1===e)for(u=s[pr];u;){if(n=u.t,n[En]){if(1===n[En]){for(i=n.xs0+n.s+n.xs1,r=1;n.l>r;r++)i+=n[dr+r]+n[vr+(r+1)];n.e=i}}else n.e=n.s+n.xs0;u=u[O]}},function(e,t,n,r,i){this.t=e,this.p=t,this.v=n,this.r=i,r&&(r[Ht]=this,this[O]=r)}),Et=(V[Zt]=function(e,t,n,r,i,s){var o,u,a,f,l,c=r,h={},p={},d=n[fn],v=U;for(n[fn]=w,U=t,r=l=n[hr](e,t,r,i),U=v,s&&(n[fn]=d,c&&(c[Ht]=w,c[Ht]&&(c[Ht][O]=w)));r&&r!==c;){if(1>=r[En]&&(u=r.p,p[u]=r.s+r.c,h[u]=r.s,s||(f=new wt(r,"s",u,f,r.r),r.c=0),1===r[En]))for(o=r.l;--o>0;)a=dr+o,u=r.p+"_"+a,p[u]=r[nn][a],h[u]=r[a],s||(f=new wt(r,a,u,f,r.rxp[a]));r=r[O]}return{proxy:h,end:p,firstMPT:f,pt:l}},V.CSSPropTween=function(e,n,r,i,o,u,a,f,l,c,h){this.t=e,this.p=n,this.s=r,this.c=i,this.n=a||mr+n,e instanceof Et||s.push(this.n),this.r=f,this[En]=u||0,l&&(this.pr=l,t=!0),this.b=void 0===c?r:c,this.e=void 0===h?r+i:h,o&&(this[O]=o,o[Ht]=this)}),St=o[gr]=function(e,t,n,r,i,s,o,u,a,l){o=new Et(e,t,0,0,o,l?2:1,w,!1,u,n,r);var c,h,p,d,v,m,g,y,S,x,T,N,C=n[ur](", ").join($t)[ur](ar),k=(r+"")[ur](", ").join($t)[ur](ar),L=C[ot],A=f!==!1;for(L!==k[ot]&&(C=(s||"")[ur](ar),L=C[ot]),o[rn]=a,o[sn]=l,c=0;L>c;c++)if(d=C[c],v=k[c],y=parseFloat(d),y||0===y)o[yr]("",y,lt(v,y),v[Fn](E,""),A&&-1!==v[Ot](Ln),!0);else if(i&&("#"===d[_t](0)||0===d[Ot]("rgb")||dt[d]))d=vt(d),v=vt(v),S=d[ot]+v[ot]>6,S&&!J&&0===v[3]?(o[vr+o.l]+=o.l?" transparent":lr,o.e=o.e[ur](k[c]).join(lr)):(J||(S=!1),o[yr](S?"rgba(":"rgb(",d[0],v[0]-d[0],$t,!0,!0)[yr]("",d[1],v[1]-d[1],$t,!0)[yr]("",d[2],v[2]-d[2],S?$t:cr,!0),S&&(d=4>d[ot]?1:d[3],o[yr]("",d,(4>v[ot]?1:v[3])-d,cr,!1)));else if(m=d[fr](b)){if(g=v[fr](E),!g||g[ot]!==m[ot])return o;for(p=0,h=0;m[ot]>h;h++)T=m[h],x=d[Ot](T,p),o[yr](d[Dt](p,x-p),Number(T),lt(g[h],T),"",A&&Ln===d[Dt](x+T[ot],2),0===h),p=x+T[ot];o[vr+o.l]+=d[Dt](p)}else o[vr+o.l]+=o.l?ar+d:d;if(-1!==r[Ot](Mt)&&o[nn]){for(N=o.xs0+o[nn].s,c=1;o.l>c;c++)N+=o[vr+c]+o[nn][dr+c];o.e=N+o[vr+c]}return o.l||(o[En]=-1,o.xs0=o.e),o[br]||o},xt=9;for(a=Et[h],a.l=a.pr=0;--xt>0;)a[dr+xt]=0,a[vr+xt]="";a.xs0="",a[O]=a[Ht]=a[br]=a[nn]=a[rn]=a[sn]=a.rxp=w,a[yr]=function(e,t,n,r,i,s){var o=this,u=o.l;return o[vr+u]+=s&&u?ar+e:e||"",n||0===u||o[rn]?(o.l++,o[En]=o[sn]?2:1,o[vr+o.l]=r||"",u>0?(o[nn][dr+u]=t+n,o.rxp[dr+u]=i,o[dr+u]=t,o[rn]||(o[br]=new Et(o,dr+u,t,n,o[br]||o,0,o.n,i,o.pr),o[br].xs0=0),o):(o[nn]={s:t+n},o.rxp={},o.s=t,o.c=n,o.r=i,o)):(o[vr+u]+=t+(r||""),o)};var Tt=function(e,t,n,r,i,s,o){this.p=r?Z(e)||e:e,u[e]=u[this.p]=this,this[wr]=s||yt(t,i),n&&(this[hr]=n),this.clrs=i,this.dflt=t,this.pr=o||0},Ct=V[tn]=function(e,t,n,r,i,s,o){for(var u,a=e[ur]($t),f=t instanceof Array?t:[t],l=a[ot];--l>-1;)u=new Tt(a[l],f[l],n,r&&0===l,i,s,o)},Lt=function(e){if(!u[e]){var t=e[_t](0)[On]()+e[Dt](1)+"Plugin";Ct(e,w,function(e,n,r,i,s,o,a){var f=(window[Yt]||window).com[Gt].plugins[t];return f?(f._cssRegister(),u[r][hr](e,n,r,i,s,o,a)):(Q("Error: "+t+" js file not loaded."),s)})}};a=Tt[h],a[gr]=function(e,t,n,r,i,s){return St(e,this.p,t,n,this.clrs,this.dflt,r,this.pr,i,s)},a[hr]=function(e,t,n,r,s,o){return this[gr](e[Dn],this[wr](tt(e,n,i,!1,this.dflt)),this[wr](t),s,o)},o.registerSpecialProp=function(e,t,n){Ct(e,w,function(e,r,i,s,o,u){var a=new Et(e,i,0,0,o,2,i,!1,n);return a[rn]=u,a[sn]=t(e,r,s[dn],i),a},!1,!1,w,n)};var At=[Wn,Xn,Jn,"x","y","z",zn,an,Vn,$n,Er],Pt=Z(Sr),Bt=G+Sr,jt=Z(xr),It=w!==Z(Er),qt=function(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v,m=n?e[cn]||{skewY:0}:{skewY:0},g=0>m[Wn],y=2e-5,b=1e5,E=-Math.PI+1e-4,S=Math.PI-1e-4,x=It?parseFloat(tt(e,jt,t,!1,"0 0 0")[ur](ar)[2])||m[Tr]||0:0;for(Pt?r=tt(e,Bt,t,!0):e[Pn]&&(r=e[Pn][Hn][fr](j),r=r&&4===r[ot]?r[0][Dt](4)+$t+Number(r[2][Dt](4))+$t+Number(r[1][Dt](4))+$t+r[3][Dt](4)+$t+(m?m.x:0)+$t+(m?m.y:0):w),i=(r||"")[fr](/(?:\-|\b)[\d\-\.e]+\b/gi)||[],s=i[ot];--s>-1;)u=Number(i[s]),i[s]=(u*b+(0>u?-0.5:.5)>>0)/b;if(16===i[ot]){var T=i[8],N=i[9],C=i[10],k=i[12],L=i[13],A=i[14];if(m[Tr]&&(A=-m[Tr],k=T*A-i[12],L=N*A-i[13],A=C*A+m[Tr]-i[14]),!n||k!==m.x||L!==m.y||A!==m.z){var O,M,_,D,P,H,B,F,I=i[0],q=i[1],R=i[2],U=i[3],z=i[4],W=i[5],X=i[6],V=i[7],$=i[11],J=m[Vn]=Math[Nn](X,C),K=E>J||J>S;J&&(P=Math.cos(-J),H=Math.sin(-J),O=z*P+T*H,M=W*P+N*H,_=X*P+C*H,D=V*P+$*H,T=z*-H+T*P,N=W*-H+N*P,C=X*-H+C*P,$=V*-H+$*P,z=O,W=M,X=_),J=m[$n]=Math[Nn](T,I),J&&(B=E>J||J>S,P=Math.cos(-J),H=Math.sin(-J),O=I*P-T*H,M=q*P-N*H,_=R*P-C*H,D=U*P-$*H,N=q*H+N*P,C=R*H+C*P,$=U*H+$*P,I=O,q=M,R=_),J=m[an]=Math[Nn](q,W),J&&(F=E>J||J>S,P=Math.cos(-J),H=Math.sin(-J),I=I*P+z*H,M=q*P+W*H,W=q*-H+W*P,X=R*-H+X*P,q=M),F&&K?m[an]=m[Vn]=0:F&&B?m[an]=m[$n]=0:B&&K&&(m[$n]=m[Vn]=0),m[Wn]=(Math[Jt](I*I+q*q)*b+.5>>0)/b,m[Xn]=(Math[Jt](W*W+N*N)*b+.5>>0)/b,m[Jn]=(Math[Jt](X*X+C*C)*b+.5>>0)/b,m[zn]=0,m[Er]=$?1/$:0,m.x=k,m.y=L,m.z=A}}else if(!It||0===i[ot]||m.x!==i[4]||m.y!==i[5]||!m[Vn]&&!m[$n]){var Q=i[ot]>=6,G=Q?i[0]:1,Y=i[1]||0,Z=i[2]||0,et=Q?i[3]:1;m.x=i[4]||0,m.y=i[5]||0,a=Math[Jt](G*G+Y*Y),f=Math[Jt](et*et+Z*Z),l=G||Y?Math[Nn](Y,G):m[an]||0,c=Z||et?Math[Nn](Z,et)+l:m[zn]||0,h=a-Math.abs(m[Wn]||0),p=f-Math.abs(m[Xn]||0),Math.abs(c)>Math.PI/2&&Math.abs(c)<1.5*Math.PI&&(g?(a*=-1,c+=0>=l?Math.PI:-Math.PI,l+=0>=l?Math.PI:-Math.PI):(f*=-1,c+=0>=c?Math.PI:-Math.PI)),d=(l-m[an])%Math.PI,v=(c-m[zn])%Math.PI,(void 0===m[zn]||h>y||-y>h||p>y||-y>p||d>E&&S>d&&0!==d*b>>0||v>E&&S>v&&0!==v*b>>0)&&(m[Wn]=a,m[Xn]=f,m[an]=l,m[zn]=c),It&&(m[Vn]=m[$n]=m.z=0,m[Er]=parseFloat(o[kn])||0,m[Jn]=1)}m[Tr]=x;for(s in m)y>m[s]&&m[s]>-y&&(m[s]=0);return n&&(e[cn]=m),m},Rt=function(e){var t,n,r=this[nn],i=-r[an],s=i+r[zn],o=1e5,u=(Math.cos(i)*r[Wn]*o>>0)/o,a=(Math.sin(i)*r[Wn]*o>>0)/o,f=(Math.sin(s)*-r[Xn]*o>>0)/o,l=(Math.cos(s)*r[Xn]*o>>0)/o,c=this.t[Dn],h=this.t[Pn];if(h){n=a,a=-f,f=-n,t=h[Hn],c[Hn]="";var p,d,v=this.t[Yn],m=this.t[Zn],g="absolute"!==h.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+u+", M12="+a+", M21="+f+", M22="+l,E=r.x,S=r.y;if(w!=r.ox&&(p=(r.oxp?.01*v*r.ox:r.ox)-v/2,d=(r.oyp?.01*m*r.oy:r.oy)-m/2,E+=p-(p*u+d*a),S+=d-(p*f+d*l)),g)p=v/2,d=m/2,b+=", Dx="+(p-(p*u+d*a)+E)+", Dy="+(d-(p*f+d*l)+S)+cr;else{var x,T,k,L=8>y?1:-1;for(p=r[Nr]||0,d=r[Cr]||0,r[Nr]=Math.round((v-((0>u?-u:u)*v+(0>a?-a:a)*m))/2+E),r[Cr]=Math.round((m-((0>l?-l:l)*m+(0>f?-f:f)*v))/2+S),xt=0;4>xt;xt++)T=st[xt],x=h[T],n=-1!==x[Ot](Ln)?parseFloat(x):at(this.t,T,parseFloat(x),x[Fn](N,""))||0,k=n!==r[T]?2>xt?-r[Nr]:-r[Cr]:2>xt?p-r[Nr]:d-r[Cr],c[T]=(r[T]=Math.round(n-k*(0===xt||2===xt?1:L)))+Ln;b+=", sizingMethod='auto expand')"}c[Hn]=-1!==t[Ot]("DXImageTransform.Microsoft.Matrix(")?t[Fn](F,b):b+ar+t,(0===e||1===e)&&1===u&&0===a&&0===f&&1===l&&(g&&-1===b[Ot]("Dx=0, Dy=0")||C.test(t)&&100!==parseFloat(RegExp.$1)||-1===t[Ot]("gradient(")&&c[kr](Hn))}},Ut=function(){var e,t,n,r,i,s,o,u,a,f=this[nn],l=this.t[Dn],c=f[Er],h=f[Wn],p=0,d=0,v=0,g=0,y=f[Xn],b=0,E=0,S=0,x=0,T=f[Jn],N=0,C=0,k=0,L=c?-1/c:0,A=f[an],O=f[Tr],M=$t,_=1e5;m&&(o=tt(this.t,un,w,!1,"0"),u=parseFloat(o)||0,a=o[Dt]((u+"")[ot]),f[Lr]=!f[Lr],l[un]=(f[Lr]?u+.05:u-.05)+(""===a?Ln:a)),A&&(e=Math.cos(A),t=Math.sin(A),n=h*e,r=y*t,p=h*-t,y*=e,h=n,g=r),A=f[$n],A&&(e=Math.cos(A),t=Math.sin(A),n=h*e,r=g*e,i=T*-t,s=L*-t,d=h*t,b=g*t,T*=e,L*=e,h=n,g=r,S=i,C=s),A=f[Vn],A&&(e=Math.cos(A),t=Math.sin(A),n=p*e+d*t,r=y*e+b*t,i=x*e+T*t,s=k*e+L*t,d=p*-t+d*e,b=y*-t+b*e,T=x*-t+T*e,L=k*-t+L*e,p=n,y=r,x=i,k=s),O&&(N-=O,v=d*N,E=b*N,N=T*N+O),v+=f.x,E+=f.y,N=((N+f.z)*_>>0)/_,l[Pt]="matrix3d("+(h*_>>0)/_+M+(g*_>>0)/_+M+(S*_>>0)/_+M+(C*_>>0)/_+M+(p*_>>0)/_+M+(y*_>>0)/_+M+(x*_>>0)/_+M+(k*_>>0)/_+M+(d*_>>0)/_+M+(b*_>>0)/_+M+(T*_>>0)/_+M+(L*_>>0)/_+M+(v*_>>0)/_+M+(E*_>>0)/_+M+N+M+(c?1+ -N/c:1)+cr},zt=function(){var e,t,n,r,i,s,o,u,a=this[nn],f=this.t;m&&(e=tt(f,un,w,!1,"0"),t=parseFloat(e)||0,n=e[Dt]((t+"")[ot]),a[Lr]=!a[Lr],f[Dn][un]=(a[Lr]?t+.05:t-.05)+(""===n?Ln:n)),a[an]||a[zn]?(r=a[an],i=r-a[zn],s=1e5,o=a[Wn]*s,u=a[Xn]*s,f[Dn][Pt]=Ar+(Math.cos(r)*o>>0)/s+$t+(Math.sin(r)*o>>0)/s+$t+(Math.sin(i)*-u>>0)/s+$t+(Math.cos(i)*u>>0)/s+$t+a.x+$t+a.y+cr):f[Dn][Pt]=Ar+a[Wn]+",0,0,"+a[Xn]+$t+a.x+$t+a.y+cr};Ct("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective",w,function(e,t,n,r,s,o,u){if(r[fn])return s;var a,f,l,c,h,p,d,v=r[fn]=qt(e,i,!0),m=e[Dn],g=1e-6,y=At[ot],b=u;for(kt==typeof b[Sr]&&Pt?(c=m[Pt],m[Pt]=b[Sr],a=qt(e,w,!1),m[Pt]=c):"object"==typeof b&&(f=w!=b[an]?b[an]:w!=b.rotationZ?b.rotationZ:v[an]*R,a={scaleX:ct(w!=b[Wn]?b[Wn]:b.scale,v[Wn]),scaleY:ct(w!=b[Xn]?b[Xn]:b.scale,v[Xn]),scaleZ:ct(w!=b[Jn]?b[Jn]:b.scale,v[Jn]),x:ct(b.x,v.x),y:ct(b.y,v.y),z:ct(b.z,v.z),perspective:ct(b.transformPerspective,v[Er])},a[an]=w!=b[Or]||w!=b[Mr]?pt(b[Or]||b[Mr]||0,v[an]):Nt==typeof f?f*q:ht(f,v[an]),It&&(a[Vn]=w!=b[_r]?pt(b[_r],v[Vn]):Nt==typeof b[Vn]?b[Vn]*q:ht(b[Vn],v[Vn]),a[$n]=w!=b[Dr]?pt(b[Dr],v[$n]):Nt==typeof b[$n]?b[$n]*q:ht(b[$n],v[$n]),g>a[Vn]&&a[Vn]>-g&&(a[Vn]=0),g>a[$n]&&a[$n]>-g&&(a[$n]=0)),a[zn]=w==b[zn]?v[zn]:Nt==typeof b[zn]?b[zn]*q:ht(b[zn],v[zn]),a[Pr]=w==b[Pr]?v[Pr]:Nt==typeof b[Pr]?b[Pr]*q:ht(b[Pr],v[Pr]),(l=a[Pr]-v[Pr])&&(a[zn]+=l,a[an]+=l),g>a[Pr]&&a[Pr]>-g&&(a[Pr]=0),g>a[zn]&&a[zn]>-g&&(a[zn]=0),g>a[an]&&a[an]>-g&&(a[an]=0)),p=v.z||v[Vn]||v[$n]||a.z||a[Vn]||a[$n]||a[Er],p||w==a.scale||(a[Jn]=1);--y>-1;)n=At[y],h=a[n]-v[n],(h>g||-g>h||w!=U[n])&&(d=!0,s=new Et(v,n,v[n],h,s),s.xs0=0,s[rn]=o,r[Xt].push(s.n));return h=b[xr],(h||It&&p&&v[Tr])&&(Pt?(d=!0,h=(h||tt(e,n,i,!1,Hr))+"",n=jt,s=new Et(m,n,0,0,s,-1,"css_transformOrigin"),s.b=m[n],s[rn]=o,It?(c=v[Tr],h=h[ur](ar),v[Tr]=(h[ot]>2?parseFloat(h[2]):c)||0,s.xs0=s.e=m[n]=h[0]+ar+(h[1]||"50%")+" 0px",s=new Et(v,Tr,0,0,s,-1,s.n),s.b=c,s.xs0=s.e=v[Tr]):s.xs0=s.e=m[n]=h):ft(h+"",v)),d&&(r[Br]=p||3===this[Br]?3:2),s},!0),Ct("boxShadow","0px 0px 0px 0px #999",function(e,t,n,r,s,o){var u=-1!==(t+"")[Ot]("inset")?" inset":"";return this[gr](e[Dn],this[wr](tt(e,this.p,i,!1,this.dflt))+u,this[wr](t)+u,s,o)},!0,!0),Ct("borderRadius",jr,function(e,t,r,s,o){t=this[wr](t);var u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=e[Dn];for(v=parseFloat(e[Yn]),m=parseFloat(e[Zn]),u=t[ur](ar),a=0;x[ot]>a;a++)this.p[Ot](tr)&&(x[a]=Z(x[a])),c=l=tt(e,x[a],i,!1,jr),-1!==c[Ot](ar)&&(l=c[ur](ar),c=l[0],l=l[1]),h=f=u[a],p=parseFloat(c),y=c[Dt]((p+"")[ot]),b=Mt===h[_t](1),b?(d=parseInt(h[_t](0)+"1",10),h=h[Dt](2),d*=parseFloat(h),g=h[Dt]((d+"")[ot]-(0>d?1:0))||""):(d=parseFloat(h),g=h[Dt]((d+"")[ot])),""===g&&(g=n[r]||y),g!==y&&(w=at(e,Fr,p,y),E=at(e,"borderTop",p,y),nr===g?(c=100*(w/v)+nr,l=100*(E/m)+nr):rr===g?(S=at(e,Fr,1,rr),c=w/S+rr,l=E/S+rr):(c=w+Ln,l=E+Ln),b&&(h=parseFloat(c)+d+g,f=parseFloat(l)+d+g)),o=St(T,x[a],c+ar+l,h+ar+f,!1,jr,o);return o},!0,!1,yt("0px 0px 0px 0px",!1,!0)),Ct("backgroundPosition",or,function(e,t,n,r,s,o){var u,a,f,l,c,h="background-position",p=i||et(e,w),d=this[wr]((p?y?p[jn](h+"-x")+ar+p[jn](h+"-y"):p[jn](h):e[Pn].backgroundPositionX+ar+e[Pn].backgroundPositionY)||or),v=this[wr](t);if(-1!==d[Ot](nr)!=(-1!==v[Ot](nr))){for(u=d[ur](ar),a=v[ur](ar),X.setAttribute("src",tt(e,"backgroundImage")[Fn](P,"")),f=2;--f>-1;)d=u[f],l=-1!==d[Ot](nr),l!==(-1!==a[f][Ot](nr))&&(c=0===f?e[Yn]-X[Gn]:e[Zn]-X[sr],u[f]=l?parseFloat(d)/100*c+Ln:100*(parseFloat(d)/c)+nr);d=u.join(ar)}return this[gr](e[Dn],d,v,s,o)},!1,!1,ft),Ct("backgroundSize",or,w,!1,!1,ft),Ct(Er,jr,w,!0),Ct("perspectiveOrigin",Hr,w,!0),Ct("transformStyle","preserve-3d",w,!0),Ct("backfaceVisibility",Ir,w,!0),Ct("margin",w,bt("marginTop,marginRight,marginBottom,marginLeft")),Ct(er,w,bt("paddingTop,paddingRight,paddingBottom,paddingLeft")),Ct("clip","rect(0px,0px,0px,0px)"),Ct("textShadow","0px 0px 0px #999",w,!1,!0),Ct("autoRound",w,function(e,t,n,r,i){return i}),Ct(tr,"0px solid #000",function(e,t,n,r,s,o){return this[gr](e[Dn],this[wr](tt(e,ir,i,!1,jr)+ar+tt(e,"borderTopStyle",i,!1,"solid")+ar+tt(e,"borderTopColor",i,!1,"#000")),this[wr](t),s,o)},!1,!0,function(e){var t=e[ur](ar);return t[0]+ar+(t[1]||"solid")+ar+(e[fr](gt)||["#000"])[0]});var Wt=function(e){var t,n=this.t,r=n[Hn],i=this.s+this.c*e>>0;100===i&&(-1===r[Ot]("atrix(")&&-1===r[Ot]("radient(")?(n[kr](Hn),t=!tt(this[nn],Hn)):(n[Hn]=r[Fn](M,""),t=!0)),t||(this.xn1&&(n[Hn]=r=r||"alpha(opacity=100)"),-1===r[Ot](_n)?n[Hn]+=" alpha(opacity="+i+cr:n[Hn]=r[Fn](C,"opacity="+i))};Ct("opacity,alpha,autoAlpha","1",function(e,t,n,r,s,o){var u,a=parseFloat(tt(e,_n,i,!1,"1")),f=e[Dn];return t=parseFloat(t),qr===n&&(u=tt(e,Rr,i),1===a&&Ur===u&&0!==t&&(a=0),s=new Et(f,Rr,0,0,s,-1,w,!1,0,0!==a?Ir:Ur,0===t?Ur:Ir),s.xs0=Ir,r[Xt].push(s.n)),J?s=new Et(f,_n,a,t-a,s):(s=new Et(f,_n,100*a,100*(t-a),s),s.xn1=qr===n?1:0,f.zoom=1,s[En]=2,s.b=zr+s.s+cr,s.e=zr+(s.s+s.c)+cr,s[nn]=e,s[rn]=o,s[sn]=Wt),s});var Vt=function(e){if(1===e||0===e){this.t[Qn]=1===e?this.e:this.b;for(var t=this[nn],n=this.t[Dn],r=n[Wr]?Wr:kr;t;)t.v?n[t.p]=t.v:n[r](t.p[Fn](_,"-$1")[Bn]()),t=t[O]}else this.t[Qn]!==this.b&&(this.t[Qn]=this.b)};for(Ct(Qn,w,function(e,t,n,r,s,o,u){var a,f,l=e[Qn],c=e[Dn][Kn];return s=r[Xr]=new Et(e,n,0,0,s,2),s[sn]=Vt,s.b=l,s.e=Mt!==t[_t](1)?t:"+"===t[_t](0)?l+ar+t[Dt](2):l[ur](t[Dt](2)).join(""),r[dn][L]&&(f=nt(e,i,!0),e[Qn]=s.e,a=rt(e,f,nt(e),u),e[Qn]=l,s[nn]=a[pr],e[Dn][Kn]=c,s=s[br]=r[hr](e,a.difs,s,o)),s}),a="bezier,throwProps,physicsProps,physics2D"[ur]($t),xt=a[ot];xt--;)Lt(a[xt]);return a=o[h],a[k]=w,a[pn]=function(e,r,u){if(!e.nodeType)return!1;this[hn]=e,this[dn]=u,this._vars=r,f=r.autoRound,t=!1,n=r[An]||o[An],i=et(e,""),s=this[Xt];var a,h,p,d,v,m,y,b,E,S=e[Dn];if(l&&""===S[Vr]&&(a=tt(e,Vr,i),(qn===a||""===a)&&(S[Vr]=0)),kt==typeof r&&(d=S[Kn],a=nt(e,i),S[Kn]=d+";"+r,a=rt(e,a,nt(e)).difs,!J&&A.test(r)&&(a[_n]=parseFloat(RegExp.$1)),r=a,S[Kn]=d),this[k]=h=this[hr](e,r,w),this[Br]){for(E=3===this[Br],Pt?c&&(l=!0,""===S[Vr]&&(y=tt(e,Vr,i),(qn===y||""===y)&&(S[Vr]=0)),g&&(S[$r]=this._vars[$r]||(E?Ir:Ur))):S.zoom=1,p=h;p&&p[O];)p=p[O];b=new Et(e,Sr,0,0,w,2),this[Jr](b,w,p),b[sn]=E&&It?Ut:Pt?zt:Rt,b[nn]=this[fn]||qt(e,i,!0),s.pop()}if(t){for(;h;){for(m=h[O],p=d;p&&p.pr>h.pr;)p=p[O];(h[Ht]=p?p[Ht]:v)?h[Ht][O]=h:d=h,(h[O]=p)?p[Ht]=h:v=h,h=m}this[k]=d}return!0},a[hr]=function(e,t,r,s){var o,a,l,c,h,p,d,v,m,g,y=e[Dn];for(o in t)p=t[o],a=u[o],a?r=a[hr](e,p,o,this,r,s,t):(h=tt(e,o,i)+"",m=kt==typeof p,"color"===o||"fill"===o||"stroke"===o||-1!==o[Ot]("Color")||m&&!p[Ot]("rgb")?(m||(p=vt(p),p=(p[ot]>3?"rgba(":"rgb(")+p.join($t)+cr),r=St(y,o,h,p,!0,lr,r,0,s)):!m||-1===p[Ot](ar)&&-1===p[Ot]($t)?(l=parseFloat(h),d=l||0===l?h[Dt]((l+"")[ot]):"",(""===h||qn===h)&&(Gn===o||sr===o?(l=ut(e,o,i),d=Ln):(l=_n!==o?0:1,d="")),g=m&&Mt===p[_t](1),g?(c=parseInt(p[_t](0)+"1",10),p=p[Dt](2),c*=parseFloat(p),v=p[Dt]((c+"")[ot]-(0>c?1:0))||""):(c=parseFloat(p),v=m?p[Dt]((c+"")[ot])||"":""),""===v&&(v=n[o]||d),p=c||0===c?(g?c+l:c)+v:t[o],d!==v&&""!==v&&(c||0===c)&&(l||0===l)&&(l=at(e,o,l,d),nr===v?(l/=at(e,o,100,nr)/100,l>100&&(l=100)):rr===v?l/=at(e,o,1,rr):(c=at(e,o,c,v),v=Ln),g&&(c||0===c)&&(p=c+l+v)),g&&(c+=l),!l&&0!==l||!c&&0!==c?p||"NaN"!=p+""&&w!=p?(r=new Et(y,o,c||l||0,0,r,-1,mr+o,!1,0,h,p),r.xs0="display"===o&&In===p?h:p):Q("invalid "+o+" tween value. "):(r=new Et(y,o,l,c-l,r,0,mr+o,f!==!1&&(Ln===v||Vr===o),0,h,p),r.xs0=v)):r=St(y,o,h,p,!0,w,r,0,s)),s&&r&&!r[rn]&&(r[rn]=s);return r},a[sn]=function(e){var t,n,r,i=this[k],s=1e-6;if(1!==e||this[dn][x]!==this[dn][L]&&0!==this[dn][x])if(e||this[dn][x]!==this[dn][L]&&0!==this[dn][x]||this[dn][I]===-0.000001)for(;i;){if(t=i.c*e+i.s,i.r?t=t>0?t+.5>>0:t-.5>>0:s>t&&t>-s&&(t=0),i[En])if(1===i[En])if(r=i.l,2===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2;else if(3===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3;else if(4===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4;else if(5===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4+i.xn4+i.xs5;else{for(n=i.xs0+t+i.xs1,r=1;i.l>r;r++)n+=i[dr+r]+i[vr+(r+1)];i.t[i.p]=n}else-1===i[En]?i.t[i.p]=i.xs0:i[sn]&&i[sn](e);else i.t[i.p]=t+i.xs0;i=i[O]}else for(;i;)2!==i[En]?i.t[i.p]=i.b:i[sn](e),i=i[O];else for(;i;)2!==i[En]?i.t[i.p]=i.e:i[sn](e),i=i[O]},a[ln]=function(e){this[Br]=e||3===this[Br]?3:2},a[Jr]=function(e,t,n,r){return e&&(t&&(t[Ht]=e),e[O]&&(e[O][Ht]=e[Ht]),n?n[O]=e:r||w!==this[k]||(this[k]=e),e[Ht]?e[Ht][O]=e[O]:this[k]===e&&(this[k]=e[O]),e[O]=t,e[Ht]=n),e},a[Ft]=function(t){var n,i,s,o=t,u=!1;if(t[Kr]||t.css_alpha){o={};for(i in t)o[i]=t[i];o.css_opacity=1,o[Kr]&&(o.css_visibility=1)}return t.css_className&&(n=this[Xr])&&(s=n[br],s&&s[Ht]?this[Jr](s[Ht],n[O],s[Ht][Ht]):s===this[k]&&(this[k]=w),n[O]&&this[Jr](n[O],n[O][O],s[Ht]),this[hn][Un]=this[Jr](n,this[hn][Un]),this[Xr]=w,u=!0),e[h][Ft][r](this,o)||u},e[Cn]([o]),o},!0),_gsDefine("plugins.RoundPropsPlugin",[zt],function(e){var t=function(){e[r](this,Qr,-1),this[Xt][ot]=0},n=t[h]=new e(Qr,-1);return n[v]=t,t.API=2,n[pn]=function(e,t,n){return this[dn]=n,!0},n._onInitAllProps=function(){for(var e,t,n,r=this[dn],i=r[o][Qr]instanceof Array?r[o][Qr]:r[o][Qr][ur]($t),s=i[ot],u={},a=r._propLookup[Qr];--s>-1;)u[i[s]]=1;for(s=i[ot];--s>-1;)for(e=i[s],t=r[k];t;)n=t[O],t.pg?t.t._roundProps(u,!0):t.n===e&&(this._add(t.t,e,t.s,t.c),n&&(n[Ht]=t[Ht]),t[Ht]?t[Ht][O]=n:r[k]===t&&(r[k]=n),t[O]=t[Ht]=w,r._propLookup[e]=a),t=n;return!1},n._add=function(e,t,n,r){this._addTween(e,t,n,n+r,t,!0),this[Xt].push(t)},e[Cn]([t]),t},!0),_gsDefine("easing.Back",[It],function(e){var t,n,r=window[Yt]||window,i=r.com[Gt],s=2*Math.PI,o=Math.PI/2,u=i._class,a=function(t,n){var r=u(Gr+t,function(){},!0),i=r[h]=new e;return i[v]=r,i[B]=n,r},f=e.register||function(){},l=function(e,t,n,r){var i=u(Gr+e,{easeOut:new t,easeIn:new n,easeInOut:new r},!0);return f(i,e),i},c=function(t,n){var r=u(Gr+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),i=r[h]=new e;return i[v]=r,i[B]=n,i[Yr]=function(e){return new r(e)},r},p=l("Back",c("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),c("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),c("BackInOut",function(e){return 1>(e*=2)?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),d=u("easing.SlowMo",function(e,t,n){t=t||0===t?t:.7,w==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this[P]=n===!0},!0),m=d[h]=new e;return m[v]=d,m[B]=function(e){var t=e+(.5-e)*this._p;return this._p1>e?this[P]?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this[P]?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this[P]?1:t},d.ease=new d(.7,.7),m[Yr]=d[Yr]=function(e,t,n){return new d(e,t,n)},t=u("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),m=t[h]=new e,m[v]=t,m[B]=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},m[Yr]=t[Yr]=function(e){return new t(e)},l("Bounce",a("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),a("BounceIn",function(e){return 1/2.75>(e=1-e)?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),a("BounceInOut",function(e){var t=.5>e;return e=t?1-2*e:2*e-1,e=1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*
(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),l("Circ",a("CircOut",function(e){return Math[Jt](1-(e-=1)*e)}),a("CircIn",function(e){return-(Math[Jt](1-e*e)-1)}),a("CircInOut",function(e){return 1>(e*=2)?-0.5*(Math[Jt](1-e*e)-1):.5*(Math[Jt](1-(e-=2)*e)+1)})),n=function(t,n,r){var i=u(Gr+t,function(e,t){this._p1=e||1,this._p2=t||r,this._p3=this._p2/s*(Math.asin(1/this._p1)||0)},!0),o=i[h]=new e;return o[v]=i,o[B]=n,o[Yr]=function(e,t){return new i(e,t)},i},l("Elastic",n("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*s/this._p2)+1},.3),n("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*s/this._p2))},.3),n("ElasticInOut",function(e){return 1>(e*=2)?-0.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*s/this._p2):.5*this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*s/this._p2)+1},.45)),l("Expo",a("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),a("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),a("ExpoInOut",function(e){return 1>(e*=2)?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),l("Sine",a("SineOut",function(e){return Math.sin(e*o)}),a("SineIn",function(e){return-Math.cos(e*o)+1}),a("SineInOut",function(e){return-0.5*(Math.cos(Math.PI*e)-1)})),u("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),f(r.SlowMo,"SlowMo","ease,"),f(t,"SteppedEase","ease,"),p},!0)}),function(e){"use strict";var t="length",n="_startTime",r="_timeline",i="_overwrittenProps",s=null,o="_firstPT",u="_totalTime",a="_duration",f="_overwriteProps",l="_timeScale",c="_totalDuration",h="_targets",p="immediateRender",d="_notifyPluginsOfEnabled",v="_next",m="smoothChildTiming",g="totalDuration",y="_rawPrevTime",b="timeline",w="_enabled",E="_siblings",S="function",x="prototype",T="_paused",N="_propLookup",C="_prev",k="_active",L="_reversed",A="_pauseTime",O="vars",M="totalTime",_="_initted",D="_listeners",P="_onPluginEvent",H="getRatio",B="_uncache",j="_onUpdate",F="_onInitAllProps",I="_initProps",q="_time",R="_overwrite",U="_delay",z="render",W="constructor",X="splice",V="_propName",$="overwrite",J="concat",K="_dirty",Q="target",G="paused",Y="string",Z="reversed",et="split",tt="_onDisable",nt="selector",rt="_sortChildren",it="_kill",st="_ease",ot="gsClass",ut="apply",at="getTweensOf",ft="GreenSockAMDPath",lt="defaultEase",ct="startAt",ht="substr",pt="object",dt="Params",vt="autoRemoveChildren",mt="_first",gt="ratio",yt="onUpdateParams",bt="_calcEnd",wt="easeParams",Et="time",St="defaultOverwrite",xt="onStartParams",Tt="addEventListener",Nt="charAt",Ct="rawTime",kt="_easeType",Lt="_priority",At="Ticker",Ot="all",Mt="_last",_t="dispatchEvent",Dt,Pt,Ht,Bt,jt=e.GreenSockGlobals||e,Ft=function(e){var n,r=e[et]("."),i=jt;for(n=0;r[t]>n;n++)i[r[n]]=i=i[r[n]]||{};return i},It=Ft("com.greensock"),qt={},Rt=function(n,r,i,o){this.sc=qt[n]?qt[n].sc:[],qt[n]=this,this[ot]=s,this.func=i;var u=[];this.check=function(s){for(var a,f,l,c,h=r[t],p=h;--h>-1;)(a=qt[r[h]]||new Rt(r[h],[]))[ot]?(u[h]=a[ot],p--):s&&a.sc.push(this);if(0===p&&i)for(f=("com.greensock."+n)[et]("."),l=f.pop(),c=Ft(f.join("."))[l]=this[ot]=i[ut](i,u),o&&(jt[l]=c,S==typeof define&&define.amd?define((e[ft]?e[ft]+"/":"")+n[et](".").join("/"),[],function(){return c}):"undefined"!=typeof module&&module.exports&&(module.exports=c)),h=0;this.sc[t]>h;h++)this.sc[h].check()},this.check(!0)},Ut=e._gsDefine=function(e,t,n,r){return new Rt(e,t,n,r)},zt=It._class=function(e,t,n){return t=t||function(){},Ut(e,[],function(){return t},n),t},Wt=[0,0,1,1],Xt=[],Vt=zt("easing.Ease",function(e,t,n,r){this._func=e,this._type=n||0,this._power=r||0,this._params=t?Wt[J](t):Wt},!0),$t=Vt.map={},Jt=Vt.register=function(e,n,r,i){for(var o,u,a,f,l=n[et](","),c=l[t],h=(r||"easeIn,easeOut,easeInOut")[et](",");--c>-1;)for(u=l[c],o=i?zt("easing."+u,s,!0):It.easing[u]||{},a=h[t];--a>-1;)f=h[a],$t[u+"."+f]=$t[f+u]=o[f]=e[H]?e:e[f]||new e};for(Ht=Vt[x],Ht[bt]=!1,Ht[H]=function(e){if(this._func)return this._params[0]=e,this._func[ut](s,this._params);var t=this._type,n=this._power,r=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===n?r*=r:2===n?r*=r*r:3===n?r*=r*r*r:4===n&&(r*=r*r*r*r),1===t?1-r:2===t?r:.5>e?r/2:1-r/2},Dt=["Linear","Quad","Cubic","Quart","Quint,Strong"],Pt=Dt[t];--Pt>-1;)Ht=Dt[Pt]+",Power"+Pt,Jt(new Vt(s,s,1,Pt),Ht,"easeOut",!0),Jt(new Vt(s,s,2,Pt),Ht,"easeIn"+(0===Pt?",easeNone":"")),Jt(new Vt(s,s,3,Pt),Ht,"easeInOut");$t.linear=It.easing.Linear.easeIn,$t.swing=It.easing.Quad.easeInOut;var Kt=zt("events.EventDispatcher",function(e){this[D]={},this._eventTarget=e||this});Ht=Kt[x],Ht[Tt]=function(e,n,r,i,o){o=o||0;var u,a,f=this[D][e],l=0;for(s==f&&(this[D][e]=f=[]),a=f[t];--a>-1;)u=f[a],u.c===n?f[X](a,1):0===l&&o>u.pr&&(l=a+1);f[X](l,0,{c:n,s:r,up:i,pr:o})},Ht.removeEventListener=function(e,n){var r,i=this[D][e];if(i)for(r=i[t];--r>-1;)if(i[r].c===n)return i[X](r,1),void 0},Ht[_t]=function(e){var n=this[D][e];if(n)for(var r,i=n[t],s=this._eventTarget;--i>-1;)r=n[i],r.up?r.c.call(r.s||s,{type:e,target:s}):r.c.call(r.s||s)};var Qt=e.requestAnimationFrame,Gt=e.cancelAnimationFrame,Yt=Date.now||function(){return(new Date).getTime()};for(Dt=["ms","moz","webkit","o"],Pt=Dt[t];--Pt>-1&&!Qt;)Qt=e[Dt[Pt]+"RequestAnimationFrame"],Gt=e[Dt[Pt]+"CancelAnimationFrame"]||e[Dt[Pt]+"CancelRequestAnimationFrame"];zt(At,function(n,r){var i,o,u,a,f,l=this,c=Yt(),h=r!==!1&&Qt,p=function(){s!=u&&(h&&Gt?Gt(u):e.clearTimeout(u),u=s)},d=function(e){l[Et]=(Yt()-c)/1e3,(!i||l[Et]>=f||e===!0)&&(l.frame++,f=l[Et]>f?l[Et]+a-(l[Et]-f):l[Et]+a-.001,l[Et]+.001>f&&(f=l[Et]+.001),l[_t]("tick")),e!==!0&&(u=o(d))};Kt.call(l),this[Et]=this.frame=0,this.tick=function(){d(!0)},this.fps=function(n){return arguments[t]?(i=n,a=1/(i||60),f=this[Et]+a,o=0===i?function(){}:h&&Qt?Qt:function(t){return e.setTimeout(t,1e3*(f-l[Et])+1>>0||1)},p(),u=o(d),void 0):i},this.useRAF=function(e){return arguments[t]?(p(),h=e,l.fps(i),void 0):h},l.fps(n),setTimeout(function(){h&&!u&&l.useRAF(!1)},1e3)}),Ht=It[At][x]=new It.events.EventDispatcher,Ht[W]=It[At];var Zt=zt("core.Animation",function(e,t){if(this[O]=t||{},this[a]=this[c]=e||0,this[U]=Number(this[O].delay)||0,this[l]=1,this[k]=this[O][p]===!0,this.data=this[O].data,this[L]=this[O][Z]===!0,cn){Bt||(en.tick(),Bt=!0);var n=this[O].useFrames?ln:cn;n.add(this,n[q]),this[O][G]&&this[G](!0)}}),en=Zt.ticker=new It[At];Ht=Zt[x],Ht[K]=Ht._gc=Ht[_]=Ht[T]=!1,Ht[u]=Ht[q]=0,Ht[y]=-1,Ht[v]=Ht[Mt]=Ht[j]=Ht[r]=Ht[b]=s,Ht[T]=!1,Ht.play=function(e,n){return arguments[t]&&this.seek(e,n),this[Z](!1),this[G](!1)},Ht.pause=function(e,n){return arguments[t]&&this.seek(e,n),this[G](!0)},Ht.resume=function(e,n){return arguments[t]&&this.seek(e,n),this[G](!1)},Ht.seek=function(e,t){return this[M](Number(e),t!==!1)},Ht.restart=function(e,t){return this[Z](!1),this[G](!1),this[M](e?-this[U]:0,t!==!1)},Ht.reverse=function(e,n){return arguments[t]&&this.seek(e||this[g](),n),this[Z](!0),this[G](!1)},Ht[z]=function(){},Ht.invalidate=function(){return this},Ht[w]=function(e,t){return this._gc=!e,this[k]=e&&!this[T]&&this[u]>0&&this[u]<this[c],t!==!0&&(e&&s==this[b]?this[r].add(this,this[n]-this[U]):e||s==this[b]||this[r]._remove(this,!0)),!1},Ht[it]=function(){return this[w](!1,!1)},Ht.kill=function(e,t){return this[it](e,t),this},Ht[B]=function(e){for(var t=e?this:this[b];t;)t[K]=!0,t=t[b];return this},Ht.eventCallback=function(e,n,r,i){if(s==e)return s;if("on"===e[ht](0,2)){if(1===arguments[t])return this[O][e];if(s==n)delete this[O][e];else if(this[O][e]=n,this[O][e+dt]=r,this[O][e+"Scope"]=i,r)for(var o=r[t];--o>-1;)"{self}"===r[o]&&(r=this[O][e+dt]=r[J](),r[o]=this);"onUpdate"===e&&(this[j]=n)}return this},Ht.delay=function(e){return arguments[t]?(this[r][m]&&this.startTime(this[n]+e-this[U]),this[U]=e,this):this[U]},Ht.duration=function(e){return arguments[t]?(this[a]=this[c]=e,this[B](!0),this[r][m]&&this[q]>0&&this[q]<this[a]&&0!==e&&this[M](this[u]*(e/this[a]),!0),this):(this[K]=!1,this[a])},Ht[g]=function(e){return this[K]=!1,arguments[t]?this.duration(e):this[c]},Ht[Et]=function(e,n){return arguments[t]?(this[K]&&this[g](),e>this[a]&&(e=this[a]),this[M](e,n)):this[q]},Ht[M]=function(e,i){if(!arguments[t])return this[u];if(this[r]){if(0>e&&(e+=this[g]()),this[r][m]&&(this[K]&&this[g](),e>this[c]&&(e=this[c]),this[n]=(this[T]?this[A]:this[r][q])-(this[L]?this[c]-e:e)/this[l],this[r][K]||this[B](!1),!this[r][k]))for(var s=this[r];s[r];)s[M](s[u],!0),s=s[r];this._gc&&this[w](!0,!1),this[u]!==e&&this[z](e,i,!1)}return this},Ht.startTime=function(e){return arguments[t]?(e!==this[n]&&(this[n]=e,this[b]&&this[b][rt]&&this[b].add(this,e-this[U])),this):this[n]},Ht.timeScale=function(e){if(!arguments[t])return this[l];if(e=e||1e-6,this[r]&&this[r][m]){var i=this[A]||0===this[A]?this[A]:this[r][u];this[n]=i-(i-this[n])*this[l]/e}return this[l]=e,this[B](!1)},Ht[Z]=function(e){return arguments[t]?(e!=this[L]&&(this[L]=e,this[M](this[u],!0)),this):this[L]},Ht[G]=function(e){return arguments[t]?(e!=this[T]&&this[r]&&(!e&&this[r][m]&&(this[n]+=this[r][Ct]()-this[A],this[B](!1)),this[A]=e?this[r][Ct]():s,this[T]=e,this[k]=!this[T]&&this[u]>0&&this[u]<this[c]),this._gc&&(e||this[w](!0,!1)),this):this[T]};var tn=zt("core.SimpleTimeline",function(e){Zt.call(this,0,e),this[vt]=this[m]=!0});Ht=tn[x]=new Zt,Ht[W]=tn,Ht.kill()._gc=!1,Ht[mt]=Ht[Mt]=s,Ht[rt]=!1,Ht.add=function(e,t){var i,s;if(e[n]=Number(t||0)+e[U],e[T]&&this!==e[r]&&(e[A]=e[n]+(this[Ct]()-e[n])/e[l]),e[b]&&e[b]._remove(e,!0),e[b]=e[r]=this,e._gc&&e[w](!0,!0),i=this[Mt],this[rt])for(s=e[n];i&&i[n]>s;)i=i[C];return i?(e[v]=i[v],i[v]=e):(e[v]=this[mt],this[mt]=e),e[v]?e[v][C]=e:this[Mt]=e,e[C]=i,this[r]&&this[B](!0),this},Ht.insert=Ht.add,Ht._remove=function(e,t){return e[b]===this&&(t||e[w](!1,!0),e[b]=s,e[C]?e[C][v]=e[v]:this[mt]===e&&(this[mt]=e[v]),e[v]?e[v][C]=e[C]:this[Mt]===e&&(this[Mt]=e[C]),this[r]&&this[B](!0)),this},Ht[z]=function(e,t){var r,i=this[mt];for(this[u]=this[q]=this[y]=e;i;)r=i[v],(i[k]||e>=i[n]&&!i[T])&&(i[L]?i[z]((i[K]?i[g]():i[c])-(e-i[n])*i[l],t,!1):i[z]((e-i[n])*i[l],t,!1)),i=r},Ht[Ct]=function(){return this[u]};var nn=zt("TweenLite",function(e,n,r){if(Zt.call(this,n,r),s==e)throw"Cannot tween an undefined reference.";this[Q]=e=Y!=typeof e?e:nn[nt](e)||e,this[R]=s==this[O][$]?fn[nn[St]]:"number"==typeof this[O][$]?this[O][$]>>0:fn[this[O][$]];var i,o;if((e instanceof Array||e.jquery)&&pt==typeof e[0])for(this[h]=e.slice(0),this[N]=[],this[E]=[],i=0;this[h][t]>i;i++)o=this[h][i],o.jquery?(this[h][X](i--,1),this[h]=this[h][J](o[W].makeArray(o))):(this[E][i]=hn(o,this,!1),1===this[R]&&this[E][i][t]>1&&pn(o,this,s,1,this[E][i]));else this[N]={},this[E]=hn(e,this,!1),1===this[R]&&this[E][t]>1&&pn(e,this,s,1,this[E]);(this[O][p]||0===n&&0===this[U]&&this[O][p]!==!1)&&this[z](-this[U],!1,!0)},!0),rn=function(e){var t,n={};for(t in e)!an[t]&&(!sn[t]||sn[t]&&sn[t]._autoCSS)&&(n[t]=e[t],delete e[t]);e.css=n};Ht=nn[x]=new Zt,Ht[W]=nn,Ht.kill()._gc=!1,Ht[gt]=0,Ht[o]=Ht[h]=Ht[i]=s,Ht[d]=!1,nn.version="1.8.0",nn[lt]=Ht[st]=new Vt(s,s,1,1),nn[St]="auto",nn.ticker=en,nn[nt]=e.$||e.jQuery||function(t){return e.$?(nn[nt]=e.$,e.$(t)):e.document?e.document.getElementById("#"===t[Nt](0)?t[ht](1):t):t};var sn=nn._plugins={},on=nn._tweenLookup={},un=0,an={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,orientToBezier:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},fn={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},ln=Zt._rootFramesTimeline=new tn,cn=Zt._rootTimeline=new tn;cn[n]=en[Et],ln[n]=en.frame,cn[k]=ln[k]=!0,Zt._updateRoot=function(){if(cn[z]((en[Et]-cn[n])*cn[l],!1,!1),ln[z]((en.frame-ln[n])*ln[l],!1,!1),!(en.frame%120)){var e,r,i;for(i in on){for(r=on[i].tweens,e=r[t];--e>-1;)r[e]._gc&&r[X](e,1);0===r[t]&&delete on[i]}}},en[Tt]("tick",Zt._updateRoot);var hn=function(e,n,r){var i,s,o=e._gsTweenID;if(on[o||(e._gsTweenID=o="t"+un++)]||(on[o]={target:e,tweens:[]}),n&&(i=on[o].tweens,i[s=i[t]]=n,r))for(;--s>-1;)i[s]===n&&i[X](s,1);return on[o].tweens},pn=function(e,i,s,u,f){var c,h,p,d;if(1===u||u>=4){for(d=f[t],c=0;d>c;c++)if((p=f[c])!==i)p._gc||p[w](!1,!1)&&(h=!0);else if(5===u)break;return h}var v,m=i[n]+1e-10,y=[],b=0,E=0===i[a];for(c=f[t];--c>-1;)(p=f[c])===i||p._gc||p[T]||(p[r]!==i[r]?(v=v||dn(i,0,E),0===dn(p,v,E)&&(y[b++]=p)):m>=p[n]&&p[n]+p[g]()/p[l]+1e-10>m&&((E||!p[_])&&2e-10>=m-p[n]||(y[b++]=p)));for(c=b;--c>-1;)p=y[c],2===u&&p[it](s,e)&&(h=!0),(2!==u||!p[o]&&p[_])&&p[w](!1,!1)&&(h=!0);return h},dn=function(e,t,i){for(var s=e[r],o=s[l],u=e[n];s[r];){if(u+=s[n],o*=s[l],s[T])return-100;s=s[r]}return u/=o,u>t?u-t:i&&u===t||!e[_]&&2e-10>u-t?1e-10:(u+=e[g]()/e[l]/o)>t?0:u-t-1e-10};Ht._init=function(){var e,n,r,u=this[O],a=u.ease;if(u[ct]&&(u[ct][$]=0,u[ct][p]=!0,nn.to(this[Q],0,u[ct])),this[st]=a?a instanceof Vt?u[wt]instanceof Array?a.config[ut](a,u[wt]):a:S==typeof a?new Vt(a,u[wt]):$t[a]||nn[lt]:nn[lt],this[kt]=this[st]._type,this._easePower=this[st]._power,this[o]=s,this[h])for(e=this[h][t];--e>-1;)this[I](this[h][e],this[N][e]={},this[E][e],this[i]?this[i][e]:s)&&(n=!0);else n=this[I](this[Q],this[N],this[E],this[i]);if(n&&nn[P](F,this),this[i]&&s==this[o]&&S!=typeof this[Q]&&this[w](!1,!1),u.runBackwards)for(r=this[o];r;)r.s+=r.c,r.c=-r.c,r=r[v];this[j]=u.onUpdate,this[_]=!0},Ht[I]=function(e,n,r,i){var u,a,l,c,h,p,m;if(s==e)return!1;this[O].css||e.style&&e.nodeType&&this[O].autoCSS!==!1&&rn(this[O]);for(u in this[O]){if(an[u]){if((xt===u||yt===u||"onCompleteParams"===u||"onReverseCompleteParams"===u||"onRepeatParams"===u)&&(h=this[O][u]))for(a=h[t];--a>-1;)"{self}"===h[a]&&(h=this[O][u]=h[J](),h[a]=this)}else if(sn[u]&&(c=new sn[u])._onInitTween(e,this[O][u],this)){for(this[o]=p={_next:this[o],t:c,p:"setRatio",s:0,c:1,f:!0,n:u,pg:!0,pr:c[Lt]},a=c[f][t];--a>-1;)n[c[f][a]]=this[o];(c[Lt]||c[F])&&(l=!0),(c[tt]||c._onEnable)&&(this[d]=!0)}else this[o]=n[u]=p={_next:this[o],t:e,p:u,f:S==typeof e[u],n:u,pg:!1,pr:0},p.s=p.f?e[u.indexOf("set")||S!=typeof e["get"+u[ht](3)]?u:"get"+u[ht](3)]():parseFloat(e[u]),m=this[O][u],p.c=Y==typeof m&&"="===m[Nt](1)?parseInt(m[Nt](0)+"1",10)*Number(m[ht](2)):Number(m)-p.s||0;p&&p[v]&&(p[v][C]=p)}return i&&this[it](i,e)?this[I](e,n,r,i):this[R]>1&&this[o]&&r[t]>1&&pn(e,this,n,this[R],r)?(this[it](n,e),this[I](e,n,r,i)):l},Ht[z]=function(e,t,n){var i,s,f,l=this[q];if(e>=this[a])this[u]=this[q]=this[a],this[gt]=this[st][bt]?this[st][H](1):1,this[L]||(i=!0,s="onComplete"),0===this[a]&&((0===e||0>this[y])&&this[y]!==e&&(n=!0),this[y]=e);else if(0>=e)this[u]=this[q]=0,this[gt]=this[st][bt]?this[st][H](0):0,(0!==l||0===this[a]&&this[y]>0)&&(s="onReverseComplete",i=this[L]),0>e?(this[k]=!1,0===this[a]&&(this[y]>=0&&(n=!0),this[y]=e)):this[_]||(n=!0);else if(this[u]=this[q]=e,this[kt]){var c=e/this[a],h=this[kt],p=this._easePower;(1===h||3===h&&c>=.5)&&(c=1-c),3===h&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),this[gt]=1===h?1-c:2===h?c:.5>e/this[a]?c/2:1-c/2}else this[gt]=this[st][H](e/this[a]);if(this[q]!==l||n){for(this[_]||(this._init(),!i&&this[q]&&(this[gt]=this[st][H](this[q]/this[a]))),this[k]||this[T]||(this[k]=!0),0===l&&this[O].onStart&&(0!==this[q]||0===this[a])&&(t||this[O].onStart[ut](this[O].onStartScope||this,this[O][xt]||Xt)),f=this[o];f;)f.f?f.t[f.p](f.c*this[gt]+f.s):f.t[f.p]=f.c*this[gt]+f.s,f=f[v];this[j]&&(t||this[j][ut](this[O].onUpdateScope||this,this[O][yt]||Xt)),s&&(this._gc||(i&&(this[r][vt]&&this[w](!1,!1),this[k]=!1),t||this[O][s]&&this[O][s][ut](this[O][s+"Scope"]||this,this[O][s+dt]||Xt)))}},Ht[it]=function(e,n){if(Ot===e&&(e=s),s!=e||s!=n&&n!==this[Q]){n=Y!=typeof n?n||this[h]||this[Q]:nn[nt](n)||n;var r,u,a,l,c,p,d,m;if((n instanceof Array||n.jquery)&&pt==typeof n[0])for(r=n[t];--r>-1;)this[it](e,n[r])&&(p=!0);else{if(this[h]){for(r=this[h][t];--r>-1;)if(n===this[h][r]){c=this[N][r]||{},this[i]=this[i]||[],u=this[i][r]=e?this[i][r]||{}:Ot;break}}else{if(n!==this[Q])return!1;c=this[N],u=this[i]=e?this[i]||{}:Ot}if(c){d=e||c,m=e!==u&&Ot!==u&&e!==c&&(s==e||e._tempKill!==!0);for(a in d)(l=c[a])&&(l.pg&&l.t[it](d)&&(p=!0),l.pg&&0!==l.t[f][t]||(l[C]?l[C][v]=l[v]:l===this[o]&&(this[o]=l[v]),l[v]&&(l[v][C]=l[C]),l[v]=l[C]=s),delete c[a]),m&&(u[a]=1)}}return p}return this[w](!1,!1)},Ht.invalidate=function(){return this[d]&&nn[P](tt,this),this[o]=s,this[i]=s,this[j]=s,this[_]=this[k]=this[d]=!1,this[N]=this[h]?{}:[],this},Ht[w]=function(e,n){if(e&&this._gc)if(this[h])for(var r=this[h][t];--r>-1;)this[E][r]=hn(this[h][r],this,!0);else this[E]=hn(this[Q],this,!0);return Zt[x][w].call(this,e,n),this[d]&&this[o]?nn[P](e?"_onEnable":tt,this):!1},nn.to=function(e,t,n){return new nn(e,t,n)},nn.from=function(e,t,n){return n.runBackwards=!0,n[p]!==!1&&(n[p]=!0),new nn(e,t,n)},nn.fromTo=function(e,t,n,r){return r[ct]=n,n[p]&&(r[p]=!0),new nn(e,t,r)},nn.delayedCall=function(e,t,n,r,i){return new nn(t,0,{delay:e,onComplete:t,onCompleteParams:n,onCompleteScope:r,onReverseComplete:t,onReverseCompleteParams:n,onReverseCompleteScope:r,immediateRender:!1,useFrames:i,overwrite:0})},nn.set=function(e,t){return new nn(e,0,t)},nn.killTweensOf=nn.killDelayedCallsTo=function(e,n){for(var r=nn[at](e),i=r[t];--i>-1;)r[i][it](n,e)},nn[at]=function(e){if(s!=e){e=Y!=typeof e?e:nn[nt](e)||e;var n,r,i,o;if((e instanceof Array||e.jquery)&&pt==typeof e[0]){for(n=e[t],r=[];--n>-1;)r=r[J](nn[at](e[n]));for(n=r[t];--n>-1;)for(o=r[n],i=n;--i>-1;)o===r[i]&&r[X](n,1)}else for(r=hn(e)[J](),n=r[t];--n>-1;)r[n]._gc&&r[X](n,1);return r}};var vn=zt("plugins.TweenPlugin",function(e,t){this[f]=(e||"")[et](","),this[V]=this[f][0],this[Lt]=t||0},!0);if(Ht=vn[x],vn.version=12,vn.API=2,Ht[o]=s,Ht._addTween=function(e,t,n,r,i,u){var a,f;s!=r&&(a="number"==typeof r||"="!==r[Nt](1)?Number(r)-n:parseInt(r[Nt](0)+"1",10)*Number(r[ht](2)))&&(this[o]=f={_next:this[o],t:e,p:t,s:n,c:a,f:S==typeof e[t],n:i||t,r:u},f[v]&&(f[v][C]=f))},Ht.setRatio=function(e){for(var t,n=this[o];n;)t=n.c*e+n.s,n.r&&(t=t+(t>0?.5:-0.5)>>0),n.f?n.t[n.p](t):n.t[n.p]=t,n=n[v]},Ht[it]=function(e){if(s!=e[this[V]])this[f]=[];else for(var n=this[f][t];--n>-1;)s!=e[this[f][n]]&&this[f][X](n,1);for(var r=this[o];r;)s!=e[r.n]&&(r[v]&&(r[v][C]=r[C]),r[C]?(r[C][v]=r[v],r[C]=s):this[o]===r&&(this[o]=r[v])),r=r[v];return!1},Ht._roundProps=function(e,t){for(var n=this[o];n;)(e[this[V]]||s!=n.n&&e[n.n[et](this[V]+"_").join("")])&&(n.r=t),n=n[v]},nn[P]=function(e,t){var n,r=t[o];if(F===e){for(var i,s,u,a;r;){for(a=r[v],i=s;i&&i.pr>r.pr;)i=i[v];(r[C]=i?i[C]:u)?r[C][v]=r:s=r,(r[v]=i)?i[C]=r:u=r,r=a}r=t[o]=s}for(;r;)r.pg&&S==typeof r.t[e]&&r.t[e]()&&(n=!0),r=r[v];return n},vn.activate=function(e){for(var n=e[t];--n>-1;)e[n].API===vn.API&&(nn._plugins[(new e[n])[V]]=e[n]);return!0},Dt=e._gsQueue){for(Pt=0;Dt[t]>Pt;Pt++)Dt[Pt]();for(Ht in qt)qt[Ht].func||e.console.log("GSAP encountered missing dependency: com.greensock."+Ht)}Bt=!1}(window),function(e){"use strict";var t="function",n=null,r="easing",i="object",s="length",o="duration",u="totalDuration",a,f,l,c=e.fn.animate,h=e.fn.stop,p=!0,d=function(e,n){t==typeof e&&this.each(e),n()},v=function(e,r,i,s,o){o=t==typeof o?o:n,r=t==typeof r?r:n,(r||o)&&(s[e]=o?d:i.each,s[e+"Scope"]=i,s[e+"Params"]=o?[r,o]:[r])},m={overwrite:1,delay:1,useFrames:1,runBackwards:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,autoCSS:1},g=function(e,t){for(var n in m)m[n]&&void 0!==e[n]&&(t[n]=e[n])},y=function(e){return function(t){return e.getRatio(t)}},b={},w=function(){var t,i,s=window.GreenSockGlobals||window;if(a=s.TweenMax||s.TweenLite,f=s.CSSPlugin,a&&(t=(a.version+".0.0").split("."),i=!(Number(t[0])>0&&Number(t[1])>7)),!a||!f||i)return a=n,!l&&window.console&&(window.console.log("The jquery.gsap.js plugin requires the TweenMax (or at least TweenLite and CSSPlugin) JavaScript file(s)."+(i?" Version "+t.join(".")+" is too old.":"")),l=!0),void 0;if(b=s.Ease.map,b&&e[r]){for(var o in b)e[r][o]=y(b[o]);w=!1}};e.fn.animate=function(u,l,h,d){if(u=u||{},w&&(w(),!a||!f))return c.call(this,u,l,h,d);if(!p||u.skipGSAP===!0||i==typeof l&&t==typeof l.step)return c.call(this,u,l,h,d);var m,y,N,C,L,A=e.speed(l,h,d),O={ease:b[A[r]]||(A[r]===!1?b.linear:b.swing)},M=this,_=i==typeof l?l.specialEasing:n;for(N in u)y=u[N],y instanceof Array&&b[y[1]]&&(_=_||{},_[N]=y[1],y=y[0]),"toggle"===y||"hide"===y||"show"===y?(m=m||{},m[N]=y):O[-1===N.indexOf("-")?N:e.camelCase(N)]=y;if(_){L=[];for(N in _)y=L[L[s]]={},g(O,y),y.ease=b[_[N]]||O.ease,-1!==N.indexOf("-")&&(N=e.camelCase(N)),y[N]=O[N];0===L[s]&&(L=n)}return C=function(t){if(m&&c.call(M,m,{duration:A[o],easing:A[r],queue:!1}),L)for(var n=L[s];--n>-1;)a.to(M,e.fx.off?0:A[o]/1e3,L[n]);v("onComplete",A.old,M,O,t),a.to(M,e.fx.off?0:A[o]/1e3,O)},A.queue!==!1?M.queue(A.queue,C):C(),M},e.fn.stop=function(e,t){if(h.call(this,e,t),a){if(t)for(var n,r=a.getTweensOf(this),i=r[s];--i>-1;)n=r[i].totalTime()/r[i][u](),n>0&&1>n&&r[i].seek(r[i][u]());a.killTweensOf(this)}return this},e.gsap={enabled:function(e){p=e},version:"0.1.3"}}(jQuery),function(e,t,n,r,i,s,o){function a(e){var t,r,i=this,s=e[u],o=0,a=i.i=i.j=i.m=0;i.S=[],i.c=[];for(s||(e=[s++]);o<n;)i.S[o]=o++;for(o=0;o<n;o++)t=i.S[o],a=a+t+e[o%s]&n-1,r=i.S[a],i.S[o]=r,i.S[a]=t;i.g=function(e){var t=i.S,r=i.i+1&n-1,s=t[r],o=i.j+s&n-1,u=t[o];t[r]=u,t[o]=s;for(var a=t[s+u&n-1];--e;)r=r+1&n-1,s=t[r],o=o+s&n-1,u=t[o],t[r]=u,t[o]=s,a=a*n+t[s+u&n-1];return i.i=r,i.j=o,a},i.g(n)}function f(e,t,n,r,i){n=[],i=typeof e;if(t&&i=="object")for(r in e)if(r.indexOf("S")<5)try{n.push(f(e[r],t-1))}catch(s){}return n[u]?n:e+(i!="string"?"\0":"")}function l(e,t,r,i){e+="";for(i=r=0;i<e[u];i++){var s=t,o=i&n-1,a=(r^=t[i&n-1]*19)+e.charCodeAt(i);s[o]=a&n-1}e="";for(i in t)e+=String.fromCharCode(t[i]);return e}var u="length";t.seedrandom=function(c,h){var d=[],v;return c=l(f(h?[c,e]:arguments[u]?c:[(new Date).getTime(),e,window],3),d),v=new a(d),l(v.S,e),t.random=function(){for(var e=v.g(r),t=o,u=0;e<i;)e=(e+u)*n,t*=n,u=v.g(1);for(;e>=s;)e/=2,t/=2,u>>>=1;return(e+u)/t},c},o=t.pow(n,r),i=t.pow(2,i),s=i*2,l(t.random(),e)}([],Math,256,6,52);var THREE=THREE||{REVISION:"51 Oz Mod"};self.console===undefined&&(self.console={info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}}),self.Int32Array===undefined&&(self.Int32Array=Array,self.Float32Array=Array),String.prototype.startsWith===undefined&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)===e}),String.prototype.endsWith===undefined&&(String.prototype.endsWith=function(e){var t=String(e),n=this.lastIndexOf(t);return n>=0&&n===this.length-t.length}),!String.prototype.trim===undefined&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(){var e="requestAnimationFrame",t="cancelAnimationFrame",n=0,r=["ms","moz","webkit","o"];for(var i=0;i<r.length&&!window[e];++i)window[e]=window[r[i]+"RequestAnimationFrame"],window[t]=window[r[i]+"CancelAnimationFrame"]||window[r[i]+"CancelRequestAnimationFrame"];window[e]===undefined&&(window[e]=function(e,t){var r=Date.now(),i=Math.max(0,16-(r-n)),s=window.setTimeout(function(){e(r+i)},i);return n=r+i,s}),window[t]===undefined&&(window[t]=function(e){clearTimeout(e)})}(),THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},setLength:function(e){return this.normalize().multiplyScalar(e)},lerpSelf:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},isZero:function(){return this.lengthSq()<1e-4},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},multiply:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},multiplySelf:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},divideSelf:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e,this.z/=e):(this.x=0,this.y=0,this.z=0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.normalize().multiplyScalar(e)},lerpSelf:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},crossSelf:function(e){var t=this.x,n=this.y,r=this.z;return this.x=n*e.z-r*e.y,this.y=r*e.x-t*e.z,this.z=t*e.y-n*e.x,this},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){return(new THREE.Vector3).sub(this,e).lengthSq()},getPositionFromMatrix:function(e){var t="elements";return this.x=e[t][12],this.y=e[t][13],this.z=e[t][14],this},setEulerFromRotationMatrix:function(e,t){function i(e){return Math.min(Math.max(e,-1),1)}var n="asin",r="atan2",s=e.elements,o=s[0],u=s[4],a=s[8],f=s[1],l=s[5],c=s[9],h=s[2],p=s[6],d=s[10];return t===undefined||t==="XYZ"?(this.y=Math[n](i(a)),Math.abs(a)<.99999?(this.x=Math[r](-c,d),this.z=Math[r](-u,o)):(this.x=Math[r](p,l),this.z=0)):t==="YXZ"?(this.x=Math[n](-i(c)),Math.abs(c)<.99999?(this.y=Math[r](a,d),this.z=Math[r](f,l)):(this.y=Math[r](-h,o),this.z=0)):t==="ZXY"?(this.x=Math[n](i(p)),Math.abs(p)<.99999?(this.y=Math[r](-h,d),this.z=Math[r](-u,l)):(this.y=0,this.z=Math[r](f,o))):t==="ZYX"?(this.y=Math[n](-i(h)),Math.abs(h)<.99999?(this.x=Math[r](p,d),this.z=Math[r](f,o)):(this.x=0,this.z=Math[r](-u,l))):t==="YZX"?(this.z=Math[n](i(f)),Math.abs(f)<.99999?(this.x=Math[r](-c,l),this.y=Math[r](-h,o)):(this.x=0,this.y=Math[r](a,d))):t==="XZY"&&(this.z=Math[n](-i(u)),Math.abs(u)<.99999?(this.x=Math[r](p,l),this.y=Math[r](a,o)):(this.x=Math[r](-c,d),this.y=0)),this},setEulerFromQuaternion:function(e,t){function i(e){return Math.min(Math.max(e,-1),1)}var n="atan2",r="asin",s=e.x*e.x,o=e.y*e.y,u=e.z*e.z,a=e.w*e.w;return t===undefined||t==="XYZ"?(this.x=Math[n](2*(e.x*e.w-e.y*e.z),a-s-o+u),this.y=Math[r](i(2*(e.x*e.z+e.y*e.w))),this.z=Math[n](2*(e.z*e.w-e.x*e.y),a+s-o-u)):t==="YXZ"?(this.x=Math[r](i(2*(e.x*e.w-e.y*e.z))),this.y=Math[n](2*(e.x*e.z+e.y*e.w),a-s-o+u),this.z=Math[n](2*(e.x*e.y+e.z*e.w),a-s+o-u)):t==="ZXY"?(this.x=Math[r](i(2*(e.x*e.w+e.y*e.z))),this.y=Math[n](2*(e.y*e.w-e.z*e.x),a-s-o+u),this.z=Math[n](2*(e.z*e.w-e.x*e.y),a-s+o-u)):t==="ZYX"?(this.x=Math[n](2*(e.x*e.w+e.z*e.y),a-s-o+u),this.y=Math[r](i(2*(e.y*e.w-e.x*e.z))),this.z=Math[n](2*(e.x*e.y+e.z*e.w),a+s-o-u)):t==="YZX"?(this.x=Math[n](2*(e.x*e.w-e.z*e.y),a-s+o-u),this.y=Math[n](2*(e.y*e.w-e.x*e.z),a+s-o-u),this.z=Math[r](i(2*(e.x*e.y+e.z*e.w)))):t==="XZY"&&(this.x=Math[n](2*(e.x*e.w+e.y*e.z),a-s+o-u),this.y=Math[n](2*(e.x*e.z+e.y*e.w),a+s-o-u),this.z=Math[r](i(2*(e.z*e.w-e.x*e.y)))),this},getScaleFromMatrix:function(e){var t="length",n="elements",r=this.set(e[n][0],e[n][1],e[n][2])[t](),i=this.set(e[n][4],e[n][5],e[n][6])[t](),s=this.set(e[n][8],e[n][9],e[n][10])[t]();return this.x=r,this.y=i,this.z=s,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},isZero:function(){return this.lengthSq()<1e-4},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=r!==undefined?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==undefined?e.w:1,this},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e,this.z/=e,this.w/=e):(this.x=0,this.y=0,this.z=0,this.w=1),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.normalize().multiplyScalar(e)},lerpSelf:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,s=.01,o=.1,u=e.elements,a=u[0],f=u[4],l=u[8],c=u[1],h=u[5],p=u[9],d=u[2],v=u[6],m=u[10];if(Math.abs(f-c)<s&&Math
.abs(l-d)<s&&Math.abs(p-v)<s){if(Math.abs(f+c)<o&&Math.abs(l+d)<o&&Math.abs(p+v)<o&&Math.abs(a+h+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(a+1)/2,y=(h+1)/2,b=(m+1)/2,w=(f+c)/4,E=(l+d)/4,S=(p+v)/4;return g>y&&g>b?g<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=w/n,i=E/n):y>b?y<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=w/r,i=S/r):b<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=E/i,r=S/i),this.set(n,r,i,t),this}var x=Math.sqrt((v-p)*(v-p)+(l-d)*(l-d)+(c-f)*(c-f));return Math.abs(x)<.001&&(x=1),this.x=(v-p)/x,this.y=(l-d)/x,this.z=(c-f)/x,this.w=Math.acos((a+h+m-1)/2),this}},THREE.Vertex=function(e){return console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead."),e},THREE.Matrix3=function(){this.elements=new Float32Array(9)},THREE.Matrix3.prototype={constructor:THREE.Matrix3,getInverse:function(e){var t=e.elements,n=t[10]*t[5]-t[6]*t[9],r=-t[10]*t[1]+t[2]*t[9],i=t[6]*t[1]-t[2]*t[5],s=-t[10]*t[4]+t[6]*t[8],o=t[10]*t[0]-t[2]*t[8],u=-t[6]*t[0]+t[2]*t[4],a=t[9]*t[4]-t[5]*t[8],f=-t[9]*t[0]+t[1]*t[8],l=t[5]*t[0]-t[1]*t[4],c=t[0]*n+t[1]*s+t[2]*a;c===0&&console.warn("Matrix3.getInverse(): determinant == 0");var h=1/c,p=this.elements;return p[0]=h*n,p[1]=h*r,p[2]=h*i,p[3]=h*s,p[4]=h*o,p[5]=h*u,p[6]=h*a,p[7]=h*f,p[8]=h*l,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},transposeIntoArray:function(e){var t=this.m;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},THREE.Matrix4=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){this.elements=new Float32Array(16),this.set(e!==undefined?e:1,t||0,n||0,r||0,i||0,s!==undefined?s:1,o||0,u||0,a||0,f||0,l!==undefined?l:1,c||0,h||0,p||0,d||0,v!==undefined?v:1)},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=s,m[9]=o,m[13]=u,m[2]=a,m[6]=f,m[10]=l,m[14]=c,m[3]=h,m[7]=p,m[11]=d,m[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]),this},lookAt:function(e,t,n){var r="Matrix4",i="normalize",s=this.elements,o=THREE[r].__v1,u=THREE[r].__v2,a=THREE[r].__v3;return a.sub(e,t)[i](),a.length()===0&&(a.z=1),o.cross(n,a)[i](),o.length()===0&&(a.x+=1e-4,o.cross(n,a)[i]()),u.cross(a,o),s[0]=o.x,s[4]=u.x,s[8]=a.x,s[1]=o.y,s[5]=u.y,s[9]=a.y,s[2]=o.z,s[6]=u.z,s[10]=a.z,this},multiply:function(e,t){var n="elements",r=e[n],i=t[n],s=this[n],o=r[0],u=r[4],a=r[8],f=r[12],l=r[1],c=r[5],h=r[9],p=r[13],d=r[2],v=r[6],m=r[10],g=r[14],y=r[3],b=r[7],w=r[11],E=r[15],S=i[0],x=i[4],T=i[8],N=i[12],C=i[1],k=i[5],L=i[9],A=i[13],O=i[2],M=i[6],_=i[10],D=i[14],P=i[3],H=i[7],B=i[11],j=i[15];return s[0]=o*S+u*C+a*O+f*P,s[4]=o*x+u*k+a*M+f*H,s[8]=o*T+u*L+a*_+f*B,s[12]=o*N+u*A+a*D+f*j,s[1]=l*S+c*C+h*O+p*P,s[5]=l*x+c*k+h*M+p*H,s[9]=l*T+c*L+h*_+p*B,s[13]=l*N+c*A+h*D+p*j,s[2]=d*S+v*C+m*O+g*P,s[6]=d*x+v*k+m*M+g*H,s[10]=d*T+v*L+m*_+g*B,s[14]=d*N+v*A+m*D+g*j,s[3]=y*S+b*C+w*O+E*P,s[7]=y*x+b*k+w*M+E*H,s[11]=y*T+b*L+w*_+E*B,s[15]=y*N+b*A+w*D+E*j,this},multiplySelf:function(e){return this.multiply(this,e)},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiply(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,s=1/(t[3]*n+t[7]*r+t[11]*i+t[15]);return e.x=(t[0]*n+t[4]*r+t[8]*i+t[12])*s,e.y=(t[1]*n+t[5]*r+t[9]*i+t[13])*s,e.z=(t[2]*n+t[6]*r+t[10]*i+t[14])*s,e},multiplyVector4:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,s=e.w;return e.x=t[0]*n+t[4]*r+t[8]*i+t[12]*s,e.y=t[1]*n+t[5]*r+t[9]*i+t[13]*s,e.z=t[2]*n+t[6]*r+t[10]*i+t[14]*s,e.w=t[3]*n+t[7]*r+t[11]*i+t[15]*s,e},multiplyVector3Array:function(e){var t=THREE.Matrix4.__v1;for(var n=0,r=e.length;n<r;n+=3)t.x=e[n],t.y=e[n+1],t.z=e[n+2],this.multiplyVector3(t),e[n]=t.x,e[n+1]=t.y,e[n+2]=t.z;return e},rotateAxis:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return e.x=n*t[0]+r*t[4]+i*t[8],e.y=n*t[1]+r*t[5]+i*t[9],e.z=n*t[2]+r*t[6]+i*t[10],e.normalize(),e},crossVector:function(e){var t=this.elements,n=new THREE.Vector4;return n.x=t[0]*e.x+t[4]*e.y+t[8]*e.z+t[12]*e.w,n.y=t[1]*e.x+t[5]*e.y+t[9]*e.z+t[13]*e.w,n.z=t[2]*e.x+t[6]*e.y+t[10]*e.z+t[14]*e.w,n.w=e.w?t[3]*e.x+t[7]*e.y+t[11]*e.z+t[15]*e.w:1,n},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],u=e[9],a=e[13],f=e[2],l=e[6],c=e[10],h=e[14],p=e[3],d=e[7],v=e[11],m=e[15];return i*u*l*p-r*a*l*p-i*o*c*p+n*a*c*p+r*o*h*p-n*u*h*p-i*u*f*d+r*a*f*d+i*s*c*d-t*a*c*d-r*s*h*d+t*u*h*d+i*o*f*v-n*a*f*v-i*s*l*v+t*a*l*v+n*s*h*v-t*o*h*v-r*o*f*m+n*u*f*m+r*s*l*m-t*u*l*m-n*s*c*m+t*o*c*m},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e=this.elements;return THREE.Matrix4.__v1.set(e[12],e[13],e[14])},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getColumnX:function(){var e=this.elements;return THREE.Matrix4.__v1.set(e[0],e[1],e[2])},getColumnY:function(){var e=this.elements;return THREE.Matrix4.__v1.set(e[4],e[5],e[6])},getColumnZ:function(){var e=this.elements;return THREE.Matrix4.__v1.set(e[8],e[9],e[10])},getInverse:function(e){var t=this.elements,n=e.elements,r=n[0],i=n[4],s=n[8],o=n[12],u=n[1],a=n[5],f=n[9],l=n[13],c=n[2],h=n[6],p=n[10],d=n[14],v=n[3],m=n[7],g=n[11],y=n[15];return t[0]=f*d*m-l*p*m+l*h*g-a*d*g-f*h*y+a*p*y,t[4]=o*p*m-s*d*m-o*h*g+i*d*g+s*h*y-i*p*y,t[8]=s*l*m-o*f*m+o*a*g-i*l*g-s*a*y+i*f*y,t[12]=o*f*h-s*l*h-o*a*p+i*l*p+s*a*d-i*f*d,t[1]=l*p*v-f*d*v-l*c*g+u*d*g+f*c*y-u*p*y,t[5]=s*d*v-o*p*v+o*c*g-r*d*g-s*c*y+r*p*y,t[9]=o*f*v-s*l*v-o*u*g+r*l*g+s*u*y-r*f*y,t[13]=s*l*c-o*f*c+o*u*p-r*l*p-s*u*d+r*f*d,t[2]=a*d*v-l*h*v+l*c*m-u*d*m-a*c*y+u*h*y,t[6]=o*h*v-i*d*v-o*c*m+r*d*m+i*c*y-r*h*y,t[10]=i*l*v-o*a*v+o*u*m-r*l*m-i*u*y+r*a*y,t[14]=o*a*c-i*l*c-o*u*h+r*l*h+i*u*d-r*a*d,t[3]=f*h*v-a*p*v-f*c*m+u*p*m+a*c*g-u*h*g,t[7]=i*p*v-s*h*v+s*c*m-r*p*m-i*c*g+r*h*g,t[11]=s*a*v-i*f*v-s*u*m+r*f*m+i*u*g-r*a*g,t[15]=i*f*c-s*a*c+s*u*h-r*f*h-i*u*p+r*a*p,this.multiplyScalar(1/e.determinant()),this},setRotationFromEuler:function(e,t){var n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),u=Math.sin(r),a=Math.cos(i),f=Math.sin(i),l=Math.cos(s),c=Math.sin(s);if(t===undefined||t==="XYZ"){var h=o*l,p=o*c,d=u*l,v=u*c;n[0]=a*l,n[4]=-a*c,n[8]=f,n[1]=p+d*f,n[5]=h-v*f,n[9]=-u*a,n[2]=v-h*f,n[6]=d+p*f,n[10]=o*a}else if(t==="YXZ"){var m=a*l,g=a*c,y=f*l,b=f*c;n[0]=m+b*u,n[4]=y*u-g,n[8]=o*f,n[1]=o*c,n[5]=o*l,n[9]=-u,n[2]=g*u-y,n[6]=b+m*u,n[10]=o*a}else if(t==="ZXY"){var m=a*l,g=a*c,y=f*l,b=f*c;n[0]=m-b*u,n[4]=-o*c,n[8]=y+g*u,n[1]=g+y*u,n[5]=o*l,n[9]=b-m*u,n[2]=-o*f,n[6]=u,n[10]=o*a}else if(t==="ZYX"){var h=o*l,p=o*c,d=u*l,v=u*c;n[0]=a*l,n[4]=d*f-p,n[8]=h*f+v,n[1]=a*c,n[5]=v*f+h,n[9]=p*f-d,n[2]=-f,n[6]=u*a,n[10]=o*a}else if(t==="YZX"){var w=o*a,E=o*f,S=u*a,x=u*f;n[0]=a*l,n[4]=x-w*c,n[8]=S*c+E,n[1]=c,n[5]=o*l,n[9]=-u*l,n[2]=-f*l,n[6]=E*c+S,n[10]=w-x*c}else if(t==="XZY"){var w=o*a,E=o*f,S=u*a,x=u*f;n[0]=a*l,n[4]=-c,n[8]=f*l,n[1]=w*c+x,n[5]=o*l,n[9]=E*c-S,n[2]=S*c-E,n[6]=u*l,n[10]=x*c+w}return this},setRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,s=e.w,o=n+n,u=r+r,a=i+i,f=n*o,l=n*u,c=n*a,h=r*u,p=r*a,d=i*a,v=s*o,m=s*u,g=s*a;return t[0]=1-(h+d),t[4]=l-g,t[8]=c+m,t[1]=l+g,t[5]=1-(f+d),t[9]=p-v,t[2]=c-m,t[6]=p+v,t[10]=1-(f+h),this},compose:function(e,t,n){var r=this.elements,i=THREE.Matrix4.__m1,s=THREE.Matrix4.__m2;return i.identity(),i.setRotationFromQuaternion(t),s.makeScale(n.x,n.y,n.z),this.multiply(i,s),r[12]=e.x,r[13]=e.y,r[14]=e.z,this},decompose:function(e,t,n){var r="elements",i="Matrix4",s="Vector3",o="Quaternion",u="length",a=this[r],f=THREE[i].__v1,l=THREE[i].__v2,c=THREE[i].__v3;f.set(a[0],a[1],a[2]),l.set(a[4],a[5],a[6]),c.set(a[8],a[9],a[10]),e=e instanceof THREE[s]?e:new THREE[s],t=t instanceof THREE[o]?t:new THREE[o],n=n instanceof THREE[s]?n:new THREE[s],n.x=f[u](),n.y=l[u](),n.z=c[u](),e.x=a[12],e.y=a[13],e.z=a[14];var h=THREE[i].__m1;return h.copy(this),h[r][0]/=n.x,h[r][1]/=n.x,h[r][2]/=n.x,h[r][4]/=n.y,h[r][5]/=n.y,h[r][6]/=n.y,h[r][8]/=n.z,h[r][9]/=n.z,h[r][10]/=n.z,t.setFromRotationMatrix(h),[e,t,n]},extractPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractRotation:function(e){var t="length",n=this.elements,r=e.elements,i=THREE.Matrix4.__v1,s=1/i.set(r[0],r[1],r[2])[t](),o=1/i.set(r[4],r[5],r[6])[t](),u=1/i.set(r[8],r[9],r[10])[t]();return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,this},translate:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[12]=t[0]*n+t[4]*r+t[8]*i+t[12],t[13]=t[1]*n+t[5]*r+t[9]*i+t[13],t[14]=t[2]*n+t[6]*r+t[10]*i+t[14],t[15]=t[3]*n+t[7]*r+t[11]*i+t[15],this},rotateX:function(e){var t=this.elements,n=t[4],r=t[5],i=t[6],s=t[7],o=t[8],u=t[9],a=t[10],f=t[11],l=Math.cos(e),c=Math.sin(e);return t[4]=l*n+c*o,t[5]=l*r+c*u,t[6]=l*i+c*a,t[7]=l*s+c*f,t[8]=l*o-c*n,t[9]=l*u-c*r,t[10]=l*a-c*i,t[11]=l*f-c*s,this},rotateY:function(e){var t=this.elements,n=t[0],r=t[1],i=t[2],s=t[3],o=t[8],u=t[9],a=t[10],f=t[11],l=Math.cos(e),c=Math.sin(e);return t[0]=l*n-c*o,t[1]=l*r-c*u,t[2]=l*i-c*a,t[3]=l*s-c*f,t[8]=l*o+c*n,t[9]=l*u+c*r,t[10]=l*a+c*i,t[11]=l*f+c*s,this},rotateZ:function(e){var t=this.elements,n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=Math.cos(e),c=Math.sin(e);return t[0]=l*n+c*o,t[1]=l*r+c*u,t[2]=l*i+c*a,t[3]=l*s+c*f,t[4]=l*o-c*n,t[5]=l*u-c*r,t[6]=l*a-c*i,t[7]=l*f-c*s,this},rotateByAxis:function(e,t){var n=this.elements;if(e.x===1&&e.y===0&&e.z===0)return this.rotateX(t);if(e.x===0&&e.y===1&&e.z===0)return this.rotateY(t);if(e.x===0&&e.y===0&&e.z===1)return this.rotateZ(t);var r=e.x,i=e.y,s=e.z,o=Math.sqrt(r*r+i*i+s*s);r/=o,i/=o,s/=o;var u=r*r,a=i*i,f=s*s,l=Math.cos(t),c=Math.sin(t),h=1-l,p=r*i*h,d=r*s*h,v=i*s*h,m=r*c,g=i*c,y=s*c,b=u+(1-u)*l,w=p+y,E=d-g,S=p-y,x=a+(1-a)*l,T=v+m,N=d+g,C=v-m,k=f+(1-f)*l,L=n[0],A=n[1],O=n[2],M=n[3],_=n[4],D=n[5],P=n[6],H=n[7],B=n[8],j=n[9],F=n[10],I=n[11],q=n[12],R=n[13],U=n[14],z=n[15];return n[0]=b*L+w*_+E*B,n[1]=b*A+w*D+E*j,n[2]=b*O+w*P+E*F,n[3]=b*M+w*H+E*I,n[4]=S*L+x*_+T*B,n[5]=S*A+x*D+T*j,n[6]=S*O+x*P+T*F,n[7]=S*M+x*H+T*I,n[8]=N*L+C*_+k*B,n[9]=N*A+C*D+k*j,n[10]=N*O+C*P+k*F,n[11]=N*M+C*H+k*I,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(n,r)))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,u=e.z,a=i*s,f=i*o;return this.set(a*s+n,a*o-r*u,a*u+r*o,0,a*o+r*u,f*o+n,f*u-r*s,0,a*u-r*o,f*u+r*s,i*u*u+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeFrustum:function(e,t,n,r,i,s){var o=this.elements,u=2*i/(t-e),a=2*i/(r-n),f=(t+e)/(t-e),l=(r+n)/(r-n),c=-(s+i)/(s-i),h=-2*s*i/(s-i);return o[0]=u,o[4]=0,o[8]=f,o[12]=0,o[1]=0,o[5]=a,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(e,t,n,r){var i=n*Math.tan(e*Math.PI/360),s=-i,o=s*t,u=i*t;return this.makeFrustum(o,u,s,i,n,r)},makeOrthographic:function(e,t,n,r,i,s){var o=this.elements,u=t-e,a=n-r,f=s-i,l=(t+e)/u,c=(n+r)/a,h=(s+i)/f;return o[0]=2/u,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2/a,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2/f,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},clone:function(){var e=this.elements;return new THREE.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}},function(){var e="Matrix4",t="Vector3",n="startTime",r="running";THREE[e].__v1=new THREE[t],THREE[e].__v2=new THREE[t],THREE[e].__v3=new THREE[t],THREE[e].__m1=new THREE[e],THREE[e].__m2=new THREE[e],THREE.Clock=function(e){this.autoStart=e!==undefined?e:!0,this[n]=0,this.oldTime=0,this.elapsedTime=0,this[r]=!1},THREE.Clock.prototype.start=function(){this[n]=Date.now(),this.oldTime=this[n],this[r]=!0},THREE.Clock.prototype.stop=function(){this.getElapsedTime(),this[r]=!1}}(),THREE.Clock.prototype.getElapsedTime=function(){return this.elapsedTime+=this.getDelta(),this.elapsedTime},THREE.Clock.prototype.getDelta=function(){var e=0;this.autoStart&&!this.running&&this.start();if(this.running){var t=Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e},THREE.Color=function(e){return e!==undefined&&this.setHex(e),this},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSV:function(e,t,n){var r,i,s,o,u;return n===0?this.r=this.g=this.b=0:(r=Math.floor(e*6),i=e*6-r,s=n*(1-t),o=n*(1-t*i),u=n*(1-t*(1-i)),r===0?(this.r=n,this.g=u,this.b=s):r===1?(this.r=o,this.g=n,this.b=s):r===2?(this.r=s,this.g=n,this.b=u):r===3?(this.r=s,this.g=o,this.b=n):r===4?(this.r=u,this.g=s,this.b=n):r===5&&(this.r=n,this.g=s,this.b=o)),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},lerpSelf:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getContextStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.EventTarget=function(){var e={};this.addEventListener=function(t,n){e[t]===undefined&&(e[t]=[]),e[t].indexOf(n)===-1&&e[t].push(n)},this.dispatchEvent=function(t){for(var n in e[t.type])e[t.type][n](t)},this.removeEventListener=function(t,n){var r=e[t].indexOf(n);r!==-1&&e[t].splice(r,1)}},THREE.Face3=function(e,t,n,r,i,s){this.a=e,this.b=t,this.c=n,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=i instanceof THREE.Color?i:new THREE.Color,this.vertexColors=i instanceof Array?i:[],this.vertexTangents=[],this.materialIndex=s,this.centroid=new THREE.Vector3},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e="materialIndex",t="length",n="vertexNormals",r="vertexColors",i="vertexTangents",s=new THREE.Face3(this.a,this.b,this.c);s.normal.copy(this.normal),s.color.copy(this.color),s.centroid.copy(this.centroid),s[e]=this[e];var o,u;for(o=0,u=this[n][t];o<u;o++)s[n][o]=this[n][o].clone();for(o=0,u=this[r][t];o<u;o++)s[r][o]=this[r][o].clone();for(o=0,u=this[i][t];o<u;o++)s[i][o]=this[i][o].clone();return s}},THREE.Face4=function(e,t,n,r,i,s,o){this.a=e,this.b=t,this.c=n,this.d=r,this.normal=i instanceof THREE.Vector3?i:new THREE.Vector3,this.vertexNormals=i instanceof Array?i:[],this.color=s instanceof THREE.Color?s:new THREE.Color,this.vertexColors=s instanceof Array?s:[],this.vertexTangents=[],this.materialIndex=o,this.centroid=new THREE.Vector3},THREE.Face4.prototype={constructor:THREE.Face4,clone:function(){var e="materialIndex",t="length",n="vertexNormals",r="vertexColors",i="vertexTangents",s=new THREE.Face4(this.a,this.b,this.c,this.d);s.normal.copy(this.normal),s.color.copy(this.color),s.centroid.copy(this.centroid),s[e]=this[e];var o,u;for(o=0,u=this[n][t];o<u;o++)s[n][o]=this[n][o].clone();for(o=0,u=this[r][t];o<u;o++)s[r][o]=this[r][o].clone();for(o=0,u=this[i][t];o<u;o++)s[i][o]=this[i][o].clone();return s}},THREE.Frustum=function(){this.planes=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4]},THREE.Frustum.prototype.setFromMatrix=function(e){var t,n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],u=r[3],a=r[4],f=r[5],l=r[6],c=r[7],h=r[8],p=r[9],d=r[10],v=r[11],m=r[12],g=r[13],y=r[14],b=r[15];n[0].set(u-i,c-a,v-h,b-m),n[1].set(u+i,c+a,v+h,b+m),n[2].set(u+s,c+f,v+p,b+g),n[3].set(u-s,c-f,v-p,b-g),n[4].set(u-o,c-l,v-d,b-y),n[5].set(u+o,c+l,v+d,b+y);for(var w=0;w<6;w++)t=n[w],t.divideScalar(Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z))},THREE.Frustum.prototype.contains=function(e){var t=0,n=this.planes,r=e.matrixWorld,i=r.elements,s=-e.geometry.boundingSphere.radius*r.getMaxScaleOnAxis();for(var o=0;o<6;o++){t=n[o].x*i[12]+n[o].y*i[13]+n[o].z*i[14]+n[o].w;if(t<=s)return!1}return!0},THREE.Frustum.__v1=new THREE.Vector3,THREE.Math={clamp:function(e,t,n){return e<t?t:e>n?n:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},sign:function(e){return e<0?-1:e>0?1:0}},function(){var e="Vector3",t=!0,n="Matrix4",r=!1;THREE.Object3D=function(){this.id=THREE.Object3DCount++,this.name="",this.properties={},this.parent=undefined,this.children=[],this.up=new THREE[e](0,1,0),this.position=new THREE[e],this.rotation=new THREE[e],this.eulerOrder="XYZ",this.scale=new THREE[e](1,1,1),this.renderDepth=null,this.rotationAutoUpdate=t,this.matrix=new THREE[n],this.matrixWorld=new THREE[n],this.matrixRotationWorld=new THREE[n],this.matrixAutoUpdate=t,this.matrixWorldNeedsUpdate=t,this.quaternion=new THREE.Quaternion,this.useQuaternion=r,this.boundRadius=0,this.boundRadiusScale=1,this.visible=t,this.castShadow=r,this.receiveShadow=r,this.frustumCulled=t,this._vector=new THREE[e]}}(),THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(e){var t="matrix";this[t].multiply(e,this[t]),this.scale.getScaleFromMatrix(this[t]);var n=(new THREE.Matrix4).extractRotation(this[t]);this.rotation.setEulerFromRotationMatrix(n,this.eulerOrder),this.position.getPositionFromMatrix(this[t])},translate:function(e,t){this.matrix.rotateAxis(t),this.position.addSelf(t.multiplyScalar(e))},translateX:function(e){this.translate(e,this._vector.set(1,0,0))},translateY:function(e){this.translate(e,this._vector.set(0,1,0))},translateZ:function(e){this.translate(e,this._vector.set(0,0,1))},localToWorld:function(e){return this.matrixWorld.multiplyVector3(e)},worldToLocal:function(e){return THREE.Object3D.__m1.getInverse(this.matrixWorld).multiplyVector3(e)},lookAt:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder)},add:function(e){var t="parent";if(e===this){console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");return}if(e instanceof THREE.Object3D){e[t]!==undefined&&e[t].remove(e),e[t]=this,this.children.push(e);var n=this;while(n[t]!==undefined)n=n[t];n!==undefined&&n instanceof THREE.Scene&&n.__addObject(e)}},remove:function(e){var t="parent",n=this.children.indexOf(e);if(n!==-1){e[t]=undefined,this.children.splice(n,1);var r=this;while(r[t]!==undefined)r=r[t];r!==undefined&&r instanceof THREE.Scene&&r.__removeObject(e)}},getChildByName:function(e,t){var n,r,i;for(n=0,r=this.children.length;n<r;n++){i=this.children[n];if(i.name===e)return i;if(t){i=i.getChildByName(e,t);if(i!==undefined)return i}}return undefined},getDescendants:function(e){var t="children";e===undefined&&(e=[]),Array.prototype.push.apply(e,this[t]);for(var n=0,r=this[t].length;n<r;n++)this[t][n].getDescendants(e);return e},updateMatrix:function(){var e="matrix",t="scale";this[e].setPosition(this.position),this.useQuaternion===!1?this[e].setRotationFromEuler(this.rotation,this.eulerOrder):this[e].setRotationFromQuaternion(this.quaternion);if(this[t].x!==1||this[t].y!==1||this[t].z!==1)this[e][t](this[t]),this.boundRadiusScale=Math.max(this[t].x,Math.max(this[t].y,this[t].z));this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){var t=!0,n="matrixWorldNeedsUpdate",r="matrixWorld";this.matrixAutoUpdate===t&&this.updateMatrix();if(this[n]===t||e===t)this.parent===undefined?this[r].copy(this.matrix):this[r].multiply(this.parent[r],this.matrix),this[n]=!1,e=t;for(var i=0,s=this.children.length;i<s;i++)this.children[i].updateMatrixWorld(e)},clone:function(){}},THREE.Object3D.__m1=new THREE.Matrix4,THREE.Object3DCount=0,THREE.Projector=function(){function pt(){if(H===j){var e=new THREE.RenderableObject;return B[d](e),j++,H++,e}return B[H++]}function dt(){if(I===R){var e=new THREE.RenderableVertex;return q[d](e),R++,I++,e}return q[I++]}function vt(){if(z===X){var e=new THREE.RenderableFace3;return W[d](e),X++,z++,e}return W[z++]}function mt(){if(V===J){var e=new THREE.RenderableFace4;return $[d](e),J++,V++,e}return $[V++]}function gt(){if(Q===Y){var e=new THREE.RenderableLine;return G[d](e),Y++,Q++,e}return G[Q++]}function yt(){if(et===nt){var e=new THREE.RenderableParticle;return tt[d](e),nt++,et++,e}return tt[et++]}function bt(e,t){return t.z-e.z}function wt(e,t){var n=0,r=1,i=e.z+e.w,s=t.z+t.w,o=-e.z+e.w,u=-t.z+t.w;return i>=0&&s>=0&&o>=0&&u>=0?v:i<0&&s<0||o<0&&u<0?p:(i<0?n=Math.max(n,i/(i-s)):s<0&&(r=Math.min(r,i/(i-s))),o<0?n=Math.max(n,o/(o-u)):u<0&&(r=Math.min(r,o/(o-u))),r<n?p:(e.lerpSelf(t,n),t.lerpSelf(e,1-r),v))}var e="Vector4",t="getInverse",n="matrixWorldInverse",r="matrixWorld",i="multiply",s="projectionMatrix",o="multiplyVector3",u="unprojectVector",a="projectionMatrixInverse",f="length",l="objects",c="sprites",h="visible",p=!1,d="push",v=!0,m="object",g="renderDepth",y=null,b="copy",w="getPosition",E="elements",S="updateMatrixWorld",x="geometry",T="material",N="positionWorld",C="positionScreen",k="multiplyVector4",L="DoubleSide",A="normalWorld",O="centroidWorld",M="centroidScreen",_="multiplyScalar",D="scale",P,H,B=[],j=0,F,I,q=[],R=0,U,z,W=[],X=0,V,$=[],J=0,K,Q,G=[],Y=0,Z,et,tt=[],nt=0,rt={objects:[],sprites:[],lights:[],elements:[]},it=new THREE.Vector3,st=new THREE[e],ot=new THREE.Matrix4,ut=new THREE.Matrix4,at=new THREE.Frustum,ft=new THREE[e],lt=new THREE[e],ct;this.projectVector=function(e,u){return u[n][t](u[r]),ot[i](u[s],u[n]),ot[o](e),e},this[u]=function(e,n){return n[a][t](n[s]),ot[i](n[r],n[a]),ot[o](e),e},this.pickingRay=function(e,t){var n,r,i;return e.z=-1,n=new THREE.Vector3(e.x,e.y,1),this[u](e,t),this[u](n,t),n.subSelf(e).normalize(),new THREE.Ray(e,n)};var ht=function(e,t){H=0,rt[l][f]=0,rt[c][f]=0,rt.lights[f]=0;var n=function(e){for(var t=0,i=e.children[f];t<i;t++){var s=e.children[t];if(s[h]===p)continue;if(s instanceof THREE.Light)rt.lights[d](s);else if(s instanceof THREE.Mesh||s instanceof THREE.Line){if(s.frustumCulled===p||at.contains(s)===v)P=pt(),P[m]=s,s[g]!==y?P.z=s[g]:(it[b](s[r][w]()),ot[o](it),P.z=it.z),rt[l][d](P)}else s instanceof THREE.Sprite||s instanceof THREE.Particle?(P=pt(),P[m]=s,s[g]!==y?P.z=s[g]:(it[b](s[r][w]()),ot[o](it),P.z=it.z),rt[c][d](P)):(P=pt(),P[m]=s,s[g]!==y?P.z=s[g]:(it[b](s[r][w]()),ot[o](it),P.z=it.z),rt[l][d](P));n(s)}};return n(e),t===v&&rt[l].sort(bt),rt};this.projectScene=function(e,u,a,g){var y=u.near,w=u.far,P=p,H,B,j,R,W,X,$,J,G,Y,tt,nt,it,ct,pt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft;z=0,V=0,Q=0,et=0,rt[E][f]=0,e[S](),u.parent===undefined&&u[S](),u[n][t](u[r]),ot[i](u[s],u[n]),at.setFromMatrix(ot),rt=ht(e,a);for(H=0,B=rt[l][f];H<B;H++){it=rt[l][H][m],ct=it[r],I=0;if(it instanceof THREE.Mesh){Et=it[x],St=it[x].materials,xt=Et.vertices,Ct=Et.faces,Ot=Et.faceVertexUvs,pt=it.matrixRotationWorld.extractRotation(ct),Bt=it[T]instanceof THREE.MeshFaceMaterial,Ft=it[T].side;for(j=0,R=xt[f];j<R;j++)F=dt(),F[N][b](xt[j]),ct[o](F[N]),F[C][b](F[N]),ot[k](F[C]),F[C].x/=F[C].w,F[C].y/=F[C].w,F[h]=F[C].z>y&&F[C].z<w;for(W=0,X=Ct[f];W<X;W++){kt=Ct[W],jt=Bt===v?St[kt.materialIndex]:it[T];if(jt===undefined)continue;Ft=jt.side;if(kt instanceof THREE.Face3){_t=q[kt.a],Dt=q[kt.b],Pt=q[kt.c];if(_t[h]!==v||Dt[h]!==v||Pt[h]!==v)continue;P=(Pt[C].x-_t[C].x)*(Dt[C].y-_t[C].y)-(Pt[C].y-_t[C].y)*(Dt[C].x-_t[C].x)<0;if(Ft!==THREE[L]&&P!==(Ft===THREE.FrontSide))continue;U=vt(),U.v1[b](_t),U.v2[b](Dt),U.v3[b](Pt)}else if(kt instanceof THREE.Face4){_t=q[kt.a],Dt=q[kt.b],Pt=q[kt.c],Ht=q[kt.d];if(_t[h]!==v||Dt[h]!==v||Pt[h]!==v||Ht[h]!==v)continue;P=(Ht[C].x-_t[C].x)*(Dt[C].y-_t[C].y)-(Ht[C].y-_t[C].y)*(Dt[C].x-_t[C].x)<0||(Dt[C].x-Pt[C].x)*(Ht[C].y-Pt[C].y)-(Dt[C].y-Pt[C].y)*(Ht[C].x-Pt[C].x)<0;if(Ft!==THREE[L]&&P!==(Ft===THREE.FrontSide))continue;U=mt(),U.v1[b](_t),U.v2[b](Dt),U.v3[b](Pt),U.v4[b](Ht)}U[A][b](kt.normal),P===p&&(Ft===THREE.BackSide||Ft===THREE[L])&&U[A].negate(),pt[o](U[A]),U[O][b](kt.centroid),ct[o](U[O]),U[M][b](U[O]),ot[o](U[M]),Lt=kt.vertexNormals;for($=0,J=Lt[f];$<J;$++)At=U.vertexNormalsWorld[$],At[b](Lt[$]),P===p&&(Ft===THREE.BackSide||Ft===THREE[L])&&At.negate(),pt[o](At);U.vertexNormalsLength=Lt[f];for(G=0,Y=Ot[f];G<Y;G++){Mt=Ot[G][W];if(Mt===undefined)continue;for(tt=0,nt=Mt[f];tt<nt;tt++)U.uvs[G][tt]=Mt[tt]}U[T]=jt,U.z=U[M].z,rt[E][d](U)}}else if(it instanceof THREE.Line){ut[i](ot,ct),xt=it[x].vertices,_t=dt(),_t[C][b](xt[0]),ut[k](_t[C]);var It=it.type===THREE.LinePieces?2:1;for(j=1,R=xt[f];j<R;j++){_t=dt(),_t[C][b](xt[j]),ut[k](_t[C]);if((j+1)%It>0)continue;Dt=q[I-2],ft[b](_t[C]),lt[b](Dt[C]),wt(ft,lt)===v&&(ft[_](1/ft.w),lt[_](1/lt.w),K=gt(),K.v1[C][b](ft),K.v2[C][b](lt),K.z=Math.max(ft.z,lt.z),K[T]=it[T],rt[E][d](K))}}}for(H=0,B=rt[c][f];H<B;H++)it=rt[c][H][m],ct=it[r],it instanceof THREE.Particle&&(st.set(ct[E][12],ct[E][13],ct[E][14],1),ot[k](st),st.z/=st.w,st.z>0&&st.z<1&&(Z=yt(),Z[m]=it,Z.x=st.x/st.w,Z.y=st.y/st.w,Z.z=st.z,Z.rotation=it.rotation.z,Z[D].x=it[D].x*Math.abs(Z.x-(st.x+u[s][E][0])/(st.w+u[s][E][12])),Z[D].y=it[D].y*Math.abs(Z.y-(st.y+u[s][E][5])/(st.w+u[s][E][13])),Z[T]=it[T],rt[E][d](Z)));return g===v&&rt[E].sort(bt),rt}},THREE.Quaternion=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=r!==undefined?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEuler:function(e,t){var n=Math.cos(e.x/2),r=Math.cos(e.y/2),i=Math.cos(e.z/2),s=Math.sin(e.x/2),o=Math.sin(e.y/2),u=Math.sin(e.z/2);return t===undefined||t==="XYZ"?(this.x=s*r*i+n*o*u,this.y=n*o*i-s*r*u,this.z=n*r*u+s*o*i,this.w=n*r*i-s*o*u):t==="YXZ"?(this.x=s*r*i+n*o*u,this.y=n*o*i-s*r*u,this.z=n*r*u-s*o*i,this.w=n*r*i+s*o*u):t==="ZXY"?(this.x=s*r*i-n*o*u,this.y=n*o*i+s*r*u,this.z=n*r*u+s*o*i,this.w=n*r*i-s*o*u):t==="ZYX"?(this.x=s*r*i-n*o*u,this.y=n*o*i+s*r*u,this.z=n*r*u-s*o*i,this.w=n*r*i+s*o*u):t==="YZX"?(this.x=s*r*i+n*o*u,this.y=n*o*i+s*r*u,this.z=n*r*u-s*o*i,this.w=n*r*i-s*o*u):t==="XZY"&&(this.x=s*r*i-n*o*u,this.y=n*o*i-s*r*u,this.z=n*r*u+s*o*i,this.w=n*r*i+s*o*u),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],u=t[9],a=t[2],f=t[6],l=t[10],c=n+o+l,h;return c>0?(h=.5/Math.sqrt(c+1),this.w=.25/h,this.x=(f-u)*h,this.y=(i-a)*h,this.z=(s-r)*h):n>o&&n>l?(h=2*Math.sqrt(1+n-o-l),this.w=(f-u)/h,this.x=.25*h,this.y=(r+s)/h,this.z=(i+a)/h):o>l?(h=2*Math.sqrt(1+o-n-l),this.w=(i-a)/h,this.x=(r+s)/h,this.y=.25*h,this.z=(u+f)/h):(h=2*Math.sqrt(1+l-n-o),this.w=(s-r)/h,this.x=(i+a)/h,this.y=(u+f)/h,this.z=.25*h),this},calculateW:function(){return this.w=-Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z)),this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},multiply:function(e,t){var n=e.x,r=e.y,i=e.z,s=e.w,o=t.x,u=t.y,a=t.z,f=t.w;return this.x=n*f+r*a-i*u+s*o,this.y=-n*a+r*f+i*o+s*u,this.z=n*u-r*o+i*f+s*a,this.w=-n*o-r*u-i*a+s*f,this},multiplySelf:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,s=e.x,o=e.y,u=e.z,a=e.w;return this.x=t*a+i*s+n*u-r*o,this.y=n*a+i*o+r*s-t*u,this.z=r*a+i*u+t*o-n*s,this.w=i*a-t*s-n*o-r*u,this},multiplyVector3:function(e,t){t||(t=e);var n=e.x,r=e.y,i=e.z,s=this.x,o=this.y,u=this.z,a=this.w,f=a*n+o*i-u*r,l=a*r+u*n-s*i,c=a*i+s*r-o*n,h=-s*n-o*r-u*i;return t.x=f*a+h*-s+l*-u-c*-o,t.y=l*a+h*-o+c*-s-f*-u,t.z=c*a+h*-u+f*-o-l*-s,t},slerpSelf:function(e,t){var n=this.x,r=this.y,i=this.z,s=this.w,o=s*e.w+n*e.x+r*e.y+i*e.z;o<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,o=-o):this.copy(e);if(o>=1)return this.w=s,this.x=n,this.y=r,this.z=i,this;var u=Math.acos(o),a=Math.sqrt(1-o*o);if(Math.abs(a)<.001)return this.w=.5*(s+this.w),this.x=.5*(n+this.x),this.y=.5*(r+this.y),this.z=.5*(i+this.z),this;var f=Math.sin((1-t)*u)/a,l=Math.sin(t*u)/a;return this.w=s*f+this.w*l,this.x=n*f+this.x*l,this.y=r*f+this.y*l,this.z=i*f+this.z*l,this},clone:function(){return new THREE.Quaternion(this.x,this.y,this.z,this.w)}},THREE.Quaternion.slerp=function(e,t,n,r){var i=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;i<0?(n.w=-t.w,n.x=-t.x,n.y=-t.y,n.z=-t.z,i=-i):n.copy(t);if(Math.abs(i)>=1)return n.w=e.w,n.x=e.x,n.y=e.y,n.z=e.z,n;var s=Math.acos(i),o=Math.sqrt(1-i*i);if(Math.abs(o)<.001)return n.w=.5*(e.w+n.w),n.x=.5*(e.x+n.x),n.y=.5*(e.y+n.y),n.z=.5*(e.z+n.z),n;var u=Math.sin((1-r)*s)/o,a=Math.sin(r*s)/o;return n.w=e.w*u+n.w*a,n.x=e.x*u+n.x*a,n.y=e.y*u+n.y*a,n.z=e.z*u+n.z*a,n},function(e){var t="origin",n="Vector3",r="direction",i="multiplyScalar",s="distanceTo",o="getPosition",u="matrixWorld",a="geometry",f="material",l="multiplyVector3",c="length",h=!0,p="prototype";e.Ray=function(i,s,o,u){this[t]=i||new e[n],this[r]=s||new e[n],this.near=o||0,this.far=u||Infinity};var d=new e[n],v=new e[n],m=new e[n],g=new e[n],y=new e[n],b=new e[n],w=new e.Matrix4,E=function(e,t){return e.distance-t.distance},S=new e[n],x=new e[n],T=new e[n],N=function(e,t,n){S.sub(n,e);var r=S.dot(t),o=x.add(e,T.copy(t)[i](r)),u=n[s](o);return u},C=function(e,t,n,r){S.sub(r,t),x.sub(n,t),T.sub(e,t);var i=S.dot(S),s=S.dot(x),o=S.dot(T),u=x.dot(x),a=x.dot(T),f=1/(i*u-s*s),l=(u*o-s*a)*f,c=(i*a-s*o)*f;return l>=0&&c>=0&&l+c<1},k=function(n,p,E){var S,x;if(n instanceof e.Particle){S=N(p[t],p[r],n[u][o]());if(S>n.scale.x)return E;x={distance:S,point:n.position,face:null,object:n},E.push(x)}else if(n instanceof e.Mesh){var T=n[a].boundingSphere.radius*n[u].getMaxScaleOnAxis();S=N(p[t],p[r],n[u][o]());if(S>T)return E;var k,L,A,O,M,_=n[a],D=_.vertices,P,H,B,j,F,I;H=n[a].materials,B=n[f]instanceof e.MeshFaceMaterial,F=n[f].side;var q,R,U,z,W=p.precision;n.matrixRotationWorld.extractRotation(n[u]),d.copy(p[t]),P=n[u],w.getInverse(P),v.copy(d),w[l](v),m.copy(p[r]),w.rotateAxis(m).normalize();for(k=0,L=_.faces[c];k<L;k++){A=_.faces[k],j=B===h?H[A.materialIndex]:n[f];if(j===undefined)continue;F=j.side,g.sub(A.centroid,v),y=A.normal,O=m.dot(y);if(Math.abs(O
)<W)continue;M=y.dot(g)/O;if(M<0)continue;if(F===e.DoubleSide||(F===e.FrontSide?O<0:O>0)){b.add(v,m[i](M));if(A instanceof e.Face3){q=D[A.a],R=D[A.b],U=D[A.c];if(C(b,q,R,U)){I=n[u][l](b.clone()),S=d[s](I);if(S<p.near||S>p.far)continue;x={distance:S,point:I,face:A,faceIndex:k,object:n},E.push(x)}}else if(A instanceof e.Face4){q=D[A.a],R=D[A.b],U=D[A.c],z=D[A.d];if(C(b,q,R,z)||C(b,R,U,z)){I=n[u][l](b.clone()),S=d[s](I);if(S<p.near||S>p.far)continue;x={distance:S,point:I,face:A,faceIndex:k,object:n},E.push(x)}}}}}},L=function(e,t,n){var r=e.getDescendants();for(var i=0,s=r[c];i<s;i++)k(r[i],t,n)};e.Ray[p].precision=1e-4,e.Ray[p].set=function(e,n){this[t]=e,this[r]=n},e.Ray[p].intersectObject=function(e,t){var n=[];return t===h&&L(e,this,n),k(e,this,n),n.sort(E),n},e.Ray[p].intersectObjects=function(e,t){var n=[];for(var r=0,i=e[c];r<i;r++)k(e[r],this,n),t===h&&L(e[r],this,n);return n.sort(E),n}}(THREE),THREE.Rectangle=function(){function p(){l=a-o,c=f-u}var e=!0,t="getLeft",n="getTop",r="getRight",i="getBottom",s=!1,o=0,u=0,a=0,f=0,l=0,c=0,h=e;this.getX=function(){return o},this.getY=function(){return u},this.getWidth=function(){return l},this.getHeight=function(){return c},this[t]=function(){return o},this[n]=function(){return u},this[r]=function(){return a},this[i]=function(){return f},this.set=function(e,t,n,r){h=s,o=e,u=t,a=n,f=r,p()},this.addPoint=function(t,n){h===e?(h=s,o=t,u=n,a=t,f=n,p()):(o=o<t?o:t,u=u<n?u:n,a=a>t?a:t,f=f>n?f:n,p())},this.add3Points=function(t,n,r,i,l,c){h===e?(h=s,o=t<r?t<l?t:l:r<l?r:l,u=n<i?n<c?n:c:i<c?i:c,a=t>r?t>l?t:l:r>l?r:l,f=n>i?n>c?n:c:i>c?i:c,p()):(o=t<r?t<l?t<o?t:o:l<o?l:o:r<l?r<o?r:o:l<o?l:o,u=n<i?n<c?n<u?n:u:c<u?c:u:i<c?i<u?i:u:c<u?c:u,a=t>r?t>l?t>a?t:a:l>a?l:a:r>l?r>a?r:a:l>a?l:a,f=n>i?n>c?n>f?n:f:c>f?c:f:i>c?i>f?i:f:c>f?c:f,p())},this.addRectangle=function(l){h===e?(h=s,o=l[t](),u=l[n](),a=l[r](),f=l[i](),p()):(o=o<l[t]()?o:l[t](),u=u<l[n]()?u:l[n](),a=a>l[r]()?a:l[r](),f=f>l[i]()?f:l[i](),p())},this.inflate=function(e){o-=e,u-=e,a+=e,f+=e,p()},this.minSelf=function(e){o=o>e[t]()?o:e[t](),u=u>e[n]()?u:e[n](),a=a<e[r]()?a:e[r](),f=f<e[i]()?f:e[i](),p()},this.intersects=function(l){return a<l[t]()?s:o>l[r]()?s:f<l[n]()?s:u>l[i]()?s:e},this.empty=function(){h=e,o=0,u=0,a=0,f=0,p()},this.isEmpty=function(){return h}},THREE.Spline=function(e){function g(e,t,n,r,i,s,o){var u=(n-e)*.5,a=(r-t)*.5;return(2*(t-n)+u+a)*o+(-3*(t-n)-2*u-a)*s+u*i+t}var t="points",n="length",r="getPoint",i="Vector3",s="copy";this[t]=e;var o=[],u={x:0,y:0,z:0},a,f,l,c,h,p,d,v,m;this.initFromArray=function(e){this[t]=[];for(var r=0;r<e[n];r++)this[t][r]={x:e[r][0],y:e[r][1],z:e[r][2]}},this[r]=function(e){return a=(this[t][n]-1)*e,f=Math.floor(a),l=a-f,o[0]=f===0?f:f-1,o[1]=f,o[2]=f>this[t][n]-2?this[t][n]-1:f+1,o[3]=f>this[t][n]-3?this[t][n]-1:f+2,p=this[t][o[0]],d=this[t][o[1]],v=this[t][o[2]],m=this[t][o[3]],c=l*l,h=l*c,u.x=g(p.x,d.x,v.x,m.x,l,c,h),u.y=g(p.y,d.y,v.y,m.y,l,c,h),u.z=g(p.z,d.z,v.z,m.z,l,c,h),u},this.getControlPointsArray=function(){var e,r,i=this[t][n],s=[];for(e=0;e<i;e++)r=this[t][e],s[e]=[r.x,r.y,r.z];return s},this.getLength=function(e){var o,u,a,f,l=0,c=0,h=0,p=new THREE[i],d=new THREE[i],v=[],m=0;v[0]=0,e||(e=100),a=this[t][n]*e,p[s](this[t][0]);for(o=1;o<a;o++)u=o/a,f=this[r](u),d[s](f),m+=d.distanceTo(p),p[s](f),l=(this[t][n]-1)*u,c=Math.floor(l),c!=h&&(v[c]=m,h=c);return v[v[n]]=m,{chunks:v,total:m}},this.reparametrizeByArcLength=function(e){var o,u,a,f,l,c,h,p,d,v=[],m=new THREE[i],g=this.getLength();v.push(m[s](this[t][0]).clone());for(o=1;o<this[t][n];o++){h=g.chunks[o]-g.chunks[o-1],p=Math.ceil(e*h/g.total),f=(o-1)/(this[t][n]-1),l=o/(this[t][n]-1);for(u=1;u<p-1;u++)a=f+u*(1/p)*(l-f),d=this[r](a),v.push(m[s](d).clone());v.push(m[s](this[t][o]).clone())}this[t]=v}},THREE.UV=function(e,t){this.u=e||0,this.v=t||0},THREE.UV.prototype={constructor:THREE.UV,set:function(e,t){return this.u=e,this.v=t,this},copy:function(e){return this.u=e.u,this.v=e.v,this},lerpSelf:function(e,t){return this.u+=(e.u-this.u)*t,this.v+=(e.v-this.v)*t,this},clone:function(){return new THREE.UV(this.u,this.v)}},THREE.Geometry=function(){this.id=THREE.GeometryCount++,this.name="",this.vertices=[],this.colors=[],this.materials=[],this.faces=[],this.faceUvs=[[]],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){var t="length",n="multiplyVector3",r="vertexNormals",i=new THREE.Matrix4;i.extractRotation(e);for(var s=0,o=this.vertices[t];s<o;s++){var u=this.vertices[s];e[n](u)}for(var s=0,o=this.faces[t];s<o;s++){var a=this.faces[s];i[n](a.normal);for(var f=0,l=a[r][t];f<l;f++)i[n](a[r][f]);e[n](a.centroid)}},computeCentroids:function(){var e="centroid",t="addSelf",n="vertices",r="divideScalar",i,s,o;for(i=0,s=this.faces.length;i<s;i++)o=this.faces[i],o[e].set(0,0,0),o instanceof THREE.Face3?(o[e][t](this[n][o.a]),o[e][t](this[n][o.b]),o[e][t](this[n][o.c]),o[e][r](3)):o instanceof THREE.Face4&&(o[e][t](this[n][o.a]),o[e][t](this[n][o.b]),o[e][t](this[n][o.c]),o[e][t](this[n][o.d]),o[e][r](4))},computeFaceNormals:function(){var e="vertices",t,n,r,i,s,o,u,a,f,l,c,h=new THREE.Vector3,p=new THREE.Vector3;for(o=0,u=this.faces.length;o<u;o++)a=this.faces[o],f=this[e][a.a],l=this[e][a.b],c=this[e][a.c],h.sub(c,l),p.sub(f,l),h.crossSelf(p),h.isZero()||h.normalize(),a.normal.copy(h)},computeVertexNormals:function(){var e="__tmpVertices",t="length",n="vertices",r="Vector3",i="faces",s="vertexNormals",o="addSelf",u="normal",a="copy",f,l,c,h,p,d;if(this[e]===undefined){this[e]=new Array(this[n][t]),d=this[e];for(f=0,l=this[n][t];f<l;f++)d[f]=new THREE[r];for(c=0,h=this[i][t];c<h;c++)p=this[i][c],p instanceof THREE.Face3?p[s]=[new THREE[r],new THREE[r],new THREE[r]]:p instanceof THREE.Face4&&(p[s]=[new THREE[r],new THREE[r],new THREE[r],new THREE[r]])}else{d=this[e];for(f=0,l=this[n][t];f<l;f++)d[f].set(0,0,0)}for(c=0,h=this[i][t];c<h;c++)p=this[i][c],p instanceof THREE.Face3?(d[p.a][o](p[u]),d[p.b][o](p[u]),d[p.c][o](p[u])):p instanceof THREE.Face4&&(d[p.a][o](p[u]),d[p.b][o](p[u]),d[p.c][o](p[u]),d[p.d][o](p[u]));for(f=0,l=this[n][t];f<l;f++)d[f].normalize();for(c=0,h=this[i][t];c<h;c++)p=this[i][c],p instanceof THREE.Face3?(p[s][0][a](d[p.a]),p[s][1][a](d[p.b]),p[s][2][a](d[p.c])):p instanceof THREE.Face4&&(p[s][0][a](d[p.a]),p[s][1][a](d[p.b]),p[s][2][a](d[p.c]),p[s][3][a](d[p.d]))},computeMorphNormals:function(){var e="length",t="faces",n="__originalFaceNormal",r="normal",i="copy",s="__originalVertexNormals",o="vertexNormals",u="morphTargets",a="morphNormals",f="faceNormals",l="Vector3",c,h,p,d,v;for(p=0,d=this[t][e];p<d;p++){v=this[t][p],v[n]?v[n][i](v[r]):v[n]=v[r].clone(),v[s]||(v[s]=[]);for(c=0,h=v[o][e];c<h;c++)v[s][c]?v[s][c][i](v[o][c]):v[s][c]=v[o][c].clone()}var m=new THREE.Geometry;m[t]=this[t];for(c=0,h=this[u][e];c<h;c++){if(!this[a][c]){this[a][c]={},this[a][c][f]=[],this[a][c][o]=[];var g=this[a][c][f],y=this[a][c][o],b,w;for(p=0,d=this[t][e];p<d;p++)v=this[t][p],b=new THREE[l],v instanceof THREE.Face3?w={a:new THREE[l],b:new THREE[l],c:new THREE[l]}:w={a:new THREE[l],b:new THREE[l],c:new THREE[l],d:new THREE[l]},g.push(b),y.push(w)}var E=this[a][c];m.vertices=this[u][c].vertices,m.computeFaceNormals(),m.computeVertexNormals();var b,w;for(p=0,d=this[t][e];p<d;p++)v=this[t][p],b=E[f][p],w=E[o][p],b[i](v[r]),v instanceof THREE.Face3?(w.a[i](v[o][0]),w.b[i](v[o][1]),w.c[i](v[o][2])):(w.a[i](v[o][0]),w.b[i](v[o][1]),w.c[i](v[o][2]),w.d[i](v[o][3]))}for(p=0,d=this[t][e];p<d;p++)v=this[t][p],v[r]=v[n],v[o]=v[s]},computeTangents:function(){function U(e,t,i,s,o,u,a){v=e[n][t],m=e[n][i],g=e[n][s],y=d[o],b=d[u],w=d[a],E=m.x-v.x,S=g.x-v.x,x=m.y-v.y,T=g.y-v.y,N=m.z-v.z,C=g.z-v.z,k=b.u-y.u,L=w.u-y.u,A=b.v-y.v,O=w.v-y.v,M=1/(k*O-L*A),B.set((O*E-A*S)*M,(O*x-A*T)*M,(O*N-A*C)*M),j.set((k*S-L*E)*M,(k*T-L*x)*M,(k*C-L*N)*M),P[t][r](B),P[i][r](B),P[s][r](B),H[t][r](j),H[i][r](j),H[s][r](j)}var e="Vector3",t="length",n="vertices",r="addSelf",i="faces",s="vertexNormals",o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=[],H=[],B=new THREE[e],j=new THREE[e],F=new THREE[e],I=new THREE[e],q=new THREE[e],R;for(a=0,f=this[n][t];a<f;a++)P[a]=new THREE[e],H[a]=new THREE[e];for(o=0,u=this[i][t];o<u;o++)p=this[i][o],d=this.faceVertexUvs[0][o],p instanceof THREE.Face3?U(this,p.a,p.b,p.c,0,1,2):p instanceof THREE.Face4&&(U(this,p.a,p.b,p.d,0,1,3),U(this,p.b,p.c,p.d,1,2,3));var z=["a","b","c","d"];for(o=0,u=this[i][t];o<u;o++){p=this[i][o];for(l=0;l<p[s][t];l++)q.copy(p[s][l]),h=p[z[l]],_=P[h],F.copy(_),F.subSelf(q.multiplyScalar(q.dot(_))).normalize(),I.cross(p[s][l],_),D=I.dot(H[h]),R=D<0?-1:1,p.vertexTangents[l]=new THREE.Vector4(F.x,F.y,F.z,R)}this.hasTangents=!0},computeBoundingBox:function(){var e="boundingBox",t="vertices";this[e]||(this[e]={min:new THREE.Vector3,max:new THREE.Vector3});if(this[t].length>0){var n,r=this[t][0];this[e].min.copy(r),this[e].max.copy(r);var i=this[e].min,s=this[e].max;for(var o=1,u=this[t].length;o<u;o++)n=this[t][o],n.x<i.x?i.x=n.x:n.x>s.x&&(s.x=n.x),n.y<i.y?i.y=n.y:n.y>s.y&&(s.y=n.y),n.z<i.z?i.z=n.z:n.z>s.z&&(s.z=n.z)}else this[e].min.set(0,0,0),this[e].max.set(0,0,0)},computeBoundingSphere:function(){var e="boundingSphere",t=0;this[e]===null&&(this[e]={radius:0});for(var n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n].lengthSq();i>t&&(t=i)}this[e].radius=Math.sqrt(t)},mergeVertices:function(){var e="length",t="vertices",n="faces",r="faceVertexUvs",i="vertexColors",s={},o=[],u=[],a,f,l=4,c=Math.pow(10,l),h,p,d,v="abcd",m,g,y,b,w;for(h=0,p=this[t][e];h<p;h++)a=this[t][h],f=[Math.round(a.x*c),Math.round(a.y*c),Math.round(a.z*c)].join("_"),s[f]===undefined?(s[f]=h,o.push(this[t][h]),u[h]=o[e]-1):u[h]=u[s[f]];for(h=0,p=this[n][e];h<p;h++){d=this[n][h];if(d instanceof THREE.Face3)d.a=u[d.a],d.b=u[d.b],d.c=u[d.c];else if(d instanceof THREE.Face4){d.a=u[d.a],d.b=u[d.b],d.c=u[d.c],d.d=u[d.d],m=[d.a,d.b,d.c,d.d];for(g=3;g>0;g--)if(m.indexOf(d[v[g]])!==g){m.splice(g,1),this[n][h]=new THREE.Face3(m[0],m[1],m[2],d.normal,d.color,d.materialIndex);for(y=0,b=this[r][e];y<b;y++)w=this[r][y][h],w&&w.splice(g,1);this[n][h][i]=d[i];break}}}var E=this[t][e]-o[e];return this[t]=o,E},clone:function(){}},THREE.GeometryCount=0,THREE.BufferGeometry=function(){this.id=THREE.GeometryCount++,this.attributes={},this.dynamic=!1,this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.morphTargets=[]},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,applyMatrix:function(e){var t="attributes",n="position",r="normal",i="multiplyVector3Array",s,o;this[t][n]&&(s=this[t][n].array),this[t][r]&&(o=this[t][r].array),s!==undefined&&(e[i](s),this.verticesNeedUpdate=!0);if(o!==undefined){var u=new THREE.Matrix4;u.extractRotation(e),u[i](o),this.normalsNeedUpdate=!0}},computeBoundingBox:function(){var e="boundingBox";this[e]||(this[e]={min:new THREE.Vector3(Infinity,Infinity,Infinity),max:new THREE.Vector3(-Infinity,-Infinity,-Infinity)});var t=this.attributes.position.array;if(t){var n=this[e],r,i,s;for(var o=0,u=t.length;o<u;o+=3)r=t[o],i=t[o+1],s=t[o+2],r<n.min.x?n.min.x=r:r>n.max.x&&(n.max.x=r),i<n.min.y?n.min.y=i:i>n.max.y&&(n.max.y=i),s<n.min.z?n.min.z=s:s>n.max.z&&(n.max.z=s)}if(t===undefined||t.length===0)this[e].min.set(0,0,0),this[e].max.set(0,0,0)},computeBoundingSphere:function(){var e="boundingSphere";this[e]||(this[e]={radius:0});var t=this.attributes.position.array;if(t){var n,r=0,i,s,o;for(var u=0,a=t.length;u<a;u+=3)i=t[u],s=t[u+1],o=t[u+2],n=i*i+s*s+o*o,n>r&&(r=n);this[e].radius=Math.sqrt(r)}},computeVertexNormals:function(){var e="attributes",t="position",n="index",r="length",i="array",s="normal",o="Vector3";if(this[e][t]&&this[e][n]){var u,a,f,l,c=this[e][t][i][r];if(this[e][s]===undefined)this[e][s]={itemSize:3,array:new Float32Array(c),numItems:c};else for(u=0,a=this[e][s][i][r];u<a;u++)this[e][s][i][u]=0;var h=this.offsets,p=this[e][n][i],d=this[e][t][i],v=this[e][s][i],m,g,y,b,w,E,S=new THREE[o],x=new THREE[o],T=new THREE[o],N=new THREE[o],C=new THREE[o];for(f=0,l=h[r];f<l;++f){var k=h[f].start,L=h[f].count,A=h[f][n];for(u=k,a=k+L;u<a;u+=3)m=A+p[u],g=A+p[u+1],y=A+p[u+2],b=d[m*3],w=d[m*3+1],E=d[m*3+2],S.set(b,w,E),b=d[g*3],w=d[g*3+1],E=d[g*3+2],x.set(b,w,E),b=d[y*3],w=d[y*3+1],E=d[y*3+2],T.set(b,w,E),N.sub(T,x),C.sub(S,x),N.crossSelf(C),v[m*3]+=N.x,v[m*3+1]+=N.y,v[m*3+2]+=N.z,v[g*3]+=N.x,v[g*3+1]+=N.y,v[g*3+2]+=N.z,v[y*3]+=N.x,v[y*3+1]+=N.y,v[y*3+2]+=N.z}for(u=0,a=v[r];u<a;u+=3){b=v[u],w=v[u+1],E=v[u+2];var O=1/Math.sqrt(b*b+w*w+E*E);v[u]*=O,v[u+1]*=O,v[u+2]*=O}this.normalsNeedUpdate=!0}},computeTangents:function(){function $(e,t,n){b=l[e*3],w=l[e*3+1],E=l[e*3+2],S=l[t*3],x=l[t*3+1],T=l[t*3+2],N=l[n*3],C=l[n*3+1],k=l[n*3+2],L=h[e*2],A=h[e*2+1],O=h[t*2],M=h[t*2+1],_=h[n*2],D=h[n*2+1],P=S-b,H=N-b,B=x-w,j=C-w,F=T-E,I=k-E,q=O-L,R=_-L,U=M-A,z=D-A,W=1/(q*z-R*U),X.set((z*P-U*H)*W,(z*B-U*j)*W,(z*F-U*I)*W),V.set((q*H-R*P)*W,(q*j-R*B)*W,(q*I-R*F)*W),m[e][a](X),m[t][a](X),m[n][a](X),g[e][a](V),g[t][a](V),g[n][a](V)}function vt(e){ut.x=c[e*3],ut.y=c[e*3+1],ut.z=c[e*3+2],at.copy(ut),lt=m[e],st.copy(lt),st.subSelf(ut.multiplyScalar(ut.dot(lt))).normalize(),ot.cross(at,lt),ct=ot.dot(g[e]),ft=ct<0?-1:1,v[e*4]=st.x,v[e*4+1]=st.y,v[e*4+2]=st.z,v[e*4+3]=ft}var e="attributes",t="index",n="position",r="normal",i="array",s="length",o="tangent",u="Vector3",a="addSelf";if(this[e][t]===undefined||this[e][n]===undefined||this[e][r]===undefined||this[e].uv===undefined){console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");return}var f=this[e][t][i],l=this[e][n][i],c=this[e][r][i],h=this[e].uv[i],p=l[s]/3;if(this[e][o]===undefined){var d=4*p;this[e][o]={itemSize:4,array:new Float32Array(d),numItems:d}}var v=this[e][o][i],m=[],g=[];for(var y=0;y<p;y++)m[y]=new THREE[u],g[y]=new THREE[u];var b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X=new THREE[u],V=new THREE[u],J,K,Q,G,Y,Z,et,tt=this.offsets;for(Q=0,G=tt[s];Q<G;++Q){var nt=tt[Q].start,rt=tt[Q].count,it=tt[Q][t];for(J=nt,K=nt+rt;J<K;J+=3)Y=it+f[J],Z=it+f[J+1],et=it+f[J+2],$(Y,Z,et)}var st=new THREE[u],ot=new THREE[u],ut=new THREE[u],at=new THREE[u],ft,lt,ct,ht,pt,dt;for(Q=0,G=tt[s];Q<G;++Q){var nt=tt[Q].start,rt=tt[Q].count,it=tt[Q][t];for(J=nt,K=nt+rt;J<K;J+=3)Y=it+f[J],Z=it+f[J+1],et=it+f[J+2],vt(Y),vt(Z),vt(et)}this.hasTangents=!0,this.tangentsNeedUpdate=!0}},function(){var e="Camera",t="Object3D",n="Matrix4",r="prototype";THREE[e]=function(){THREE[t].call(this),this.matrixWorldInverse=new THREE[n],this.projectionMatrix=new THREE[n],this.projectionMatrixInverse=new THREE[n]},THREE[e][r]=Object.create(THREE[t][r]),THREE[e][r].lookAt=function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate===!0&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder)},THREE.Light=function(e){THREE[t].call(this),this.color=new THREE.Color(e)},THREE.Light[r]=Object.create(THREE[t][r]),THREE.Loader=function(e){this.showStatus=e,this.statusDomElement=e?THREE.Loader[r].addStatusElement():null,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}}(),THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:"anonymous",addStatusElement:function(){var e="style",t=document.createElement("div");return t[e].position="absolute",t[e].right="0px",t[e].top="0px",t[e].fontSize="0.8em",t[e].textAlign="left",t[e].background="rgba(0,0,0,0.25)",t[e].color="#fff",t[e].width="120px",t[e].padding="0.5em 0.5em 0.5em 0.5em",t[e].zIndex=1e3,t.innerHTML="Loading ...",t},updateProgress:function(e){var t="Loaded ";e.total?t+=(100*e.loaded/e.total).toFixed(0)+"%":t+=(e.loaded/1e3).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return t.pop(),(t.length<1?".":t.join("/"))+"/"},initMaterials:function(e,t,n){e.materials=[];for(var r=0;r<t.length;++r)e.materials[r]=THREE.Loader.prototype.createMaterial(t[r],n)},hasNormals:function(e){var t,n,r=e.materials.length;for(n=0;n<r;n++){t=e.materials[n];if(t instanceof THREE.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){function D(e){var t=Math.log(e)/Math.LN2;return Math.floor(t)==t}function P(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function H(e,t){var o=new Image;o.onload=function(){if(!D(this.width)||!D(this[n])){var t=P(this.width),s=P(this[n]);e[r].width=t,e[r][n]=s,e[r].getContext("2d").drawImage(this,0,0,t,s)}else e[r]=this;e.needsUpdate=i},o[s]=_[s],o.src=t}function B(e,n,r,i,s,a,f){var l=r[o]().endsWith(".dds"),c=t+"/"+r;if(l){var h=THREE.ImageUtils.loadCompressedTexture(c);e[n]=h}else{var h=document.createElement("canvas");e[n]=new THREE.Texture(h)}e[n].sourceFile=r,i&&(e[n].repeat.set(i[0],i[1]),i[0]!==1&&(e[n].wrapS=THREE[u]),i[1]!==1&&(e[n].wrapT=THREE[u])),s&&e[n].offset.set(s[0],s[1]);if(a){var p={repeat:THREE[u],mirror:THREE.MirroredRepeatWrapping};p[a[0]]!==undefined&&(e[n].wrapS=p[a[0]]),p[a[1]]!==undefined&&(e[n].wrapT=p[a[1]])}f&&(e[n].anisotropy=f),l||H(e[n],c)}function j(e){return(e[0]*255<<16)+(e[1]*255<<8)+e[2]*255}var n="height",r="image",i=!0,s="crossOrigin",o="toLowerCase",u="RepeatWrapping",a=null,f="blending",l="transparent",c="opacity",h="depthTest",p="depthWrite",d="visible",v="wireframe",m="vertexColors",g="colorDiffuse",y="colorSpecular",b="colorAmbient",w="transparency",E="specularCoef",S="mapDiffuse",x="lightMap",T="mapNormal",N="normalMap",C="mapSpecular",k="specularMap",L="mapBumpScale",A="value",O="mapNormalFactor",M="setHex",_=this,F="MeshLambertMaterial",I={color:15658734,opacity:1,map:a,lightMap:a,normalMap:a,bumpMap:a,wireframe:!1};if(e.shading){var q=e.shading[o]();q==="phong"?F="MeshPhongMaterial":q==="basic"&&(F="MeshBasicMaterial")}e[f]!==undefined&&THREE[e[f]]!==undefined&&(I[f]=THREE[e[f]]);if(e[l]!==undefined||e[c]<1)I[l]=e[l];e[h]!==undefined&&(I[h]=e[h]),e[p]!==undefined&&(I[p]=e[p]),e[d]!==undefined&&(I[d]=e[d]),e.flipSided!==undefined&&(I.side=THREE.BackSide),e.doubleSided!==undefined&&(I.side=THREE.DoubleSide),e[v]!==undefined&&(I[v]=e[v]),e[m]!==undefined&&(e[m]==="face"?I[m]=THREE.FaceColors:e[m]&&(I[m]=THREE.VertexColors)),e[g]?I.color=j(e[g]):e.DbgColor&&(I.color=e.DbgColor),e[y]&&(I.specular=j(e[y])),e[b]&&(I.ambient=j(e[b])),e[w]&&(I[c]=e[w]),e[E]&&(I.shininess=e[E]),e[S]&&t&&B(I,"map",e[S],e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&B(I,x,e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&B(I,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e[T]&&t&&B(I,N,e[T],e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e[C]&&t&&B(I,k,e[C],e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e[L]&&(I.bumpScale=e[L]);if(e[T]){var R=THREE.ShaderUtils.lib.normal,U=THREE.UniformsUtils.clone(R.uniforms);U.tNormal[A]=I[N],e[O]&&U.uNormalScale[A].set(e[O],e[O]),I.map&&(U.tDiffuse[A]=I.map,U.enableDiffuse[A]=i),I[k]&&(U.tSpecular[A]=I[k],U.enableSpecular[A]=i),I[x]&&(U.tAO[A]=I[x],U.enableAO[A]=i),U.uDiffuseColor[A][M](I.color),U.uSpecularColor[A][M](I.specular),U.uAmbientColor[A][M](I.ambient),U.uShininess[A]=I.shininess,I[c]!==undefined&&(U.uOpacity[A]=I[c]);var z={fragmentShader:R.fragmentShader,vertexShader:R.vertexShader,uniforms:U,lights:i,fog:i},W=new THREE.ShaderMaterial(z)}else var W=new THREE[F](I);return e.DbgName!==undefined&&(W.name=e.DbgName),W}},THREE.Texture=function(e,t,n,r,i,s,o,u,a){this.id=THREE.TextureCount++,this.image=e,this.mapping=t!==undefined?t:new THREE.UVMapping,this.wrapS=n!==undefined?n:THREE.ClampToEdgeWrapping,this.wrapT=r!==undefined?r:THREE.ClampToEdgeWrapping,this.magFilter=i!==undefined?i:THREE.LinearFilter,this.minFilter=s!==undefined?s:THREE.LinearMipMapLinearFilter,this.anisotropy=a!==undefined?a:1,this.format=o!==undefined?o:THREE.RGBAFormat,this.type=u!==undefined?u:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,clone:function(){var e="anisotropy",t="generateMipmaps",n="premultiplyAlpha",r=new THREE.Texture;return r.image=this.image,r.mapping=this.mapping,r.wrapS=this.wrapS,r.wrapT=this.wrapT,r.magFilter=this.magFilter,r.minFilter=this.minFilter,r[e]=this[e],r.format=this.format,r.type=this.type,r.offset.copy(this.offset),r.repeat.copy(this.repeat),r[t]=this[t],r[n]=this[n],r.flipY=this.flipY,r}},THREE.TextureCount=0,THREE.Material=function(){this.id=THREE.MaterialCount++,this.name="",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=!1,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype.setValues=function(e){if(e===undefined)return;for(var t in e){var n=e[t];if(n===undefined){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t in this){var r=this[t];r instanceof THREE.Color&&n instanceof THREE.Color?r.copy(n):r instanceof THREE.Color&&typeof n=="number"?r.setHex(n):r instanceof THREE.Vector3&&n instanceof THREE.Vector3?r.copy(n):this[t]=n}}},THREE.Material.prototype.clone=function(e){var t="transparent",n="blendEquation",r="depthWrite",i="polygonOffset",s="polygonOffsetFactor",o="polygonOffsetUnits";return e===undefined&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e[t]=this[t],e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e[n]=this[n],e.depthTest=this.depthTest,e[r]=this[r],e[i]=this[i],e[s]=this[s],e[o]=this[o],e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},THREE.MaterialCount=0,THREE.Mesh=function(e,t){var n="geometry",r="boundingSphere",i="morphTargets",s="morphTargetInfluences",o="morphTargetDictionary";THREE.Object3D.call(this),this[n]=e,this.material=t!==undefined?t:new THREE.MeshBasicMaterial({color:Math.random()*16777215,wireframe:!0});if(this[n]){this[n][r]||this[n].computeBoundingSphere(),this.boundRadius=e[r].radius;if(this[n][i].length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this[s]=[],this[o]={};for(var u=0;u<this[n][i].length;u++)this[s].push(0),this[o][this[n][i][u].name]=u}}},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){var t="morphTargetDictionary";return this[t][e]!==undefined?this[t][e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},function(){var e="AmbientLight",t="call",n="Light",r="prototype",i="create",s="DirectionalLight",o="position",u="Vector3",a="intensity",f="distance",l="castShadow",c=!1,h="onlyShadow",p="shadowCameraNear",d="shadowCameraFar",v="shadowCameraVisible",m="shadowBias",g="shadowDarkness",y="shadowMapWidth",b="shadowMapHeight",w=null,E="shadowMapSize",S="shadowCamera",x="shadowMatrix",T="HemisphereLight",N="PointLight";THREE[e]=function(e){THREE[n][t](this,e)},THREE[e][r]=Object[i](THREE[n][r]),THREE[s]=function(e,r,i){THREE[n][t](this,e),this[o]=new THREE[u](0,1,0),this.target=new THREE.Object3D,this[a]=r!==undefined?r:1,this[f]=i!==undefined?i:0,this[l]=c,this[h]=c,this[p]=50,this[d]=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this[v]=c,this[m]=0,this[g]=.5,this[y]=512,this[b]=512,this.shadowCascade=c,this.shadowCascadeOffset=new THREE[u](0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=w,this[E]=w,this[S]=w,this[x]=w},THREE[s][r]=Object[i](THREE[n][r]),THREE[T]=function(e,r,i){THREE[n][t](this,e),this.groundColor=new THREE.Color(r),this[o]=new THREE[u](0,100,0),this[a]=i!==undefined?i:1},THREE[T][r]=Object[i](THREE[n][r]),THREE[N]=function(e,r,i){THREE[n][t](this,e),this[o]=new THREE[u](0,0,0),this[a]=r!==undefined?r:1,this[f]=i!==undefined?i:0},THREE[N][r]=Object[i](THREE[n][r]),THREE.SpotLight=function(e,r,i,s,T){THREE[n][t](this,e),this[o]=new THREE[u](0,1,0),this.target=new THREE.Object3D,this[a]=r!==undefined?r:1,this[f]=i!==undefined?i:0,this.angle=s!==undefined?s:Math.PI/2,this.exponent=T!==undefined?T:10,this[l]=c,this[h]=c,this[p]=50,this[d]=5e3,this.shadowCameraFov=50,this[v]=c,this[m]=0,this[g]=.5,this[y]=512,this[b]=512,this.shadowMap=w,this[E]=w,this[S]=w,this[x]=w},THREE.SpotLight[r]=Object[i](THREE[n][r]),THREE.ImageLoader=function(){THREE.EventTarget[t](this),this.crossOrigin=w}}(),THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t){var n="addEventListener",r="load",i="dispatchEvent",s="error",o="crossOrigin",u=this;t===undefined&&(t=new Image),t[n](r,function(){u[i]({type:r,content:t})},!1),t[n](s,function(){u[i]({type:s,message:"Couldn't load URL ["+e+"]"})},!1),u[o]&&(t[o]=u[o]),t.src=e}},function(){var e="PerspectiveCamera",t="updateProjectionMatrix",n="prototype";THREE[e]=function(e,n,r,i){THREE.Camera.call(this),this.fov=e!==undefined?e:50,this.aspect=n!==undefined?n:1,this.near=r!==undefined?r:.1,this.far=i!==undefined?i:2e3,this[t]()},THREE[e][n]=Object.create(THREE.Camera[n]),THREE[e][n].setLens=function(e,n){n===undefined&&(n=24),this.fov=2*Math.atan(n/(e*2))*(180/Math.PI),this[t]()},THREE[e][n].setViewOffset=function(e,n,r,i,s,o){this.fullWidth=e,this.fullHeight=n,this.x=r,this.y=i,this.width=s,this.height=o,this[t]()}}(),THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e="fullWidth",t="fullHeight",n="projectionMatrix";if(this[e]){var r=this[e]/this[t],i=Math.tan(this.fov*Math.PI/360)*this.near,s=-i,o=r*s,u=r*i,a=Math.abs(u-o),f=Math.abs(i-s);this[n].makeFrustum(o+this.x*a/this[e],o+(this.x+this.width)*a/this[e],i-(this.y+this.height)*f/this[t],i-this.y*f/this[t],this.near,this.far)}else this[n].makePerspective(this.fov,this.aspect,this.near,this.far)},function(){var e="OrthographicCamera",t="updateProjectionMatrix",n="prototype",r="MeshBasicMaterial",i=null,s=!1,o="round";THREE[e]=function(e,n,r,i,s,o){THREE.Camera.call(this),this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s!==undefined?s:.1,this.far=o!==undefined?o:2e3,this[t]()},THREE[e][n]=Object.create(THREE.Camera[n]),THREE[e][n][t]=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE[r]=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=i,this.lightMap=i,this.specularMap=i,this.envMap=i,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=s,this.wireframeLinewidth=1,this.wireframeLinecap=o,this.wireframeLinejoin=o,this.vertexColors=THREE.NoColors,this.skinning=s,this.morphTargets=s,this.setValues(e)},THREE[r][n]=Object.create(THREE.Material[n])}(),THREE.MeshBasicMaterial.prototype.clone=function(){var e="specularMap",t="reflectivity",n="refractionRatio",r="wireframeLinewidth",i="wireframeLinecap",s="wireframeLinejoin",o="vertexColors",u="morphTargets",a=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.map=this.map,a.lightMap=this.lightMap,a[e]=this[e],a.envMap=this.envMap,a.combine=this.combine,a[t]=this[t],a[n]=this[n],a.fog=this.fog,a.shading=this.shading,a.wireframe=this.wireframe,a[r]=this[r],a[i]=this[i],a[s]=this[s],a[o]=this[o],a.skinning=this.skinning,a[u]=this[u],a},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var e="wireframeLinewidth",t=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.wireframe=this.wireframe,t[e]=this[e],t},THREE.MeshFaceMaterial=function(){},THREE.MeshFaceMaterial.prototype.clone=function(){return new THREE.MeshFaceMaterial},function(){var e="MeshLambertMaterial",t=!1,n=null,r="round";THREE[e]=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=t,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=n,this.lightMap=n,this.specularMap=n,this.envMap=n,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=t,this.wireframeLinewidth=1,this.wireframeLinecap=r,this.wireframeLinejoin=r,this.vertexColors=THREE.NoColors,this.skinning=t,this.morphTargets=t,this.morphNormals=t,this.setValues(e)},THREE[e].prototype=Object.create(THREE.Material.prototype)}(),THREE.MeshLambertMaterial.prototype.clone=function(){var e="wrapAround",t="specularMap",n="reflectivity",r="refractionRatio",i="wireframeLinewidth",s="wireframeLinecap",o="wireframeLinejoin",u="vertexColors",a="morphTargets",f="morphNormals",l=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,l),l.color.copy(this.color),l.ambient.copy(this.ambient),l.emissive.copy(this.emissive),l[e]=this[e],l.wrapRGB.copy(this.wrapRGB),l.map=this.map,l.lightMap=this.lightMap,l[t]=this[t],l.envMap=this.envMap,l.combine=this.combine,l[n]=this[n],l[r]=this[r],l.fog=this.fog,l.shading=this.shading,l.wireframe=this.wireframe,l[i]=this[i],l[s]=this[s],l[o]=this[o],l[u]=this[u],l.skinning=this.skinning,l[a]=this[a],l[f]=this[f],l},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var e="wireframeLinewidth",t=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,t),t.shading=this.shading,t.wireframe=this.wireframe,t[e]=this[e],t},function(){var e="MeshPhongMaterial",t="Color",n=!1,r=null,i="round";THREE[e]=function(e){THREE.Material.call(this),this.color=new THREE[t](16777215),this.ambient=new THREE[t](16777215),this.emissive=new THREE[t](0),this.specular=new THREE[t](1118481),this.shininess=30,this.metal=n,this.perPixel=n,this.wrapAround=n,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=r,this.lightMap=r,this.bumpMap=r,this.bumpScale=1,this.normalMap=r,this.normalScale=new THREE.Vector2(1,1),this.specularMap=r,this.envMap=r,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=n,this.wireframeLinewidth=1,this.wireframeLinecap=i,this.wireframeLinejoin=i,this.vertexColors=THREE.NoColors,this.skinning=n,this.morphTargets=n,this.morphNormals=n,this.setValues(e)},THREE[e].prototype=Object.create(THREE.Material.prototype)}(),THREE.MeshPhongMaterial.prototype.clone=function(){var e="copy",t="wrapAround",n="normalScale",r="specularMap",i="reflectivity",s="refractionRatio",o="wireframeLinewidth",u="wireframeLinecap",a="wireframeLinejoin",f="vertexColors",l="morphTargets",c="morphNormals",h=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,h),h.color[e](this.color),h.ambient[e](this.ambient),h.emissive[e](this.emissive),h.specular[e](this.specular),h.shininess=this.shininess,h.metal=this.metal,h.perPixel=this.perPixel,h[t]=this[t],h.wrapRGB[e](this.wrapRGB),h.map=this.map,h.lightMap=this.lightMap,h.bumpMap=this.bumpMap,h.bumpScale=this.bumpScale,h.normalMap=this.normalMap,h[n][e](this[n]),h[r]=this[r],h.envMap=this.envMap,h.combine=this.combine,h[i]=this[i],h[s]=this[s],h.fog=this.fog,h.shading=this.shading,h.wireframe=this.wireframe,h[o]=this[o],h[u]=this[u],h[a]=this[a],h[f]=this[f],h.skinning=this.skinning,h[l]=this[l],h[c]=this[c],h},THREE.ParticleBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.ParticleBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleBasicMaterial.prototype.clone=function(){var e="sizeAttenuation",t="vertexColors",n=new THREE.ParticleBasicMaterial;return THREE.Material.prototype.clone.call(this,n),n.color.copy(this.color),n.map=
this.map,n.size=this.size,n[e]=this[e],n[t]=this[t],n.fog=this.fog,n},function(){var e="ShaderMaterial",t="void main() {}",n=!1;THREE[e]=function(e){THREE.Material.call(this),this.fragmentShader=t,this.vertexShader=t,this.uniforms={},this.attributes=null,this.shading=THREE.SmoothShading,this.wireframe=n,this.wireframeLinewidth=1,this.fog=n,this.lights=n,this.vertexColors=THREE.NoColors,this.skinning=n,this.morphTargets=n,this.morphNormals=n,this.setValues(e)},THREE[e].prototype=Object.create(THREE.Material.prototype)}(),THREE.ShaderMaterial.prototype.clone=function(){var e="fragmentShader",t="vertexShader",n="attributes",r="wireframeLinewidth",i="vertexColors",s="morphTargets",o="morphNormals",u=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,u),u[e]=this[e],u[t]=this[t],u.uniforms=this.uniforms,u[n]=this[n],u.shading=this.shading,u.wireframe=this.wireframe,u[r]=this[r],u.fog=this.fog,u.lights=this.lights,u[i]=this[i],u.skinning=this.skinning,u[s]=this[s],u[o]=this[o],u},THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var e="vertexColors",t=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,t),t.color.copy(this.color),t.linewidth=this.linewidth,t.linecap=this.linecap,t.linejoin=this.linejoin,t[e]=this[e],t.fog=this.fog,t},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e,this.skinMatrix=new THREE.Matrix4},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.update=function(e,t){var n="matrixWorldNeedsUpdate",r="skinMatrix";this.matrixAutoUpdate&&(t|=this.updateMatrix());if(t||this[n])e?this[r].multiply(e,this.matrix):this[r].copy(this.matrix),this[n]=!1,t=!0;var i,s,o=this.children.length;for(s=0;s<o;s++)this.children[s].update(this[r],t)},function(){var e="Object3D",t="geometry",n="prototype";THREE.Line=function(n,r,i){THREE[e].call(this),this[t]=n,this.material=r!==undefined?r:new THREE.LineBasicMaterial({color:Math.random()*16777215}),this.type=i!==undefined?i:THREE.LineStrip,this[t]&&(this[t].boundingSphere||this[t].computeBoundingSphere())},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line[n]=Object.create(THREE[e][n]),THREE.LOD=function(){THREE[e].call(this),this.LODs=[]},THREE.LOD[n]=Object.create(THREE[e][n])}(),THREE.LOD.prototype.addLevel=function(e,t){t===undefined&&(t=0),t=Math.abs(t);for(var n=0;n<this.LODs.length;n++)if(t<this.LODs[n].visibleAtDistance)break;this.LODs.splice(n,0,{visibleAtDistance:t,object3D:e}),this.add(e)},THREE.LOD.prototype.update=function(e){var t="length",n="LODs",r="matrixWorldInverse",i="matrixWorld",s="elements",o="visible",u="object3D";if(this[n][t]>1){e[r].getInverse(e[i]);var a=e[r],f=-(a[s][2]*this[i][s][12]+a[s][6]*this[i][s][13]+a[s][10]*this[i][s][14]+a[s][14]);this[n][0][u][o]=!0;for(var l=1;l<this[n][t];l++){if(!(f>=this[n][l].visibleAtDistance))break;this[n][l-1][u][o]=!1,this[n][l][u][o]=!0}for(;l<this[n][t];l++)this[n][l][u][o]=!1}},function(){var e="MorphAnimMesh",t=!1,n="direction",r="directionBackwards",i="setFrameRange",s="prototype",o="startKeyframe",u="endKeyframe";THREE[e]=function(e,s){THREE.Mesh.call(this,e,s),this.duration=1e3,this.mirroredLoop=t,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this[n]=1,this[r]=t,this[i](0,this.geometry.morphTargets.length-1)},THREE[e][s]=Object.create(THREE.Mesh[s]),THREE[e][s][i]=function(e,t){this[o]=e,this[u]=t,this.length=this[u]-this[o]+1},THREE[e][s].setDirectionForward=function(){this[n]=1,this[r]=t},THREE[e][s].setDirectionBackward=function(){this[n]=-1,this[r]=!0}}(),THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e="animations",t="morphTargets",n=this.geometry;n[e]||(n[e]={});var r,i=n[e],s=/([a-z]+)(\d+)/;for(var o=0,u=n[t].length;o<u;o++){var a=n[t][o],f=a.name.match(s);if(f&&f.length>1){var l=f[1],c=f[2];i[l]||(i[l]={start:Infinity,end:-Infinity});var h=i[l];o<h.start&&(h.start=o),o>h.end&&(h.end=o),r||(r=l)}}n.firstAnimation=r},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,n){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:n}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var n=this.geometry.animations[e];n?(this.setFrameRange(n.start,n.end),this.duration=1e3*((n.end-n.start)/t),this.time=0):console.warn("animation["+e+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t="duration",n="time",r="directionBackwards",i="currentKeyframe",s="morphTargetInfluences",o="lastKeyframe",u=this[t]/this.length;this[n]+=this.direction*e;if(this.mirroredLoop){if(this[n]>this[t]||this[n]<0)this.direction*=-1,this[n]>this[t]&&(this[n]=this[t],this[r]=!0),this[n]<0&&(this[n]=0,this[r]=!1)}else this[n]=this[n]%this[t],this[n]<0&&(this[n]+=this[t]);var a=this.startKeyframe+THREE.Math.clamp(Math.floor(this[n]/u),0,this.length-1);a!==this[i]&&(this[s][this[o]]=0,this[s][this[i]]=1,this[s][a]=0,this[o]=this[i],this[i]=a);var f=this[n]%u/u;this[r]&&(f=1-f),this[s][this[i]]=f,this[s][this[o]]=1-f},function(){var e="Object3D",t="material",n="prototype",r="create",i="ParticleSystem",s="geometry",o="boundingSphere";THREE.Particle=function(n){THREE[e].call(this),this[t]=n},THREE.Particle[n]=Object[r](THREE[e][n]),THREE[i]=function(n,r){THREE[e].call(this),this[s]=n,this[t]=r!==undefined?r:new THREE.ParticleBasicMaterial({color:Math.random()*16777215}),this.sortParticles=!1,this[s]&&(this[s][o]||this[s].computeBoundingSphere(),this.boundRadius=n[o].radius),this.frustumCulled=!1},THREE[i][n]=Object[r](THREE[e][n]),THREE.Ribbon=function(n,r){THREE[e].call(this),this[s]=n,this[t]=r},THREE.Ribbon[n]=Object[r](THREE[e][n])}(),THREE.SkinnedMesh=function(e,t,n){var r="useVertexTexture",i="bones",s="boneMatrices",o="geometry",u="length",a="boneTextureWidth",f="boneTextureHeight",l="boneTexture",c="NearestFilter";THREE.Mesh.call(this,e,t),this[r]=n!==undefined?n:!0,this.identityMatrix=new THREE.Matrix4,this[i]=[],this[s]=[];var h,p,d,v,m,g;if(this[o][i]!==undefined){for(h=0;h<this[o][i][u];h++)d=this[o][i][h],v=d.pos,m=d.rotq,g=d.scl,p=this.addBone(),p.name=d.name,p.position.set(v[0],v[1],v[2]),p.quaternion.set(m[0],m[1],m[2],m[3]),p.useQuaternion=!0,g!==undefined?p.scale.set(g[0],g[1],g[2]):p.scale.set(1,1,1);for(h=0;h<this[i][u];h++)d=this[o][i][h],p=this[i][h],d.parent===-1?this.add(p):this[i][d.parent].add(p);var y=this[i][u];if(this[r]){var b;y>256?b=64:y>64?b=32:y>16?b=16:b=8,this[a]=b,this[f]=b,this[s]=new Float32Array(this[a]*this[f]*4),this[l]=new THREE.DataTexture(this[s],this[a],this[f],THREE.RGBAFormat,THREE.FloatType),this[l].minFilter=THREE[c],this[l].magFilter=THREE[c],this[l].generateMipmaps=!1,this[l].flipY=!1}else this[s]=new Float32Array(16*y);this.pose()}},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.addBone=function(e){return e===undefined&&(e=new THREE.Bone(this)),this.bones.push(e),e},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(e){var t="matrixWorldNeedsUpdate",n="matrixWorld",r=!0,i="length",s="boneInverses",o="bones",u="skinMatrix",a="offsetMatrix",f="SkinnedMesh";this.matrixAutoUpdate&&this.updateMatrix();if(this[t]||e)this.parent?this[n].multiply(this.parent[n],this.matrix):this[n].copy(this.matrix),this[t]=!1,e=r;for(var l=0,c=this.children[i];l<c;l++){var h=this.children[l];h instanceof THREE.Bone?h.update(this.identityMatrix,!1):h.updateMatrixWorld(r)}if(this[s]==undefined){this[s]=[];for(var p=0,d=this[o][i];p<d;p++){var v=new THREE.Matrix4;v.getInverse(this[o][p][u]),this[s].push(v)}}for(var p=0,d=this[o][i];p<d;p++)THREE[f][a].multiply(this[o][p][u],this[s][p]),THREE[f][a].flattenToArrayOffset(this.boneMatrices,p*16);this.useVertexTexture&&(this.boneTexture.needsUpdate=r)},THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0);for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();n!==Infinity?t.multiplyScalar(n):t.set(1)}},function(){var e="Sprite",t="blending",n="blendSrc",r="blendDst",i="blendEquation",s="useScreenCoordinates",o=!0,u="mergeWith3D",a="affectedByDistance",f="scaleByViewport",l="alignment",c="Vector2",h="SpriteAlignment",p="rotation3d",d="rotation",v="prototype",m="matrix",g="scale",y="RenderableVertex",b="centroidWorld",w="Vector3",E="centroidScreen",S="normalWorld",x="vertexNormalsWorld",T="vertexNormalsLength",N="material",C=null,k="positionWorld",L="positionScreen";THREE.SkinnedMesh.offsetMatrix=new THREE.Matrix4,THREE[e]=function(e){THREE.Object3D.call(this),this.color=e.color!==undefined?new THREE.Color(e.color):new THREE.Color(16777215),this.map=e.map!==undefined?e.map:new THREE.Texture,this[t]=e[t]!==undefined?e[t]:THREE.NormalBlending,this[n]=e[n]!==undefined?e[n]:THREE.SrcAlphaFactor,this[r]=e[r]!==undefined?e[r]:THREE.OneMinusSrcAlphaFactor,this[i]=e[i]!==undefined?e[i]:THREE.AddEquation,this[s]=e[s]!==undefined?e[s]:o,this[u]=e[u]!==undefined?e[u]:!this[s],this[a]=e[a]!==undefined?e[a]:!this[s],this[f]=e[f]!==undefined?e[f]:!this[a],this[l]=e[l]instanceof THREE[c]?e[l]:THREE[h].center,this[p]=this[d],this[d]=0,this.opacity=1,this.uvOffset=new THREE[c](0,0),this.uvScale=new THREE[c](1,1)},THREE[e][v]=Object.create(THREE.Object3D[v]),THREE[e][v].updateMatrix=function(){this[m].setPosition(this.position),this[p].set(0,0,this[d]),this[m].setRotationFromEuler(this[p]);if(this[g].x!==1||this[g].y!==1)this[m][g](this[g]),this.boundRadiusScale=Math.max(this[g].x,this[g].y);this.matrixWorldNeedsUpdate=o},THREE[h]={},THREE[h].topLeft=new THREE[c](1,-1),THREE[h].topCenter=new THREE[c](0,-1),THREE[h].topRight=new THREE[c](-1,-1),THREE[h].centerLeft=new THREE[c](1,0),THREE[h].center=new THREE[c](0,0),THREE[h].centerRight=new THREE[c](-1,0),THREE[h].bottomLeft=new THREE[c](1,1),THREE[h].bottomCenter=new THREE[c](0,1),THREE[h].bottomRight=new THREE[c](-1,1),THREE.RenderableFace3=function(){this.v1=new THREE[y],this.v2=new THREE[y],this.v3=new THREE[y],this[b]=new THREE[w],this[E]=new THREE[w],this[S]=new THREE[w],this[x]=[new THREE[w],new THREE[w],new THREE[w]],this[T]=0,this[N]=C,this.uvs=[[]],this.z=C},THREE.RenderableFace4=function(){this.v1=new THREE[y],this.v2=new THREE[y],this.v3=new THREE[y],this.v4=new THREE[y],this[b]=new THREE[w],this[E]=new THREE[w],this[S]=new THREE[w],this[x]=[new THREE[w],new THREE[w],new THREE[w],new THREE[w]],this[T]=0,this[N]=C,this.uvs=[[]],this.z=C},THREE.RenderableLine=function(){this.z=C,this.v1=new THREE[y],this.v2=new THREE[y],this[N]=C},THREE.RenderableObject=function(){this.object=C,this.z=C},THREE.RenderableParticle=function(){this.object=C,this.x=C,this.y=C,this.z=C,this[d]=C,this[g]=new THREE[c],this[N]=C},THREE[y]=function(){this[k]=new THREE[w],this[L]=new THREE.Vector4,this.visible=o},THREE[y][v].copy=function(e){this[k].copy(e[k]),this[L].copy(e[L])}}(),THREE.WebGLRenderer=function(e){function Eu(e){e[u]=au[m](),e[d]=au[m](),ko[Ot][An][jt]++}function Su(e){e[u]=au[m](),e[d]=au[m](),ko[Ot][An][jt]++}function xu(e){e[u]=au[m](),e[d]=au[m](),ko[Ot][An][jt]++}function Tu(e){e[u]=au[m](),e[B]=au[m](),e[Ht]=au[m](),e[d]=au[m](),e[wn]=au[m](),e[pn]=au[m](),e[lt]=au[m](),e[ct]=au[m](),e[Gt]=au[m](),e[Yn]=au[m]();var t,n;if(e[mt]){e[S]=[];for(t=0,n=e[mt];t<n;t++)e[S][Vn](au[m]())}if(e[dt]){e[A]=[];for(t=0,n=e[dt];t<n;t++)e[A][Vn](au[m]())}ko[Ot][An][jt]++}function Nu(e){au[b](e[u]),au[b](e[d]),ko[Ot][An][jt]--}function Cu(e){au[b](e[u]),au[b](e[d]),ko[Ot][An][jt]--}function ku(e){au[b](e[u]),au[b](e[d]),ko[Ot][An][jt]--}function Lu(e){au[b](e[u]),au[b](e[B]),au[b](e[Ht]),au[b](e[d]),au[b](e[wn]),au[b](e[pn]),au[b](e[lt]),au[b](e[ct]),au[b](e[Gt]),au[b](e[Yn]);var t,n;if(e[mt])for(t=0,n=e[mt];t<n;t++)au[b](e[S][t]);if(e[dt])for(t=0,n=e[dt];t<n;t++)au[b](e[A][t]);if(e[c])for(var r in e[c])au[b](e[c][r][U]);ko[Ot][An][jt]--}function Au(e,t){var r=e[w][i],s=t[Er];if(s[a]){e[c]===undefined&&(e[c]=[]);for(var o in s[a]){var u=s[a][o];if(!u[Xt]||u[Ui]){u[Xt]=y;var f=1;u[zi]==="v2"?f=2:u[zi]==="v3"?f=3:u[zi]==="v4"?f=4:u[zi]==="c"&&(f=3),u[ci]=f,u[n]=new Float32Array(r*f),u[U]=au[m](),u[U][Wt]=o,u[D]=y}e[c][Vn](u)}}}function Ou(e,t){var n=e[w][i];e[J]=new Float32Array(n*3),e[nt]=new Float32Array(n*3),e.__sortArray=[],e[ji]=n,Au(e,t)}function Mu(e,t){var n=e[w][i];e[J]=new Float32Array(n*3),e[nt]=new Float32Array(n*3),e[Ls]=n,Au(e,t)}function _u(e){var t=e[w][i];e[J]=new Float32Array(t*3),e[nt]=new Float32Array(t*3),e.__webglVertexCount=t}function Du(e,t){var r=t[W],s=e.faces3,o=e.faces4,u=s[i]*3+o[i]*4,f=s[i]*1+o[i]*2,l=s[i]*3+o[i]*4,h=Pu(t,e),p=Fu(h),d=Bu(h),v=ju(h);e[J]=new Float32Array(u*3),d&&(e[oi]=new Float32Array(u*3)),r.hasTangents&&(e[Qr]=new Float32Array(u*4)),v&&(e[nt]=new Float32Array(u*3));if(p){if(r.faceUvs[i]>0||r[Wn][i]>0)e[Hs]=new Float32Array(u*2);if(r.faceUvs[i]>1||r[Wn][i]>1)e[Ss]=new Float32Array(u*2)}t[W].skinWeights[i]&&t[W].skinIndices[i]&&(e[gr]=new Float32Array(u*4),e[er]=new Float32Array(u*4)),e[Wi]=new Uint16Array(f*3),e[Qi]=new Uint16Array(l*2);var g,b;if(e[mt]){e[Cn]=[];for(g=0,b=e[mt];g<b;g++)e[Cn][Vn](new Float32Array(u*3))}if(e[dt]){e[kn]=[];for(g=0,b=e[dt];g<b;g++)e[kn][Vn](new Float32Array(u*3))}e[As]=f*3,e[Ls]=l*2;if(h[a]){e[c]===undefined&&(e[c]=[]);for(var w in h[a]){var E=h[a][w],S={};for(var x in E)S[x]=E[x];if(!S[Xt]||S[Ui]){S[Xt]=y;var T=1;S[zi]==="v2"?T=2:S[zi]==="v3"?T=3:S[zi]==="v4"?T=4:S[zi]==="c"&&(T=3),S[ci]=T,S[n]=new Float32Array(u*T),S[U]=au[m](),S[U][Wt]=w,E[D]=y,S.__original=E}e[c][Vn](S)}}e[Ar]=y}function Pu(e,t){if(!(!e[Er]||e[Er]instanceof THREE[Cs]))return e[Er];if(t[Un]>=0)return e[W].materials[t[Un]]}function Hu(e){return e&&e.shading!==undefined&&e.shading===THREE[ui]}function Bu(e){return e instanceof THREE[Jn]&&!e[ir]||e instanceof THREE[$n]?o:Hu(e)?THREE[ui]:THREE.FlatShading}function ju(e){return e[ft]?e[ft]:o}function Fu(e){return e.map||e[wr]||e[yn]||e[At]||e[Nt]||e instanceof THREE[Rr]?y:o}function Iu(e){var r,i,o;for(r in e[a])r===is?o=au[T]:o=au[t],i=e[a][r],i[U]=au[m](),au[s](o,i[U]),au[v](o,i[n],au.STATIC_DRAW)}function qu(e,r,o){var a,f,m,g,y,b,E=e[w],S=E[i],x=e[ar],T=x[i],N=e[J],C=e[nt],k=e.__sortArray,L=e[l],A=e[O],M=e[h],_=e[c],P,H,B,j,F,I,q;if(o[cn]){ru.copy(nu),ru.multiplySelf(o[R]);for(a=0;a<S;a++)m=E[a],iu.copy(m),ru[zs](iu),k[a]=[iu.z,a];k.sort(function(e,t){return t[0]-e[0]});for(a=0;a<S;a++)m=E[k[a][1]],g=a*3,N[g]=m.x,N[g+1]=m.y,N[g+2]=m.z;for(f=0;f<T;f++)g=f*3,b=x[k[f][1]],C[g]=b.r,C[g+1]=b.g,C[g+2]=b.b;if(_)for(P=0,H=_[i];P<H;P++){q=_[P];if(q[Y]!==undefined&&q[Y]!==w)continue;g=0,F=q[p][i];if(q[ci]===1)for(j=0;j<F;j++)y=k[j][1],q[n][j]=q[p][y];else if(q[ci]===2)for(j=0;j<F;j++)y=k[j][1],I=q[p][y],q[n][g]=I.x,q[n][g+1]=I.y,g+=2;else if(q[ci]===3)if(q[zi]==="c")for(j=0;j<F;j++)y=k[j][1],I=q[p][y],q[n][g]=I.r,q[n][g+1]=I.g,q[n][g+2]=I.b,g+=3;else for(j=0;j<F;j++)y=k[j][1],I=q[p][y],q[n][g]=I.x,q[n][g+1]=I.y,q[n][g+2]=I.z,g+=3;else if(q[ci]===4)for(j=0;j<F;j++)y=k[j][1],I=q[p][y],q[n][g]=I.x,q[n][g+1]=I.y,q[n][g+2]=I.z,q[n][g+3]=I.w,g+=4}}else{if(L)for(a=0;a<S;a++)m=E[a],g=a*3,N[g]=m.x,N[g+1]=m.y,N[g+2]=m.z;if(M)for(f=0;f<T;f++)b=x[f],g=f*3,C[g]=b.r,C[g+1]=b.g,C[g+2]=b.b;if(_)for(P=0,H=_[i];P<H;P++){q=_[P];if(q[D]&&(q[Y]===undefined||q[Y]===w)){F=q[p][i],g=0;if(q[ci]===1)for(j=0;j<F;j++)q[n][j]=q[p][j];else if(q[ci]===2)for(j=0;j<F;j++)I=q[p][j],q[n][g]=I.x,q[n][g+1]=I.y,g+=2;else if(q[ci]===3)if(q[zi]==="c")for(j=0;j<F;j++)I=q[p][j],q[n][g]=I.r,q[n][g+1]=I.g,q[n][g+2]=I.b,g+=3;else for(j=0;j<F;j++)I=q[p][j],q[n][g]=I.x,q[n][g+1]=I.y,q[n][g+2]=I.z,g+=3;else if(q[ci]===4)for(j=0;j<F;j++)I=q[p][j],q[n][g]=I.x,q[n][g+1]=I.y,q[n][g+2]=I.z,q[n][g+3]=I.w,g+=4}}}if(L||o[cn])au[s](au[t],e[u]),au[v](au[t],N,r);if(M||o[cn])au[s](au[t],e[d]),au[v](au[t],C,r);if(_)for(P=0,H=_[i];P<H;P++){q=_[P];if(q[D]||o[cn])au[s](au[t],q[U]),au[v](au[t],q[n],r)}}function Ru(e,r){var o,a,f,m,g,y=e[w],b=e[ar],E=y[i],S=b[i],x=e[J],T=e[nt],N=e[l],C=e[h],k=e[c],L,A,O,M,_,P,H;if(N){for(o=0;o<E;o++)f=y[o],m=o*3,x[m]=f.x,x[m+1]=f.y,x[m+2]=f.z;au[s](au[t],e[u]),au[v](au[t],x,r)}if(C){for(a=0;a<S;a++)g=b[a],m=a*3,T[m]=g.r,T[m+1]=g.g,T[m+2]=g.b;au[s](au[t],e[d]),au[v](au[t],T,r)}if(k)for(L=0,A=k[i];L<A;L++){H=k[L];if(H[D]&&(H[Y]===undefined||H[Y]===w)){m=0,_=H[p][i];if(H[ci]===1)for(M=0;M<_;M++)H[n][M]=H[p][M];else if(H[ci]===2)for(M=0;M<_;M++)P=H[p][M],H[n][m]=P.x,H[n][m+1]=P.y,m+=2;else if(H[ci]===3)if(H[zi]==="c")for(M=0;M<_;M++)P=H[p][M],H[n][m]=P.r,H[n][m+1]=P.g,H[n][m+2]=P.b,m+=3;else for(M=0;M<_;M++)P=H[p][M],H[n][m]=P.x,H[n][m+1]=P.y,H[n][m+2]=P.z,m+=3;else if(H[ci]===4)for(M=0;M<_;M++)P=H[p][M],H[n][m]=P.x,H[n][m+1]=P.y,H[n][m+2]=P.z,H[n][m+3]=P.w,m+=4;au[s](au[t],H[U]),au[v](au[t],H[n],r)}}}function Uu(e,n){var r,o,a,f,c,p=e[w],m=e[ar],g=p[i],y=m[i],b=e[J],E=e[nt],S=e[l],x=e[h];if(S){for(r=0;r<g;r++)a=p[r],f=r*3,b[f]=a.x,b[f+1]=a.y,b[f+2]=a.z;au[s](au[t],e[u]),au[v](au[t],b,n)}if(x){for(o=0;o<y;o++)c=m[o],f=o*3,E[f]=c.r,E[f+1]=c.g,E[f+2]=c.b;au[s](au[t],e[d]),au[v](au[t],E,n)}}function zu(e,r,o,a,f){if(!e[Ar])return;var m=Bu(f),g=ju(f),y=Fu(f),b=m===THREE[ui],E,x,N,C,k,L,M,_,P,H,j,q,R,z,V,$,K,Q,G,Z,et,tt,rt,it,st,ot,ut,at,ht,pt,dt,mt,gt,yt,bt,wt,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,_t,Dt,Pt,Bt,jt,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t=0,Jt=0,Kt=0,Qt=0,Yt=0,Zt=0,en=0,tn=0,nn=0,rn=0,sn=0,on=0,un=0,an,fn=e[J],ln=e[Hs],cn=e[Ss],hn=e[oi],dn=e[Qr],vn=e[nt],mn=e[gr],gn=e[er],yn=e[Cn],bn=e[kn],Sn=e[c],xn,Tn=e[Wi],Nn=e[Qi],Ln=r[W],An=Ln[l],On=Ln[O],Mn=Ln[vt],_n=Ln[X],Dn=Ln[I],Pn=Ln[h],Hn=Ln[Et],Bn=Ln[w],Fn=e.faces3,In=e.faces4,qn=Ln[jn],Rn=Ln[Wn][0],Un=Ln[Wn][1],Xn=Ln[ar],Vn=Ln.skinIndices,$n=Ln.skinWeights,Jn=Ln[En],Kn=Ln[F];if(An){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],R=Bn[C.a],z=Bn[C.b],V=Bn[C.c],fn[Jt]=R.x,fn[Jt+1]=R.y,fn[Jt+2]=R.z,fn[Jt+3]=z.x,fn[Jt+4]=z.y,fn[Jt+5]=z.z,fn[Jt+6]=V.x,fn[Jt+7]=V.y,fn[Jt+8]=V.z,Jt+=9;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],R=Bn[C.a],z=Bn[C.b],V=Bn[C.c],$=Bn[C.d],fn[Jt]=R.x,fn[Jt+1]=R.y,fn[Jt+2]=R.z,fn[Jt+3]=z.x,fn[Jt+4]=z.y,fn[Jt+5]=z.z,fn[Jt+6]=V.x,fn[Jt+7]=V.y,fn[Jt+8]=V.z,fn[Jt+9]=$.x,fn[Jt+10]=$.y,fn[Jt+11]=$.z,Jt+=12;au[s](au[t],e[u]),au[v](au[t],fn,o)}if(Hn)for(qt=0,Rt=Jn[i];qt<Rt;qt++){sn=0;for(E=0,x=Fn[i];E<x;E++)Wt=Fn[E],C=qn[Wt],R=Jn[qt][w][C.a],z=Jn[qt][w][C.b],V=Jn[qt][w][C.c],Ut=yn[qt],Ut[sn]=R.x,Ut[sn+1]=R.y,Ut[sn+2]=R.z,Ut[sn+3]=z.x,Ut[sn+4]=z.y,Ut[sn+5]=z.z,Ut[sn+6]=V.x,Ut[sn+7]=V.y,Ut[sn+8]=V.z,f[F]&&(b?(Xt=Kn[qt][zn][Wt],et=Xt.a,tt=Xt.b,rt=Xt.c):(et=Kn[qt].faceNormals[Wt],tt=et,rt=et),zt=bn[qt],zt[sn]=et.x,zt[sn+1]=et.y,zt[sn+2]=et.z,zt[sn+3]=tt.x,zt[sn+4]=tt.y,zt[sn+5]=tt.z,zt[sn+6]=rt.x,zt[sn+7]=rt.y,zt[sn+8]=rt.z),sn+=9;for(E=0,x=In[i];E<x;E++)Wt=In[E],C=qn[Wt],R=Jn[qt][w][C.a],z=Jn[qt][w][C.b],V=Jn[qt][w][C.c],$=Jn[qt][w][C.d],Ut=yn[qt],Ut[sn]=R.x,Ut[sn+1]=R.y,Ut[sn+2]=R.z,Ut[sn+3]=z.x,Ut[sn+4]=z.y,Ut[sn+5]=z.z,Ut[sn+6]=V.x,Ut[sn+7]=V.y,Ut[sn+8]=V.z,Ut[sn+9]=$.x,Ut[sn+10]=$.y,Ut[sn+11]=$.z,f[F]&&(b?(Xt=Kn[qt][zn][Wt],et=Xt.a,tt=Xt.b,rt=Xt.c,it=Xt.d):(et=Kn[qt].faceNormals[Wt],tt=et,rt=et,it=et),zt=bn[qt],zt[sn]=et.x,zt[sn+1]=et.y,zt[sn+2]=et.z,zt[sn+3]=tt.x,zt[sn+4]=tt.y,zt[sn+5]=tt.z,zt[sn+6]=rt.x,zt[sn+7]=rt.y,zt[sn+8]=rt.z,zt[sn+9]=it.x,zt[sn+10]=it.y,zt[sn+11]=it.z),sn+=12;au[s](au[t],e[S][qt]),au[v](au[t],yn[qt],o),f[F]&&(au[s](au[t],e[A][qt]),au[v](au[t],bn[qt],o))}if($n[i]){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],ht=$n[C.a],pt=$n[C.b],dt=$n[C.c],gn[rn]=ht.x,gn[rn+1]=ht.y,gn[rn+2]=ht.z,gn[rn+3]=ht.w,gn[rn+4]=pt.x,gn[rn+5]=pt.y,gn[rn+6]=pt.z,gn[rn+7]=pt.w,gn[rn+8]=dt.x,gn[rn+9]=dt.y,gn[rn+10]=dt.z,gn[rn+11]=dt.w,gt=Vn[C.a],yt=Vn[C.b],bt=Vn[C.c],mn[rn]=gt.x,mn[rn+1]=gt.y,mn[rn+2]=gt.z,mn[rn+3]=gt.w,mn[rn+4]=yt.x,mn[rn+5]=yt.y,mn[rn+6]=yt.z,mn[rn+7]=yt.w,mn[rn+8]=bt.x,mn[rn+9]=bt.y,mn[rn+10]=bt.z,mn[rn+11]=bt.w,rn+=12;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],ht=$n[C.a],pt=$n[C.b],dt=$n[C.c],mt=$n[C.d],gn[rn]=ht.x,gn[rn+1]=ht.y,gn[rn+2]=ht.z,gn[rn+3]=ht.w,gn[rn+4]=pt.x,gn[rn+5]=pt.y,gn[rn+6]=pt.z,gn[rn+7]=pt.w,gn[rn+8]=dt.x,gn[rn+9]=dt.y,gn[rn+10]=dt.z,gn[rn+11]=dt.w,gn[rn+12]=mt.x,gn[rn+13]=mt.y,gn[rn+14]=mt.z,gn[rn+15]=mt.w,gt=Vn[C.a],yt=Vn[C.b],bt=Vn[C.c],wt=Vn[C.d],mn[rn]=gt.x,mn[rn+1]=gt.y,mn[rn+2]=gt.z,mn[rn+3]=gt.w,mn[rn+4]=yt.x,mn[rn+5]=yt.y,mn[rn+6]=yt.z,mn[rn+7]=yt.w,mn[rn+8]=bt.x,mn[rn+9]=bt.y,mn[rn+10]=bt.z,mn[rn+11]=bt.w,mn[rn+12]=wt.x,mn[rn+13]=wt.y,mn[rn+14]=wt.z,mn[rn+15]=wt.w,rn+=16;rn>0&&(au[s](au[t],e[lt]),au[v](au[t],mn,o),au[s](au[t],e[ct]),au[v](au[t],gn,o))}if(Pn&&g){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],_=C[ft],P=C[Mt],_[i]===3&&g===THREE.VertexColors?(st=_[0],ot=_[1],ut=_[2]):(st=P,ot=P,ut=P),vn[nn]=st.r,vn[nn+1]=st.g,vn[nn+2]=st.b,vn[nn+3]=ot.r,vn[nn+4]=ot.g,vn[nn+5]=ot.b,vn[nn+6]=ut.r,vn[nn+7]=ut.g,vn[nn+8]=ut.b,nn+=9;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],_=C[ft],P=C[Mt],_[i]===4&&g===THREE.VertexColors?(st=_[0],ot=_[1],ut=_[2],at=_[3]):(st=P,ot=P,ut=P,at=P),vn[nn]=st.r,vn[nn+1]=st.g,vn[nn+2]=st.b,vn[nn+3]=ot.r,vn[nn+4]=ot.g,vn[nn+5]=ot.b,vn[nn+6]=ut.r,vn[nn+7]=ut.g,vn[nn+8]=ut.b,vn[nn+9]=at.r,vn[nn+10]=at.g,vn[nn+11]=at.b,nn+=12;nn>0&&(au[s](au[t],e[d]),au[v](au[t],vn,o))}if(Dn&&Ln.hasTangents){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],H=C[Zs],K=H[0],Q=H[1],G=H[2],dn[en]=K.x,dn[en+1]=K.y,dn[en+2]=K.z,dn[en+3]=K.w,dn[en+4]=Q.x,dn[en+5]=Q.y,dn[en+6]=Q.z,dn[en+7]=Q.w,dn[en+8]=G.x,dn[en+9]=G.y,dn[en+10]=G.z,dn[en+11]=G.w,en+=12;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],H=C[Zs],K=H[0],Q=H[1],G=H[2],Z=H[3],dn[en]=K.x,dn[en+1]=K.y,dn[en+2]=K.z,dn[en+3]=K.w,dn[en+4]=Q.x,dn[en+5]=Q.y,dn[en+6]=Q.z,dn[en+7]=Q.w,dn[en+8]=G.x,dn[en+9]=G.y,dn[en+10]=G.z,dn[en+11]=G.w,dn[en+12]=Z.x,dn[en+13]=Z.y,dn[en+14]=Z.z,dn[en+15]=Z.w,en+=16;au[s](au[t],e[Ht]),au[v](au[t],dn,o)}if(_n&&m){for(E=0,x=Fn[i];E<x;E++){C=qn[Fn[E]],k=C[zn],L=C[Ft];if(k[i]===3&&b)for(Dt=0;Dt<3;Dt++)Bt=k[Dt],hn[Zt]=Bt.x,hn[Zt+1]=Bt.y,hn[Zt+2]=Bt.z,Zt+=3;else for(Dt=0;Dt<3;Dt++)hn[Zt]=L.x,hn[Zt+1]=L.y,hn[Zt+2]=L.z,Zt+=3}for(E=0,x=In[i];E<x;E++){C=qn[In[E]],k=C[zn],L=C[Ft];if(k[i]===4&&b)for(Dt=0;Dt<4;Dt++)Bt=k[Dt],hn[Zt]=Bt.x,hn[Zt+1]=Bt.y,hn[Zt+2]=Bt.z,Zt+=3;else for(Dt=0;Dt<4;Dt++)hn[Zt]=L.x,hn[Zt+1]=L.y,hn[Zt+2]=L.z,Zt+=3}au[s](au[t],e[B]),au[v](au[t],hn,o)}if(Mn&&Rn&&y){for(E=0,x=Fn[i];E<x;E++){N=Fn[E],C=qn[N],j=Rn[N];if(j===undefined)continue;for(Dt=0;Dt<3;Dt++)jt=j[Dt],ln[Kt]=jt.u,ln[Kt+1]=jt.v,Kt+=2}for(E=0,x=In[i];E<x;E++){N=In[E],C=qn[N],j=Rn[N];if(j===undefined)continue;for(Dt=0;Dt<4;Dt++)jt=j[Dt],ln[Kt]=jt.u,ln[Kt+1]=jt.v,Kt+=2}Kt>0&&(au[s](au[t],e[wn]),au[v](au[t],ln,o))}if(Mn&&Un&&y){for(E=0,x=Fn[i];E<x;E++){N=Fn[E],C=qn[N],q=Un[N];if(q===undefined)continue;for(Dt=0;Dt<3;Dt++)It=q[Dt],cn[Qt]=It.u,cn[Qt+1]=It.v,Qt+=2}for(E=0,x=In[i];E<x;E++){N=In[E],C=qn[N],q=Un[N];if(q===undefined)continue;for(Dt=0;Dt<4;Dt++)It=q[Dt],cn[Qt]=It.u,cn[Qt+1]=It.v,Qt+=2}Qt>0&&(au[s](au[t],e[pn]),au[v](au[t],cn,o))}if(On){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],Tn[Yt]=$t,Tn[Yt+1]=$t+1,Tn[Yt+2]=$t+2,Yt+=3,Nn[tn]=$t,Nn[tn+1]=$t+1,Nn[tn+2]=$t,Nn[tn+3]=$t+2,Nn[tn+4]=$t+1,Nn[tn+5]=$t+2,tn+=6,$t+=3;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],Tn[Yt]=$t,Tn[Yt+1]=$t+1,Tn[Yt+2]=$t+3,Tn[Yt+3]=$t+1,Tn[Yt+4]=$t+2,Tn[Yt+5]=$t+3,Yt+=6,Nn[tn]=$t,Nn[tn+1]=$t+1,Nn[tn+2]=$t,Nn[tn+3]=$t+3,Nn[tn+4]=$t+1,Nn[tn+5]=$t+2,Nn[tn+6]=$t+2,Nn[tn+7]=$t+3,tn+=8,$t+=4;au[s](au[T],e[Gt]),au[v](au[T],Tn,o),au[s](au[T],e[Yn]),au[v](au[T],Nn,o)}if(Sn)for(Dt=0,Pt=Sn[i];Dt<Pt;Dt++){xn=Sn[Dt];if(!xn.__original[D])continue;on=0,un=0;if(xn[ci]===1){if(xn[Y]===undefined||xn[Y]===w){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],xn[n][on]=xn[p][C.a],xn[n][on+1]=xn[p][C.b],xn[n][on+2]=xn[p][C.c],on+=3;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],xn[n][on]=xn[p][C.a],xn[n][on+1]=xn[p][C.b],xn[n][on+2]=xn[p][C.c],xn[n][on+3]=xn[p][C.d],on+=4}else if(xn[Y]===jn){for(E=0,x=Fn[i];E<x;E++)an=xn[p][Fn[E]],xn[n][on]=an,xn[n][on+1]=an,xn[n][on+2]=an,on+=3;for(E=0,x=In[i];E<x;E++)an=xn[p][In[E]],xn[n][on]=an,xn[n][on+1]=an,xn[n][on+2]=an,xn[n][on+3]=an,on+=4}}else if(xn[ci]===2){if(xn[Y]===undefined||xn[Y]===w){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],R=xn[p][C.a],z=xn[p][C.b],V=xn[p][C.c],xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=z.x,xn[n][on+3]=z.y,xn[n][on+4]=V.x,xn[n][on+5]=V.y,on+=6;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],R=xn[p][C.a],z=xn[p][C.b],V=xn[p][C.c],$=xn[p][C.d],xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=z.x,xn[n][on+3]=z.y,xn[n][on+4]=V.x,xn[n][on+5]=V.y,xn[n][on+6]=$.x,xn[n][on+7]=$.y,on+=8}else if(xn[Y]===jn){for(E=0,x=Fn[i];E<x;E++)an=xn[p][Fn[E]],R=an,z=an,V=an,xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=z.x,xn[n][on+3]=z.y,xn[n][on+4]=V.x,xn[n][on+5]=V.y,on+=6;for(E=0,x=In[i];E<x;E++)an=xn[p][In[E]],R=an,z=an,V=an,$=an,xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=z.x,xn[n][on+3]=z.y,xn[n][on+4]=V.x,xn[n][on+5]=V.y,xn[n][on+6]=$.x,xn[n][on+7]=$.y,on+=8}}else if(xn[ci]===3){var Qn;xn[zi]==="c"?Qn=["r","g","b"]:Qn=["x","y","z"];if(xn[Y]===undefined||xn[Y]===w){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],R=xn[p][C.a],z=xn[p][C.b],V=xn[p][C.c],xn[n][on]=R[Qn[0]],xn[n][on+1]=R[Qn[1]],xn[n][on+2]=R[Qn[2]],xn[n][on+3]=z[Qn[0]],xn[n][on+4]=z[Qn[1]],xn[n][on+5]=z[Qn[2]],xn[n][on+6]=V[Qn[0]],xn[n][on+7]=V[Qn[1]],xn[n][on+8]=V[Qn[2]],on+=9;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],R=xn[p][C.a],z=xn[p][C.b],V=xn[p][C.c],$=xn[p][C.d],xn[n][on]=R[Qn[0]],xn[n][on+1]=R[Qn[1]],xn[n][on+2]=R[Qn[2]],xn[n][on+3]=z[Qn[0]],xn[n][on+4]=z[Qn[1]],xn[n][on+5]=z[Qn[2]],xn[n][on+6]=V[Qn[0]],xn[n][on+7]=V[Qn[1]],xn[n][on+8]=V[Qn[2]],xn[n][on+9]=$[Qn[0]],xn[n][on+10]=$[Qn[1]],xn[n][on+11]=$[Qn[2]],on+=12}else if(xn[Y]===jn){for(E=0,x=Fn[i];E<x;E++)an=xn[p][Fn[E]],R=an,z=an,V=an,xn[n][on]=R[Qn[0]],xn[n][on+1]=R[Qn[1]],xn[n][on+2]=R[Qn[2]],xn[n][on+3]=z[Qn[0]],xn[n][on+4]=z[Qn[1]],xn[n][on+5]=z[Qn[2]],xn[n][on+6]=V[Qn[0]],xn[n][on+7]=V[Qn[1]],xn[n][on+8]=V[Qn[2]],on+=9;for(E=0,x=In[i];E<x;E++)an=xn[p][In[E]],R=an,z=an,V=an,$=an,xn[n][on]=R[Qn[0]],xn[n][on+1]=R[Qn[1]],xn[n][on+2]=R[Qn[2]],xn[n][on+3]=z[Qn[0]],xn[n][on+4]=z[Qn[1]],xn[n][on+5]=z[Qn[2]],xn[n][on+6]=V[Qn[0]],xn[n][on+7]=V[Qn[1]],xn[n][on+8]=V[Qn[2]],xn[n][on+9]=$[Qn[0]],xn[n][on+10]=$[Qn[1]],xn[n][on+11]=$[Qn[2]],on+=12}else if(xn[Y]===rs){for(E=0,x=Fn[i];E<x;E++)an=xn[p][Fn[E]],R=an[0],z=an[1],V=an[2],xn[n][on]=R[Qn[0]],xn[n][on+1]=R[Qn[1]],xn[n][on+2]=R[Qn[2]],xn[n][on+3]=z[Qn[0]],xn[n][on+4]=z[Qn[1]],xn[n][on+5]=z[Qn[2]],xn[n][on+6]=V[Qn[0]],xn[n][on+7]=V[Qn[1]],xn[n][on+8]=V[Qn[2]],on+=9;for(E=0,x=In[i];E<x;E++)an=xn[p][In[E]],R=an[0],z=an[1],V=an[2],$=an[3],xn[n][on]=R[Qn[0]],xn[n][on+1]=R[Qn[1]],xn[n][on+2]=R[Qn[2]],xn[n][on+3]=z[Qn[0]],xn[n][on+4]=z[Qn[1]],xn[n][on+5]=z[Qn[2]],xn[n][on+6]=V[Qn[0]],xn[n][on+7]=V[Qn[1]],xn[n][on+8]=V[Qn[2]],xn[n][on+9]=$[Qn[0]],xn[n][on+10]=$[Qn[1]],xn[n][on+11]=$[Qn[2]],on+=12}}else if(xn[ci]===4)if(xn[Y]===undefined||xn[Y]===w){for(E=0,x=Fn[i];E<x;E++)C=qn[Fn[E]],R=xn[p][C.a],z=xn[p][C.b],V=xn[p][C.c],xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=R.z,xn[n][on+3]=R.w,xn[n][on+4]=z.x,xn[n][on+5]=z.y,xn[n][on+6]=z.z,xn[n][on+7]=z.w,xn[n][on+8]=V.x,xn[n][on+9]=V.y,xn[n][on+10]=V.z,xn[n][on+11]=V.w,on+=12;for(E=0,x=In[i];E<x;E++)C=qn[In[E]],R=xn[p][C.a],z=xn[p][C.b],V=xn[p][C.c],$=xn[p][C.d],xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=R.z,xn[n][on+3]=R.w,xn[n][on+4]=z.x,xn[n][on+5]=z.y,xn[n][on+6]=z.z,xn[n][on+7]=z.w,xn[n][on+8]=V.x,xn[n][on+9]=V.y,xn[n][on+10]=V.z,xn[n][on+11]=V.w,xn[n][on+12]=$.x,xn[n][on+13]=$.y,xn[n][on+14]=$.z,xn[n][on+15]=$.w,on+=16}else if(xn[Y]===jn){for(E=0,x=Fn[i];E<x;E++)an=xn[p][Fn[E]],R=an,z=an,V=an,xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=R.z,xn[n][on+3]=R.w,xn[n][on+4]=z.x,xn[n][on+5]=z.y,xn[n][on+6]=z.z,xn[n][on+7]=z.w,xn[n][on+8]=V.x,xn[n][on+9]=V.y,xn[n][on+10]=V.z,xn[n][on+11]=V.w,on+=12;for(E=0,x=In[i];E<x;E++)an=xn[p][In[E]],R=an,z=an,V=an,$=an,xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=R.z,xn[n][on+3]=R.w,xn[n][on+4]=z.x,xn[n][on+5]=z.y,xn[n][on+6]=z.z,xn[n][on+7]=z.w,xn[n][on+8]=V.x,xn[n][on+9]=V.y,xn[n][on+10]=V.z,xn[n][on+11]=V.w,xn[n][on+12]=$.x,xn[n][on+13]=$.y,xn[n][on+14]=$.z,xn[n][on+15]=$.w,on+=16}else if(xn[Y]===rs){for(E=0,x=Fn[i];E<x;E++)an=xn[p][Fn[E]],R=an[0],z=an[1],V=an[2],xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=R.z,xn[n][on+3]=R.w,xn[n][on+4]=z.x,xn[n][on+5]=z.y,xn[n][on+6]=z.z,xn[n][on+7]=z.w,xn[n][on+8]=V.x,xn[n][on+9]=V.y,xn[n][on+10]=V.z,xn[n][on+11]=V.w,on+=12;for(E=0,x=In[i];E<x;E++)an=xn[p][In[E]],R=an[0],z=an[1],V=an[2],$=an[3],xn[n][on]=R.x,xn[n][on+1]=R.y,xn[n][on+2]=R.z,xn[n][on+3]=R.w,xn[n][on+4]=z.x,xn[n][on+5]=z.y,xn[n][on+6]=z.z,xn[n][on+7]=z.w,xn[n][on+8]=V.x,xn[n][on+9]=V.y,xn[n][on+10]=V.z,xn[n][on+11]=V.w,xn[n][on+12]=$.x,xn[n][on+13]=$.y,xn[n][on+14]=$.z,xn[n][on+15]=$.w,on+=16}au[s](au[t],xn[U]),au[v](au[t],xn[n],o)}a&&(delete e[Ar],delete e[nt],delete e[oi],delete e[Qr],delete e[Hs],delete e[Ss],delete e[Wi],delete e[J],delete e[Qi],delete e[gr],delete e[er])}function Wu(e,r,i){var o=e[a],u=o[is],f=o[G],c=o[Ft],p=o.uv,d=o[Mt],m=o[gn];e[O]&&u!==undefined&&(au[s](au[T],u[U]),au[v](au[T],u[n],r)),e[l]&&f!==undefined&&(au[s](au[t],f[U]),au[v](au[t],f[n],r)),e[X]&&c!==undefined&&(au[s](au[t],c[U]),au[v](au[t],c[n],r)),e[vt]&&p!==undefined&&(au[s](au[t],p[U]),au[v](au[t],p[n],r)),e[h]&&d!==undefined&&(au[s](au[t],d[U]),au[v](au[t],d[n],r)),e[I]&&m!==undefined&&(au[s](au[t],m[U]),au[v](au[t],m[n],r));if(i)for(var g in e[a])delete e[a][g][n]}function Xu(e,t,n){e&&au[s](au[T],t),au.drawElements(au[Fs],n,au[Jr],0),ko[Ot][bt].calls++,ko[Ot][bt][w]+=n,ko[Ot][bt][jn]+=n/3}function Vu(e){au[bs](au.POINTS,0,e),ko[Ot][bt].calls++,ko[Ot][bt].points+=e}function $u(e,t,n,r,i,s,o,u,a,f,l,c){e&&(Ku(t[G],r),Gu(t,i),Yu(t[Mt],s),Zu(t[Ft],o),ea(t[gn],u),ta(t.uv,a),na(t.uv2,f),Qu(n,t,l,c))}function Ju(e,t,n){var r=o,i=e?1:0,s=t*16777215+n*2+i;return s!==Do?(Do=s,y):o}function Ku(e,n){au[s](au[t],n),au[r](e,3,au[xt],o,0,0)}function Qu(e,n,i,u){e[Sr]&&n[sr]>=0&&n[Hn]>=0&&(au[s](au[t],i),au[r](n[sr],4,au[xt],o,0,0),au[s](au[t],u),au[r](n[Hn],4,au[xt],o,0,0))}function Gu(e,n){if(n)for(var u=0,a=n[i];u<a;u++){var f=n[u];e[f[U][Wt]]>=0&&(au[s](au[t],f[U]),au[r](e[f[U][Wt]],f[ci],au[xt],o,0,0))}}function Yu(e,n){e>=0&&(au[s](au[t],n),au[r](e,3,au[xt],o,0,0))}function Zu(e,n){e>=0&&(au[s](au[t],n),au[r](e,3,au[xt],o,0,0))}function ea(e,n){e>=0&&(au[s](au[t],n),au[r](e,4,au[xt],o,0,0))}function ta(e,n){e>=0&&(n?(au[s](au[t],n),au[r](e,2,au[xt],o,0,0),au[f](e)):au[tn](e))}function na(e,n){e>=0&&(n?(au[s](au[t],n),au[r](e,2,au[xt],o,0,0),au[f](e)):au[tn](e))}function ra(e,n,f){var l=e[Qt][a];f[Us]!==-1?(au[s](au[t],n[S][f[Us]]),au[r](l[G],3,au[xt],o,0,0)):l[G]>=0&&(au[s](au[t],n[u]),au[r](l[G],3,au[xt],o,0,0));if(f[Si][i]){var c=0,h=f[Si],p=f[Z];while(c<e[M]&&c<h[i])au[s](au[t],n[S][h[c]]),au[r](l[qt+c],3,au[xt],o,0,0),e[F]&&(au[s](au[t],n[A][h[c]]),au[r](l[Rt+c],3,au[xt],o,0,0)),f[et][c]=p[h[c]],c++}else{var d,v=[],p=f[Z],m,g=p[i];for(m=0;m<g;m++)d=p[m],d>0&&v[Vn]([m,d]);v[i]>e[M]?(v.sort(sa),v[i]=e[M]):v[i]>e[Yt]?v.sort(sa):v[i]===0&&v[Vn]([0,0]);var y,c=0;while(c<e[M])v[c]?(y=v[c][0],au[s](au[t],n[S][y]),au[r](l[qt+c],3,au[xt],o,0,0),e[F]&&(au[s](au[t],n[A][y]),au[r](l[Rt+c],3,au[xt],o,0,0)),f[et][c]=p[y]):(au[r](l[qt+c],3,au[xt],o,0,0),e[F]&&au[r](l[Rt+c],3,au[xt],o,0,0),f[et][c]=0),c++}e[Qt][Ct][Z]!==x&&au.uniform1fv(e[Qt][Ct][Z],f[et])}function ia(e,t){return t.z-e.z}function sa(e,t){return t[1]-e[1]}function oa(e,t,n){if(!e[i])return;for(var r=0,s=e[i];r<s;r++)Oo=x,Po=x,Io=-1,zo=-1,Wo=-1,jo=-1,Fo=-1,Do=-1,_o=-1,ou=y,e[r][bt](t,n,Zo,eu),Oo=x,Po=x,Io=-1,zo=-1,Wo=-1,jo=-1,Fo=-1,Do=-1,_o=-1,ou=y}function ua(e,t,n,r,s,o,u,a){var f,l,c,h,p,d,v;t?(p=e[i]-1,d=-1,v=-1):(p=0,d=e[i],v=1);for(var m=p;m!==d;m+=v){f=e[m];if(f[bt]){l=f[ri],c=f[U];if(a)h=a;else{h=f[n];if(!h)continue;u&&ko[_n](h[vo],h[ot],h[ho],h[ao]),ko[Sn](h[Ps]),ko[un](h[ys]),Va(h[In],h[Dn],h[Rn])}ko[vr](h),c instanceof THREE[kt]?ko[ss](r,s,o,h,c,l):ko.renderBuffer(r,s,o,h,c,l)}}}function aa(e,t,n,r,s,o,u){var a,f,l,c;for(var h=0,p=e[i];h<p;h++){a=e[h],f=a[ri];if(f[bi]){if(u)l=u;else{l=a[t];if(!l)continue;o&&ko[_n](l[vo],l[ot],l[ho],l[ao]),ko[Sn](l[Ps]),ko[un](l[ys]),Va(l[In],l[Dn],l[Rn])}ko[Ni](n,r,s,l,f)}}}function fa(e){var t=e[ri],n=t[Er];n[z]?(e[z]=n,e[or]=x):(e[or]=n,e[z]=x)}function la(e){var t=e[ri],n=e[U],r,i,s;s=t[Er],s instanceof THREE[Cs]?(i=n[Un],i>=0&&(r=t[W].materials[i],r[z]?(e[z]=r,e[or]=x):(e[or]=r,e[z]=x))):(r=s,r&&(r[z]?(e[z]=r,e[or]=x):(e[or]=r,e[z]=x)))}function ca(e){var t,n,r,s,o,u,a,f={},l=e[En][i],c=e[F][i];e[g]={};for(t=0,n=e[jn][i];t<n;t++)r=e[jn][t],s=r[Un],u=s!==undefined?s:-1,f[u]===undefined&&(f[u]={hash:u,counter:0}),a=f[u].hash+"_"+f[u].counter,e[g][a]===undefined&&(e[g][a]={faces3:[],faces4:[],materialIndex:s,vertices:0,numMorphTargets:l,numMorphNormals:c}),o=r instanceof THREE.Face3?3:4,e[g][a][w]+o>65535&&(f[u].counter+=1,a=f[u].hash+"_"+f[u].counter,e[g][a]===undefined&&(e[g][a]={faces3:[],faces4:[],materialIndex:s,vertices:0,numMorphTargets:l,numMorphNormals
:c})),r instanceof THREE.Face3?e[g][a].faces3[Vn](t):e[g][a].faces4[Vn](t),e[g][a][w]+=o;e[zt]=[];for(var h in e[g])e[g][h].id=Ho++,e[zt][Vn](e[g][h])}function ha(e,t){var n,r,i;if(!e[Tt]){e[Tt]=y,e[Pt]=new THREE.Matrix4,e[hn]=new THREE.Matrix3;if(e instanceof THREE.Mesh){r=e[W];if(r instanceof THREE.Geometry){r[g]===undefined&&ca(r);for(n in r[g])i=r[g][n],i[u]||(Tu(i),Du(i,e),r[l]=y,r[Et]=y,r[O]=y,r[vt]=y,r[X]=y,r[I]=y,r[h]=y)}else r instanceof THREE[kt]&&Iu(r)}else e instanceof THREE[Xs]?(r=e[W],r[u]||(xu(r),_u(r),r[l]=y,r[h]=y)):e instanceof THREE.Line?(r=e[W],r[u]||(Su(r),Mu(r,e),r[l]=y,r[h]=y)):e instanceof THREE[Q]&&(r=e[W],r[u]||(r instanceof THREE.Geometry?(Eu(r),Ou(r,e),r[l]=y,r[h]=y):r instanceof THREE[kt]&&Iu(r)))}if(!e[di]){if(e instanceof THREE.Mesh){r=e[W];if(r instanceof THREE[kt])pa(t[k],r,e);else for(n in r[g])i=r[g][n],pa(t[k],i,e)}else e instanceof THREE[Xs]||e instanceof THREE.Line||e instanceof THREE[Q]?(r=e[W],pa(t[k],r,e)):e instanceof THREE[ki]||e[gt]?da(t[L],e):e instanceof THREE.Sprite?t[Vr][Vn](e):e instanceof THREE.LensFlare&&t[Ei][Vn](e);e[di]=y}}function pa(e,t,n){e[Vn]({buffer:t,object:n,opaque:x,transparent:x})}function da(e,t){e[Vn]({object:t,opaque:x,transparent:x})}function va(e){var t=e[W],n,r,s;if(e instanceof THREE.Mesh)if(t instanceof THREE[kt])(t[l]||t[O]||t[vt]||t[X]||t[h]||t[I])&&Wu(t,au[$],!t.dynamic),t[l]=o,t[O]=o,t[vt]=o,t[X]=o,t[h]=o,t[I]=o;else{for(var u=0,f=t[zt][i];u<f;u++)n=t[zt][u],s=Pu(e,n),r=s[a]&&ma(s),(t[l]||t[Et]||t[O]||t[vt]||t[X]||t[h]||t[I]||r)&&zu(n,e,au[$],!t.dynamic,s);t[l]=o,t[Et]=o,t[O]=o,t[vt]=o,t[X]=o,t[h]=o,t[I]=o,s[a]&&ga(s)}else e instanceof THREE[Xs]?((t[l]||t[h])&&Uu(t,au[$]),t[l]=o,t[h]=o):e instanceof THREE.Line?(s=Pu(e,n),r=s[a]&&ma(s),(t[l]||t[h]||r)&&Ru(t,au[$]),t[l]=o,t[h]=o,s[a]&&ga(s)):e instanceof THREE[Q]&&(t instanceof THREE[kt]?((t[l]||t[h])&&Wu(t,au[$],!t.dynamic),t[l]=o,t[h]=o):(s=Pu(e,n),r=s[a]&&ma(s),(t[l]||t[h]||e[cn]||r)&&qu(t,au[$],e),t[l]=o,t[h]=o,s[a]&&ga(s)))}function ma(e){for(var t in e[a])if(e[a][t][D])return y;return o}function ga(e){for(var t in e[a])e[a][t][D]=o}function ya(e,t){e instanceof THREE.Mesh||e instanceof THREE[Q]||e instanceof THREE[Xs]||e instanceof THREE.Line?ba(t[k],e):e instanceof THREE.Sprite?wa(t[Vr],e):e instanceof THREE.LensFlare?wa(t[Ei],e):(e instanceof THREE[ki]||e[gt])&&ba(t[L],e),e[di]=o}function ba(e,t){for(var n=e[i]-1;n>=0;n--)e[n][ri]===t&&e.splice(n,1)}function wa(e,t){for(var n=e[i]-1;n>=0;n--)e[n]===t&&e.splice(n,1)}function Ea(e,t){e[Ct]=THREE.UniformsUtils.clone(t[Ct]),e[Pi]=t[Pi],e[Ur]=t[Ur]}function Sa(e,t,n,r,i){Bo=0,r[D]&&(r[Qt]&&ko[Yi](r),ko.initMaterial(r,t,n,i),r[D]=o);var s=r[Qt],u=s[Ct],a=r[Ct],f=Ca(r,s,u,e);r[Sr]&&La(i,u);if(f){Aa(n,a,r,s,t),Oa(r,a,t,e),qa(s,r[Hi]);if(r instanceof THREE[Rr]||r instanceof THREE[ut]||r[ir])if(u[br]!==x){var l=e[R][St]();Ta(u[br],l.x,l.y,l.z)}(r instanceof THREE[ut]||r instanceof THREE[at]||r instanceof THREE[Rr]||r[Sr])&&xa(u[fo],e[dn])}return Na(u[Zi],u[qs],i[Pt],i[hn],u[Ys],i[R]),s}function xa(e,t){e!==x&&au[K](e,o,t)}function Ta(e,t,n,r){au[Ds](e,t,n,r)}function Na(e,t,n,r,i,s){au[K](e,o,n[so]),t!==x&&au.uniformMatrix3fv(t,o,r[so]),i!==x&&au[K](i,o,s[so])}function Ca(e,t,n,r){var i=o;t!==Oo&&(au.useProgram(t),Oo=t,i=y),e.id!==_o&&(_o=e.id,i=y);if(i||r!==Po)ka(n[en],r[wt]),r!==Po&&(Po=r);return i}function ka(e,t){au[K](e,o,t)}function La(e,t){if(bu&&e[Dt]){if(t[lr]!==x){var n=Ia();au[Ws](t[lr],n),ko[ni](e[lr],n)}}else t[Ln]!==x&&au[K](t[Ln],o,e.boneMatrices)}function Aa(e,t,n,r,i){e&&n.fog&&Pa(t,e);if(n instanceof THREE[ut]||n instanceof THREE[at]||n.lights)ou&&(Wa(r,i),ou=o),ja(t,uu);(n instanceof THREE[Jn]||n instanceof THREE[at]||n instanceof THREE[ut])&&Ma(t,n)}function Oa(e,t,n,r){e instanceof THREE[vs]?_a(t,e):e instanceof THREE[Oi]?Da(t,e):e instanceof THREE[ut]?Ha(t,e):e instanceof THREE[at]?Ba(t,e):e instanceof THREE[$n]?(t.mNear[p]=r.near,t.mFar[p]=r.far,t[bn][p]=e[bn]):e instanceof THREE[os]&&(t[bn][p]=e[bn])}function Ma(e,t){e[bn][p]=t[bn],ko[q]?e.diffuse[p][it](t[Mt]):e.diffuse[p]=t[Mt],e.map[p]=t.map,e[wr][p]=t[wr],e[Nt][p]=t[Nt],t[yn]&&(e[yn][p]=t[yn],e.bumpScale[p]=t.bumpScale),t[At]&&(e[At][p]=t[At],e.normalScale[p].copy(t.normalScale));var n;t.map?n=t.map:t[Nt]?n=t[Nt]:t[At]?n=t[At]:t[yn]&&(n=t[yn]);if(n!==undefined){var r=n.offset,i=n.repeat;e.offsetRepeat[p].set(r.x,r.y,i.x,i.y)}e[ir][p]=t[ir],e.flipEnvMap[p]=t[ir]instanceof THREE[tt]?1:-1,ko[q]?e[fr][p]=t[fr]:e[fr][p]=t[fr],e[_s][p]=t[_s],e.combine[p]=t.combine,e.useRefract[p]=t[ir]&&t[ir].mapping instanceof THREE.CubeRefractionMapping}function _a(e,t){e.diffuse[p]=t[Mt],e[bn][p]=t[bn]}function Da(e,t){e.psColor[p]=t[Mt],e[bn][p]=t[bn],e[ci][p]=t[ci],e.scale[p]=go[V]/2,e.map[p]=t.map}function Pa(e,t){e.fogColor[p]=t[Mt],t instanceof THREE.Fog?(e.fogNear[p]=t.near,e.fogFar[p]=t.far):t instanceof THREE.FogExp2&&(e.fogDensity[p]=t.density)}function Ha(e,t){e.shininess[p]=t.shininess,ko[q]?(e[Jt][p][it](t[Jt]),e[Nn][p][it](t[Nn]),e[es][p][it](t[es])):(e[Jt][p]=t[Jt],e[Nn][p]=t[Nn],e[es][p]=t[es]),t[Gn]&&e[js][p].copy(t[js])}function Ba(e,t){ko[q]?(e[Jt][p][it](t[Jt]),e[Nn][p][it](t[Nn])):(e[Jt][p]=t[Jt],e[Nn][p]=t[Nn]),t[Gn]&&e[js][p].copy(t[js])}function ja(e,t){e.ambientLightColor[p]=t[Jt],e.directionalLightColor[p]=t[fn][ar],e.directionalLightDirection[p]=t[fn][nn],e.pointLightColor[p]=t[ls][ar],e.pointLightPosition[p]=t[ls][nn],e.pointLightDistance[p]=t[ls][Ai],e.spotLightColor[p]=t[Ts][ar],e.spotLightPosition[p]=t[Ts][nn],e.spotLightDistance[p]=t[Ts][Ai],e.spotLightDirection[p]=t[Ts].directions,e.spotLightAngle[p]=t[Ts].angles,e.spotLightExponent[p]=t[Ts].exponents,e.hemisphereLightSkyColor[p]=t.hemi.skyColors,e.hemisphereLightGroundColor[p]=t.hemi.groundColors,e.hemisphereLightPosition[p]=t.hemi[nn]}function Fa(e,t){if(e[Mi]){var n=0;for(var r=0,s=t[i];r<s;r++){var o=t[r];if(!o.castShadow)continue;if(o instanceof THREE[_i]||o instanceof THREE[vn]&&!o[uo])e.shadowMap[p][n]=o.shadowMap,e[po][p][n]=o[po],e[Mi][p][n]=o[Mi],e[Gs][p][n]=o[Gs],e.shadowBias[p][n]=o.shadowBias,n++}}}function Ia(){var e=Bo;return e>=pu&&console.warn("Trying to use "+e+" texture units while this GPU supports only "+pu),Bo+=1,e}function qa(e,t){var n,r,s,u,a,f,l,c,h,d,v;for(h=0,d=t[i];h<d;h++){u=e[Ct][t[h][1]];if(!u)continue;n=t[h][0],s=n[zi],r=n[p];if(s==="i")au[Ws](u,r);else if(s==="f")au.uniform1f(u,r);else if(s==="v2")au.uniform2f(u,r.x,r.y);else if(s==="v3")au[Ds](u,r.x,r.y,r.z);else if(s==="v4")au.uniform4f(u,r.x,r.y,r.z,r.w);else if(s==="c")au[Ds](u,r.r,r.g,r.b);else if(s==="iv1")au.uniform1iv(u,r);else if(s==="iv")au.uniform3iv(u,r);else if(s==="fv1")au.uniform1fv(u,r);else if(s==="fv")au.uniform3fv(u,r);else if(s==="v2v"){n[j]===undefined&&(n[j]=new Float32Array(2*r[i]));for(l=0,c=r[i];l<c;l++)v=l*2,n[j][v]=r[l].x,n[j][v+1]=r[l].y;au.uniform2fv(u,n[j])}else if(s==="v3v"){n[j]===undefined&&(n[j]=new Float32Array(3*r[i]));for(l=0,c=r[i];l<c;l++)v=l*3,n[j][v]=r[l].x,n[j][v+1]=r[l].y,n[j][v+2]=r[l].z;au.uniform3fv(u,n[j])}else if(s==="v4v"){n[j]===undefined&&(n[j]=new Float32Array(4*r[i]));for(l=0,c=r[i];l<c;l++)v=l*4,n[j][v]=r[l].x,n[j][v+1]=r[l].y,n[j][v+2]=r[l].z,n[j][v+3]=r[l].w;au.uniform4fv(u,n[j])}else if(s==="m4")n[j]===undefined&&(n[j]=new Float32Array(16)),r[Wr](n[j]),au[K](u,o,n[j]);else if(s==="m4v"){n[j]===undefined&&(n[j]=new Float32Array(16*r[i]));for(l=0,c=r[i];l<c;l++)r[l].flattenToArrayOffset(n[j],l*16);au[K](u,o,n[j])}else if(s==="t"){a=r,f=Ia(),au[Ws](u,f);if(!a)continue;a[ii]instanceof Array&&a[ii][i]===6?rf(a,f):a instanceof THREE[tt]?sf(a,f):ko[ni](a,f)}else if(s==="tv"){n[j]===undefined&&(n[j]=[]);for(l=0,c=n[p][i];l<c;l++)n[j][l]=Ia();au.uniform1iv(u,n[j]);for(l=0,c=n[p][i];l<c;l++){a=n[p][l],f=n[j][l];if(!a)continue;ko[ni](a,f)}}}}function Ra(e,t){e[Pt].multiply(t[Vt],e[R]),e[hn].getInverse(e[Pt]),e[hn].transpose()}function Ua(e,t,n,r){e[t]=n.r*n.r*r,e[t+1]=n.g*n.g*r,e[t+2]=n.b*n.b*r}function za(e,t,n,r){e[t]=n.r*r,e[t+1]=n.g*r,e[t+2]=n.b*r}function Wa(e,t){var n,r,s,o,u=0,a=0,f=0,l,c,h,p,d,v,m,g=uu,y=g[fn][ar],b=g[fn][nn],w=g[ls][ar],E=g[ls][nn],S=g[ls][Ai],x=g[Ts][ar],T=g[Ts][nn],N=g[Ts][Ai],C=g[Ts].directions,k=g[Ts].angles,L=g[Ts].exponents,A=g.hemi.skyColors,O=g.hemi.groundColors,M=g.hemi[nn],_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0;for(n=0,r=t[i];n<r;n++){s=t[n];if(s.onlyShadow||!s[bi])continue;l=s[Mt],p=s.intensity,m=s.distance,s instanceof THREE.AmbientLight?ko[q]?(u+=l.r*l.r,a+=l.g*l.g,f+=l.b*l.b):(u+=l.r,a+=l.g,f+=l.b):s instanceof THREE[vn]?(B=_*3,ko[q]?Ua(y,B,l,p*p):za(y,B,l,p),su.copy(s[R][St]()),su.subSelf(s.target[R][St]()),su.normalize(),b[B]=su.x,b[B+1]=su.y,b[B+2]=su.z,_+=1):s instanceof THREE.PointLight?(j=D*3,ko[q]?Ua(w,j,l,p*p):za(w,j,l,p),v=s[R][St](),E[j]=v.x,E[j+1]=v.y,E[j+2]=v.z,S[D]=m,D+=1):s instanceof THREE[_i]?(F=P*3,ko[q]?Ua(x,F,l,p*p):za(x,F,l,p),v=s[R][St](),T[F]=v.x,T[F+1]=v.y,T[F+2]=v.z,N[P]=m,su.copy(v),su.subSelf(s.target[R][St]()),su.normalize(),C[F]=su.x,C[F+1]=su.y,C[F+2]=su.z,k[P]=Math.cos(s.angle),L[P]=s.exponent,P+=1):s instanceof THREE[Js]&&(c=s[Mt],h=s.groundColor,I=H*3,ko[q]?(d=p*p,Ua(A,I,c,d),Ua(O,I,h,d)):(za(A,I,c,p),za(O,I,h,p)),v=s[R][St](),M[I]=v.x,M[I+1]=v.y,M[I+2]=v.z,H+=1)}for(n=_*3,r=y[i];n<r;n++)y[n]=0;for(n=D*3,r=w[i];n<r;n++)w[n]=0;for(n=P*3,r=x[i];n<r;n++)x[n]=0;for(n=H*3,r=A[i];n<r;n++)A[n]=0;for(n=H*3,r=O[i];n<r;n++)O[n]=0;g[fn][i]=_,g[ls][i]=D,g[Ts][i]=P,g.hemi[i]=H,g[Jt][0]=u,g[Jt][1]=a,g[Jt][2]=f}function Xa(e){e!==Jo&&(au.lineWidth(e),Jo=e)}function Va(e,t,n){Xo!==e&&(e?au[Bt](au[$i]):au[pi](au[$i]),Xo=e),e&&(Vo!==t||$o!==n)&&(au[In](t,n),Vo=t,$o=n)}function $a(e,t,n,r,s,o){var u,f,l,c,h=[];e?h[Vn](e):(h[Vn](t),h[Vn](n));for(u in o)h[Vn](u),h[Vn](o[u]);c=h.join();for(u=0,f=Lo[i];u<f;u++){var p=Lo[u];if(p.code===c)return p[Vs]++,p[Qt]}l=au.createProgram();var d=[Ns+yo+co,yu?"#define VERTEX_TEXTURES":"",ko[q]?$r:"",ko[wi]?jr:"",ko[Zt]?xn:"",cr+o.maxDirLights,Qn+o[Qs],nr+o[oo],ur+o[mo],Br+o.maxShadows,"#define MAX_BONES "+o.maxBones,o.map?Li:"",o[ir]?ei:"",o[wr]?qr:"",o[yn]?Kr:"",o[At]?Hr:"",o[Nt]?mr:"",o[ft]?vi:"",o[Sr]?"#define USE_SKINNING":"",o[Dt]?"#define BONE_TEXTURE":"",o[dr]?"#define N_BONE_PIXEL_X "+o[dr].toFixed(1):"",o[Kn]?"#define N_BONE_PIXEL_Y "+o[Kn].toFixed(1):"",o[En]?"#define USE_MORPHTARGETS":"",o[F]?"#define USE_MORPHNORMALS":"",o[lo]?yr:"",o[Gn]?Gr:"",o.doubleSided?Fr:"",o.flipSided?ti:"",o[Kt]?Mr:"",o[Tn]?xr:"",o[mn]?pr:"",o[$t]?Zn:"",o[$s]?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;",rr,"uniform mat3 normalMatrix;",Pn,"attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","attribute vec3 color;",Zr,"#ifdef USE_MORPHTARGETS","attribute vec3 morphTarget0;","attribute vec3 morphTarget1;","attribute vec3 morphTarget2;","attribute vec3 morphTarget3;","#ifdef USE_MORPHNORMALS","attribute vec3 morphNormal0;","attribute vec3 morphNormal1;","attribute vec3 morphNormal2;","attribute vec3 morphNormal3;","#else","attribute vec3 morphTarget4;","attribute vec3 morphTarget5;","attribute vec3 morphTarget6;","attribute vec3 morphTarget7;",Zr,Zr,"#ifdef USE_SKINNING","attribute vec4 skinIndex;","attribute vec4 skinWeight;",Zr,""].join("\n"),v=[Ns+yo+co,o[yn]||o[At]?"#extension GL_OES_standard_derivatives : enable":"",cr+o.maxDirLights,Qn+o[Qs],nr+o[oo],ur+o[mo],Br+o.maxShadows,o[Rs]?"#define ALPHATEST "+o[Rs]:"",ko[q]?$r:"",ko[wi]?jr:"",ko[Zt]?xn:"",o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fog instanceof THREE.FogExp2?"#define FOG_EXP2":"",o.map?Li:"",o[ir]?ei:"",o[wr]?qr:"",o[yn]?Kr:"",o[At]?Hr:"",o[Nt]?mr:"",o[ft]?vi:"",o.metal?"#define METAL":"",o[lo]?yr:"",o[Gn]?Gr:"",o.doubleSided?Fr:"",o.flipSided?ti:"",o[Kt]?Mr:"",o[Tn]?xr:"",o[mn]?pr:"",o[$t]?Zn:"",rr,Pn,""].join("\n"),m=Ga(Ks,v+t),g=Ga("vertex",d+n);au.attachShader(l,g),au.attachShader(l,m),au.linkProgram(l),au[Vi](l,au.LINK_STATUS)||console.error("Could not initialise shader\nVALIDATE_STATUS: "+au[Vi](l,au.VALIDATE_STATUS)+", gl error ["+au.getError()+"]"),au.deleteShader(m),au.deleteShader(g),l[Ct]={},l[a]={};var y,b,w,E;y=[fo,Zi,en,qs,Ys,br,Z],o[Dt]?y[Vn](lr):y[Vn](Ln);for(b in r)y[Vn](b);Ja(l,y),y=[G,Ft,"uv","uv2",gn,Mt,sr,Hn];for(E=0;E<o[sn];E++)y[Vn](qt+E);for(E=0;E<o[on];E++)y[Vn](Rt+E);for(w in s)y[Vn](w);return Ka(l,y),l.id=Ao++,Lo[Vn]({program:l,code:c,usedTimes:1}),ko[Ot][An].programs=Lo[i],l}function Ja(e,t){var n,r,s;for(n=0,r=t[i];n<r;n++)s=t[n],e[Ct][s]=au.getUniformLocation(e,s)}function Ka(e,t){var n,r,s;for(n=0,r=t[i];n<r;n++)s=t[n],e[a][s]=au.getAttribLocation(e,s)}function Qa(e){var t=e.split("\n");for(var n=0,r=t[i];n<r;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Ga(e,t){var n;return e===Ks?n=au.createShader(au.FRAGMENT_SHADER):e==="vertex"&&(n=au.createShader(au.VERTEX_SHADER)),au.shaderSource(n,t),au.compileShader(n),au.getShaderParameter(n,au.COMPILE_STATUS)?n:(console.error(au.getShaderInfoLog(n)),console.error(Qa(t)),x)}function Ya(e){return(e&e-1)===0}function Za(e,t,n){n?(au[st](e,au[to],lf(t.wrapS)),au[st](e,au[eo],lf(t.wrapT)),au[st](e,au[as],lf(t.magFilter)),au[st](e,au[us],lf(t[Ci]))):(au[st](e,au[to],au[fi]),au[st](e,au[eo],au[fi]),au[st](e,au[as],ff(t.magFilter)),au[st](e,au[us],ff(t[Ci]))),cu&&t[zi]!==THREE.FloatType&&(t[hs]>1||t[Bs])&&(au.texParameterf(e,cu.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t[hs],gu)),t[Bs]=t[hs])}function ef(e,t){e[Tt]||(e[Tt]=y,e[C]=au[si](),ko[Ot][An].textures++),au[ln](au[ai]+t),au[H](au[_],e[C]),au[Ri](au[Ji],e.flipY),au[Ri](au.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha);var n=e[ii],r=Ya(n[yt])&&Ya(n[V]),s=lf(e.format),u=lf(e[zi]);Za(au[_],e,r);if(e instanceof THREE[cs]){var a,f=e.mipmaps;for(var l=0,c=f[i];l<c;l++)a=f[l],au[Ii](au[_],l,s,a[yt],a[V],0,a.data)}else e instanceof THREE.DataTexture?au[tr](au[_],0,s,n[yt],n[V],0,s,u,n.data):au[tr](au[_],0,s,s,u,e[ii]);e[Dr]&&r&&au[Lt](au[_]),e[D]=o}function tf(e,t){au[ln](au[ai]+t),au[H](au[_],e)}function nf(e,t){if(e[yt]<=t&&e[V]<=t)return e;var n=Math.max(e[yt],e[V]),r=Math.floor(e[yt]*t/n),i=Math.floor(e[V]*t/n),s=document[xs](li);s[yt]=r,s[V]=i;var o=s[Ti]("2d");return o.drawImage(e,0,0,e[yt],e[V],0,0,r,i),s}function rf(e,t){if(e[ii][i]===6)if(e[D]){e[ii][Ut]||(e[ii][Ut]=au[si]()),au[ln](au[ai]+t),au[H](au[E],e[ii][Ut]),au[Ri](au[Ji],e.flipY);var n=e instanceof THREE[cs],r=[];for(var s=0;s<6;s++)ko[qi]&&!n?r[s]=nf(e[ii][s],mu):r[s]=e[ii][s];var u=r[0],a=Ya(u[yt])&&Ya(u[V]),f=lf(e.format),l=lf(e[zi]);Za(au[E],e,a);for(var s=0;s<6;s++)if(n){var c,h=r[s].mipmaps;for(var p=0,d=h[i];p<d;p++)c=h[p],au[Ii](au[rt]+s,p,f,c[yt],c[V],0,c.data)}else au[tr](au[rt]+s,0,f,f,l,r[s]);e[Dr]&&a&&au[Lt](au[E]),e[D]=o,e.onUpdate&&e.onUpdate()}else au[ln](au[ai]+t),au[H](au[E],e[ii][Ut])}function sf(e,t){au[ln](au[ai]+t),au[H](au[E],e[C])}function of(e,t,n){au[Or](au[an],e),au.framebufferTexture2D(au[an],au.COLOR_ATTACHMENT0,n,t[C],0)}function uf(e,t){au[Ms](au[_t],e),t[Nr]&&!t[Bn]?(au[On](au[_t],au.DEPTH_COMPONENT16,t[yt],t[V]),au[gi](au[an],au.DEPTH_ATTACHMENT,au[_t],e)):t[Nr]&&t[Bn]?(au[On](au[_t],au.DEPTH_STENCIL,t[yt],t[V]),au[gi](au[an],au.DEPTH_STENCIL_ATTACHMENT,au[_t],e)):au[On](au[_t],au.RGBA4,t[yt],t[V])}function af(e){e instanceof THREE[tt]?(au[H](au[E],e[C]),au[Lt](au[E]),au[H](au[E],x)):(au[H](au[_],e[C]),au[Lt](au[_]),au[H](au[_],x))}function ff(e){return e===THREE[hi]||e===THREE[Ir]||e===THREE[zr]?au.NEAREST:au.LINEAR}function lf(e){if(e===THREE.RepeatWrapping)return au.REPEAT;if(e===THREE.ClampToEdgeWrapping)return au[fi];if(e===THREE.MirroredRepeatWrapping)return au.MIRRORED_REPEAT;if(e===THREE[hi])return au.NEAREST;if(e===THREE[Ir])return au.NEAREST_MIPMAP_NEAREST;if(e===THREE[zr])return au.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return au.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return au.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return au.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return au.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return au.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return au.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return au.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return au.BYTE;if(e===THREE.ShortType)return au.SHORT;if(e===THREE.UnsignedShortType)return au[Jr];if(e===THREE.IntType)return au.INT;if(e===THREE.UnsignedIntType)return au.UNSIGNED_INT;if(e===THREE.FloatType)return au[xt];if(e===THREE.AlphaFormat)return au.ALPHA;if(e===THREE.RGBFormat)return au.RGB;if(e===THREE.RGBAFormat)return au.RGBA;if(e===THREE.LuminanceFormat)return au.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return au.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return au[qn];if(e===THREE.SubtractEquation)return au.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return au.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return au.ZERO;if(e===THREE.OneFactor)return au.ONE;if(e===THREE.SrcColorFactor)return au.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return au[Xi];if(e===THREE.SrcAlphaFactor)return au[Bi];if(e===THREE.OneMinusSrcAlphaFactor)return au[It];if(e===THREE.DstAlphaFactor)return au.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return au.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return au.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return au.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return au.SRC_ALPHA_SATURATE;if(hu!==undefined){if(e===THREE.RGB_S3TC_DXT1_Format)return hu.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return hu.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return hu.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return hu.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}function cf(e){if(bu&&e&&e[Dt])return 1024;var t=au[pt](au.MAX_VERTEX_UNIFORM_VECTORS),n=Math.floor((t-20)/4),r=n;return e!==undefined&&e instanceof THREE.SkinnedMesh&&(r=Math.min(e.bones[i],r),r<e.bones[i]&&console.warn("WebGLRenderer: too many bones - "+e.bones[i]+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function hf(e){var t,n,r,s,o,u,a,f,l,c,h;s=o=u=a=f=l=c=h=0;for(t=0,n=e[i];t<n;t++){r=e[t];if(r.onlyShadow)continue;r instanceof THREE[vn]&&s++,r instanceof THREE.PointLight&&o++,r instanceof THREE[_i]&&u++,r instanceof THREE[Js]&&a++}return o+u+s+a<=Co?(f=s,l=o,c=u,h=a):(f=Math.ceil(Co*s/(o+s)),l=Co-f,c=l,h=f),{directional:f,point:l,spot:c,hemi:h}}function pf(e){var t,n,r,s=0;for(t=0,n=e[i];t<n;t++){r=e[t];if(!r.castShadow)continue;r instanceof THREE[_i]&&s++,r instanceof THREE[vn]&&!r[uo]&&s++}return s}function df(){try{if(!(au=go[Ti]("experimental-webgl",{alpha:bo,premultipliedAlpha:wo,antialias:Eo,stencil:So,preserveDrawingBuffer:xo})))throw"Error creating WebGL context."}catch(e){console.error(e)}fu=au[ht]("OES_texture_float"),lu=au[ht]("OES_standard_derivatives"),cu=au[ht]("EXT_texture_filter_anisotropic")||au[ht]("MOZ_EXT_texture_filter_anisotropic")||au[ht]("WEBKIT_EXT_texture_filter_anisotropic"),hu=au[ht]("WEBGL_compressed_texture_s3tc")||au[ht]("MOZ_WEBGL_compressed_texture_s3tc")||au[ht]("WEBKIT_WEBGL_compressed_texture_s3tc"),fu||console.log("THREE.WebGLRenderer: Float textures not supported."),lu||console.log("THREE.WebGLRenderer: Standard derivatives not supported."),cu||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported."),hu||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.")}function vf(){au[rn](0,0,0,1),au.clearDepth(1),au.clearStencil(0),au[Bt](au[ms]),au.depthFunc(au.LEQUAL),au[Pr](au.CCW),au[fs](au.BACK),au[Bt](au[Cr]),au[Bt](au[Is]),au[ot](au[qn]),au[kr](au[Bi],au[It]),au[rn](To.r,To.g,To.b,No)}var t="ARRAY_BUFFER",n="array",r="vertexAttribPointer",i="length",s="bindBuffer",o=!1,u="__webglVertexBuffer",a="attributes",f="enableVertexAttribArray",l="verticesNeedUpdate",c="__webglCustomAttributesList",h="colorsNeedUpdate",p="value",d="__webglColorBuffer",v="bufferData",m="createBuffer",g="geometryGroups",y=!0,b="deleteBuffer",w="vertices",E="TEXTURE_CUBE_MAP",S="__webglMorphTargetsBuffers",x=null,T="ELEMENT_ARRAY_BUFFER",N="__webglFramebuffer",C="__webglTexture",k="__webglObjects",L="__webglObjectsImmediate",A="__webglMorphNormalsBuffers",O="elementsNeedUpdate",M="numSupportedMorphTargets",_="TEXTURE_2D",D="needsUpdate",P="__webglRenderbuffer",H="bindTexture",B="__webglNormalBuffer",j="_array",F="morphNormals",I="tangentsNeedUpdate",q="gammaInput",R="matrixWorld",U="buffer",z="transparent",W="geometry",X="normalsNeedUpdate",V="height",$="DYNAMIC_DRAW",J="__vertexArray",K="uniformMatrix4fv",Q="ParticleSystem",G="position",Y="boundTo",Z="morphTargetInfluences",et="__webglMorphTargetInfluences",tt="WebGLRenderTargetCube",nt="__colorArray",rt="TEXTURE_CUBE_MAP_POSITIVE_X",it="copyGammaToLinear",st="texParameteri",ot="blendEquation",ut="MeshPhongMaterial",at="MeshLambertMaterial",ft="vertexColors",lt="__webglSkinIndicesBuffer",ct="__webglSkinWeightsBuffer",ht="getExtension",pt="getParameter",dt="numMorphNormals",vt="uvsNeedUpdate",mt="numMorphTargets",gt="immediateRenderCallback",yt="width",bt="render",wt="_projectionMatrixArray",Et="morphTargetsNeedUpdate",St="getPosition",xt="FLOAT",Tt="__webglInit",Nt="specularMap",Ct="uniforms",kt="BufferGeometry",Lt="generateMipmap",At="normalMap",Ot="info",Mt="color",_t="RENDERBUFFER",Dt="useVertexTexture",Pt="_modelViewMatrix",Ht="__webglTangentBuffer",Bt="enable",jt="geometries",Ft="normal",It="ONE_MINUS_SRC_ALPHA",qt="morphTarget",Rt="morphNormal",Ut="__webglTextureCube",zt="geometryGroupsList",Wt="belongsToAttribute",Xt="__webglInitialized",Vt="matrixWorldInverse",$t="shadowMapCascade",Jt="ambient",Kt="shadowMapEnabled",Qt="program",Gt="__webglFaceBuffer",Yt="numSupportedMorphNormals",Zt="physicallyBasedShading",en="projectionMatrix",tn="disableVertexAttribArray",nn="positions",rn="clearColor",sn="maxMorphTargets",on="maxMorphNormals",un="setDepthWrite",an="FRAMEBUFFER",fn="directional",ln="activeTexture",cn="sortParticles",hn="_normalMatrix",pn="__webglUV2Buffer",dn="_viewMatrixArray",vn="DirectionalLight",mn="shadowMapDebug",gn="tangent",yn="bumpMap",bn="opacity",wn="__webglUVBuffer",En="morphTargets",Sn="setDepthTest",xn="#define PHYSICALLY_BASED_SHADING",Tn="shadowMapSoft",Nn="emissive",Cn="__morphTargetsArrays",kn="__morphNormalsArrays",Ln="boneGlobalMatrices",An="memory",On="renderbufferStorage",Mn="renderPluginsPost",_n="setBlending",Dn="polygonOffsetFactor",Pn="uniform vec3 cameraPosition;",Hn="skinWeight",Bn="stencilBuffer",jn="faces",Fn="renderPluginsPre",In="polygonOffset",qn="FUNC_ADD",Rn="polygonOffsetUnits",Un="materialIndex",zn="vertexNormals",Wn="faceVertexUvs",Xn="itemSize",Vn="push",$n="MeshDepthMaterial",Jn="MeshBasicMaterial",Kn="boneTextureHeight",Qn="#define MAX_POINT_LIGHTS ",Gn="wrapAround",Yn="__webglLineBuffer",Zn="#define SHADOWMAP_CASCADE",er="__skinWeightArray",tr="texImage2D",nr="#define MAX_SPOT_LIGHTS ",rr="uniform mat4 viewMatrix;",ir="envMap",sr="skinIndex",or="opaque",ur="#define MAX_HEMI_LIGHTS ",ar="colors",fr="reflectivity",lr="boneTexture",cr="#define MAX_DIR_LIGHTS ",hr="__objectsRemoved",pr="#define SHADOWMAP_DEBUG",dr="boneTextureWidth",vr="setMaterialFaces",mr="#define USE_SPECULARMAP",gr="__skinIndexArray",yr="#define PHONG_PER_PIXEL",br="cameraPosition",wr="lightMap",Er="material",Sr="skinning",xr="#define SHADOWMAP_SOFT",Tr="shadowMapPlugin",Nr="depthBuffer",Cr="CULL_FACE",kr="blendFunc",Lr="setRenderTarget",Ar="__inittedArrays",Or="bindFramebuffer",Mr="#define USE_SHADOWMAP",_r="__webglUvBuffer",Dr="generateMipmaps",Pr="frontFace",Hr="#define USE_NORMALMAP",Br="#define MAX_SHADOWS ",jr="#define GAMMA_OUTPUT",Fr="#define DOUBLE_SIDED",Ir="NearestMipMapNearestFilter",qr="#define USE_LIGHTMAP",Rr="ShaderMaterial",Ur="fragmentShader",zr="NearestMipMapLinearFilter",Wr="flattenToArray",Xr="__objectsAdded",Vr="__webglSprites",$r="#define GAMMA_INPUT",Jr="UNSIGNED_SHORT",Kr="#define USE_BUMPMAP",Qr="__tangentArray",Gr="#define WRAP_AROUND",Yr="preserveDrawingBuffer",Zr="#endif",ei="#define USE_ENVMAP",ti="#define FLIP_SIDED",ni="setTexture",ri="object",ii="image",si="createTexture",oi="__normalArray",ui="SmoothShading",ai="TEXTURE0",fi="CLAMP_TO_EDGE",li="canvas",ci="size",hi="NearestFilter",pi="disable",di="__webglActive",vi="#define USE_COLOR",mi="sortObjects",gi="framebufferRenderbuffer",yi="addPostPlugin",bi="visible",wi="gammaOutput",Ei="__webglFlares",Si="morphTargetForcedOrder",xi="premultipliedAlpha",Ti="getContext",Ni="renderImmediateObject",Ci="minFilter",ki="ImmediateRenderObject",Li="#define USE_MAP",Ai="distances",Oi="ParticleBasicMaterial",Mi="shadowMatrix",_i="SpotLight",Di="renderBufferImmediate",Pi="vertexShader",Hi="uniformsList",Bi="SRC_ALPHA",ji="__webglParticleCount",Fi="autoUpdateObjects",Ii="compressedTexImage2D",qi="autoScaleCubemaps",Ri="pixelStorei",Ui="createUniqueBuffers",zi="type",Wi="__faceArray",Xi="ONE_MINUS_SRC_COLOR",Vi="getProgramParameter",$i="POLYGON_OFFSET_FILL",Ji="UNPACK_FLIP_Y_WEBGL",Ki="autoClearStencil",Qi="__lineArray",Gi="createRenderbuffer",Yi="deallocateMaterial",Zi="modelViewMatrix",es="specular",ts="deleteRenderbuffer",ns="autoUpdateScene",rs="faceVertices",is="index",ss="renderBufferDirect",os="MeshNormalMaterial",us="TEXTURE_MIN_FILTER",as="TEXTURE_MAG_FILTER",fs="cullFace",ls="point",cs="CompressedTexture",hs="anisotropy",ps="deleteFramebuffer",ds="autoClearColor",vs="LineBasicMaterial",ms="DEPTH_TEST",gs="updateMatrixWorld",ys="depthWrite",bs="drawArrays",ws="createFramebuffer",Es="autoClearDepth",Ss="__uv2Array",xs="createElement",Ts="spot",Ns="precision ",Cs="MeshFaceMaterial",ks="initWebGLObjects",Ls="__webglLineCount",As="__webglFaceCount",Os="overrideMaterial",Ms="bindRenderbuffer",_s="refractionRatio",Ds="uniform3f",Ps="depthTest",Hs="__uvArray",Bs="__oldAnisotropy",js="wrapRGB",Fs="TRIANGLES",Is="BLEND",qs="normalMatrix",Rs="alphaTest",Us="morphTargetBase",zs="multiplyVector3",Ws="uniform1i",Xs="Ribbon",Vs="usedTimes",$s="sizeAttenuation",Js="HemisphereLight",Ks="fragment",Qs="maxPointLights",Gs="shadowDarkness",Ys="modelMatrix",Zs="vertexTangents",eo="TEXTURE_WRAP_T",to="TEXTURE_WRAP_S",no="CustomBlending",ro="count",io="deleteTexture",so="elements",oo="maxSpotLights",uo="shadowCascade",ao="blendDst",fo="viewMatrix",lo="perPixel",co=" float;",ho="blendSrc",po="shadowMapSize",vo="blending",mo="maxHemiLights";console.log("THREE.WebGLRenderer",THREE.REVISION),e=e||{};var go=e[li]!==undefined?e[li]:document[xs](li),yo=e.precision!==undefined?e.precision:"highp",bo=e.alpha!==undefined?e.alpha:y,wo=e[xi]!==undefined?e[xi]:y,Eo=e.antialias!==undefined?e.antialias:o,So=e.stencil!==undefined?e.stencil:y,xo=e[Yr]!==undefined?e[Yr]:o,To=e[rn]!==undefined?new THREE.Color(e[rn]):new THREE.Color(0),No=e.clearAlpha!==undefined?e.clearAlpha:0,Co=e.maxLights!==undefined?e.maxLights:4;this.domElement=go,this.context=x,this.autoClear=y,this[ds]=y,this[Es]=y,this[Ki]=y,this[mi]=y,this[Fi]=y,this[ns]=y,this[q]=o,this[wi]=o,this[Zt]=o,this[Kt]=o,this.shadowMapAutoUpdate=y,this[Tn]=y,this.shadowMapCullFrontFaces=y,this[mn]=o,this[$t]=o,this[sn]=8,this[on]=4,this[qi]=y,this[Fn]=[],this[Mn]=[],this[Ot]={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var ko=this,Lo=[],Ao=0,Oo=x,Mo=x,_o=-1,Do=x,Po=x,Ho=0,Bo=0,jo=-1,Fo=-1,Io=-1,qo=-1,Ro=-1,Uo=-1,zo=-1,Wo=-1,Xo=x,Vo=x,$o=x,Jo=x,Ko=0,Qo=0,Go=0,Yo=0,Zo=0,eu=0,tu=new THREE.Frustum,nu=new THREE.Matrix4,ru=new THREE.Matrix4,iu=new THREE.Vector4,su=new THREE.Vector3,ou=y,uu={ambient:[0,0,0],directional:{length:0,colors:new Array,positions:new Array},point:{length:0,colors:new Array,positions:new Array,distances:new Array},spot:{length:0,colors:new Array,positions:new Array,distances:new Array,directions:new Array,angles:new Array,exponents:new Array},hemi:{length:0,skyColors:new Array,groundColors:new Array,positions:new Array}},au,fu,lu,cu,hu;df(),vf(),this.context=au;var pu=au[pt](au.MAX_TEXTURE_IMAGE_UNITS),du=au[pt](au.MAX_VERTEX_TEXTURE_IMAGE_UNITS),vu=au[pt](au.MAX_TEXTURE_SIZE),mu=au[pt](au.MAX_CUBE_MAP_TEXTURE_SIZE),gu=cu?au[pt](cu.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,yu=du>0,bu=yu&&fu,wu=hu?au[pt](au.COMPRESSED_TEXTURE_FORMATS):[];this[Ti]=function(){return au},this.supportsVertexTextures=function(){return yu},this.getMaxAnisotropy=function(){return gu},this.setSize=function(e,t){go[yt]=e,go[V]=t,this.setViewport(0,0,go[yt],go[V])},this.setViewport=function(e,t,n,r){Ko=e!==undefined?e:0,Qo=t!==undefined?t:0,Go=n!==undefined?n:go[yt],Yo=r!==undefined?r:go[V],au.viewport(Ko,Qo,Go,Yo)},this.setScissor=function(e,t,n,r){au.scissor(e,t,n,r)},this.enableScissorTest=function(e){e?au[Bt](au.SCISSOR_TEST):au[pi](au.SCISSOR_TEST)},this.setClearColorHex=function(e,t){To.setHex(e),No=t,au[rn](To.r,To.g,To.b,No)},this.setClearColor=function(e,t){To.copy(e),No=t,au[rn](To.r,To.g,To.b,No)},this.getClearColor=function(){return To},this.getClearAlpha=function(){return No},this.clear=function(e,t,n){var r=0;if(e===undefined||e)r|=au.COLOR_BUFFER_BIT;if(t===undefined||t)r|=au.DEPTH_BUFFER_BIT;if(n===undefined||n)r|=au.STENCIL_BUFFER_BIT;au.clear(r)},this.clearTarget=function(e,t,n,r){this[Lr](e),this.clear(t,n,r)},this[yi]=function(e){e.init(this),this[Mn][Vn](e)},this.addPrePlugin=function(e){e.init(this),this[Fn][Vn](e)},this.deallocateObject=function(e){if(!e[Tt])return;e[Tt]=o,delete e[Pt],delete e[hn],delete e._normalMatrixArray,delete e._modelViewMatrixArray,delete e._modelMatrixArray;if(e instanceof THREE.Mesh)for(var t in e[W][g])Lu(e[W][g][t]);else e instanceof THREE[Xs]?ku(e[W]):e instanceof THREE.Line?Cu(e[W]):e instanceof THREE[Q]&&Nu(e[W])},this.deallocateTexture=function(e){if(!e[Tt])return;e[Tt]=o,au[io](e[C]),ko[Ot][An].textures--},this.deallocateRenderTarget=function(e){if(!e||!e[C])return;au[io](e[C]);if(e instanceof THREE[tt])for(var t=0;t<6;t++)au[ps](e[N][t]),au[ts](e[P][t]);else au[ps](e[N]),au[ts](e[P])},this[Yi]=function(e){var t=e[Qt];if(!t)return;e[Qt]=undefined;var n,r,s,u=o;for(n=0,r=Lo[i];n<r;n++){s=Lo[n];if(s[Qt]===t){s[Vs]--,s[Vs]===0&&(u=y);break}}if(u){var a=[];for(n=0,r=Lo[i];n<r;n++)s=Lo[n],s[Qt]!==t&&a[Vn](s);Lo=a,au.deleteProgram(t),ko[Ot][An].programs--}},this.updateShadowMap=function(e,t){Oo=x,Io=-1,zo=-1,Wo=-1,Do=-1,_o=-1,ou=y,jo=-1,Fo=-1,this[Tr].update(e,t)},this[Di]=function(e,n,i){e.hasPositions&&!e[u]&&(e[u]=au[m]()),e.hasNormals&&!e[B]&&(e[B]=au[m]()),e.hasUvs&&!e[_r]&&(e[_r]=au[m]()),e.hasColors&&!e[d]&&(e[d]=au[m]()),e.hasPositions&&(au[s](au[t],e[u]),au[v](au[t],e.positionArray,au[$]),au[f](n[a][G]),au[r](n[a][G],3,au[xt],o,0,0));if(e.hasNormals){au[s](au[t],e[B]);if(i.shading===THREE.FlatShading){var l,c,h,p,g,y,b,w,E,S,x,T,N,C,k=e[ro]*3;for(C=0;C<k;C+=9)N=e.normalArray,p=N[C],b=N[C+1],S=N[C+2],g=N[C+3],w=N[C+4],x=N[C+5],y=N[C+6],E=N[C+7],T=N[C+8],l=(p+g+y)/3,c=(b+w+E)/3,h=(S+x+T)/3,N[C]=l,N[C+1]=c,N[C+2]=h,N[C+3]=l,N[C+4]=c,N[C+5]=h,N[C+6]=l,N[C+7]=c,N[C+8]=h}au[v](au[t],e.normalArray,au[$]),au[f](n[a][Ft]),au[r](n[a][Ft],3,au[xt],o,0,0)}e.hasUvs&&i.map&&(au[s](au[t],e[_r]),au[v](au[t],e.uvArray,au[$]),au[f](n[a].uv),au[r](n[a].uv,2,au[xt],o,0,0)),e.hasColors&&i[ft]!==THREE.NoColors&&(au[s](au[t],e[d]),au[v](au[t],e.colorArray,au[$]),au[f](n[a][Mt]),au[r](n[a][Mt],3,au[xt],o,0,0)),au[bs](au[Fs],0,e[ro]),e[ro]=0},this[ss]=function(e,n,u,l,c,h){if(l[bi]===o)return;var p,d,v,m,g,b;p=Sa(e,n,u,l,h),d=p[a];var E=o,S=l.wireframe?1:0,x=c.id*16777215+p.id*2+S;x!==Do&&(Do=x,E=y);if(h instanceof THREE.Mesh){var N=c.offsets;N[i]>1&&(E=y);for(var C=0,k=N[i];C<k;++C){var L=N[C][is];if(E){var A=c[a][G],O=A[Xn];au[s](au[t],A[U]),au[r](d[G],O,au[xt],o,0,L*O*4);var M=c[a][Ft];if(d[Ft]>=0&&M){var _=M[Xn];au[s](au[t],M[U]),au[r](d[Ft],_,au[xt],o,0,L*_*4)}var D=c[a].uv;if(d.uv>=0&&D)if(D[U]){var P=D[Xn];au[s](au[t],D[U]),au[r](d.uv,P,au[xt],o,0,L*P*4),au[f](d.uv)}else au[tn](d.uv);var H=c[a][Mt];if(d[Mt]>=0&&H){var B=H[Xn];au[s](au[t],H[U]),au[r](d[Mt],B,au[xt],o,0,L*B*4)}var j=c[a][gn];if(d[gn]>=0&&j){var F=j[Xn];au[s](au[t],j[U]),au[r](d[gn],F,au[xt],o,0,L*F*4)}var I=c[a][is];au[s](au[T],I[U])}au.drawElements(au[Fs],N[C][ro],au[Jr],N[C].start*2),ko[Ot][bt].calls++,ko[Ot][bt][w]+=N[C][ro],ko[Ot][bt][jn]+=N[C][ro]/3}}else if(h instanceof THREE[Q]&&E){var A=c[a][G],O=A[Xn];au[s](au[t],A[U]),au[r](d[G],O,au[xt],o,0,0);var H=c[a][Mt];if(d[Mt]>=0&&H){var B=H[Xn];au[s](au[t],H[U]),au[r](d[Mt],B,au[xt],o,0,0)}au[bs](au.POINTS,0,A.numItems/3),ko[Ot][bt].calls++,ko[Ot][bt].points+=A.numItems/3}},this.renderBuffer=function(e,t,n,r,i,s){if(r[bi]===o)return;var f,l,h,p,v,m,g,y;f=Sa(e,t,n,r,s),l=f[a];var b=Ju(r.wireframe,i.id,f.id);$u(b,l,r,i[u],i[c],i[d],i[B],i[Ht],i[wn],i[pn],i[lt],i[ct]),s instanceof THREE.Mesh&&Xu(b,i[Gt],i[As]),s instanceof THREE[Q]&&Vu(i[ji])},this[bt]=function(e,t,n,r){if(t instanceof THREE.Camera===o){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}var s,u,a,f,l,c=e.__lights,h=e.fog;_o=-1,ou=y,this[ns]&&e[gs](
),t.parent===undefined&&t[gs](),t[dn]||(t[dn]=new Float32Array(16)),t[wt]||(t[wt]=new Float32Array(16)),t[Vt].getInverse(t[R]),t[Vt][Wr](t[dn]),t[en][Wr](t[wt]),nu.multiply(t[en],t[Vt]),tu.setFromMatrix(nu),this[Fi]&&this[ks](e),oa(this[Fn],e,t),ko[Ot][bt].calls=0,ko[Ot][bt][w]=0,ko[Ot][bt][jn]=0,ko[Ot][bt].points=0,this[Lr](n),(this.autoClear||r)&&this.clear(this[ds],this[Es],this[Ki]),l=e[k];for(s=0,u=l[i];s<u;s++)a=l[s],f=a[ri],a[bt]=o,f[bi]&&(!(f instanceof THREE.Mesh||f instanceof THREE[Q])||!f.frustumCulled||tu.contains(f))&&(Ra(f,t),la(a),a[bt]=y,this[mi]===y&&(f.renderDepth!==x?a.z=f.renderDepth:(iu.copy(f[R][St]()),nu[zs](iu),a.z=iu.z)));this[mi]&&l.sort(ia),l=e[L];for(s=0,u=l[i];s<u;s++)a=l[s],f=a[ri],f[bi]&&(Ra(f,t),fa(a));if(e[Os]){var p=e[Os];this[_n](p[vo],p[ot],p[ho],p[ao]),this[Sn](p[Ps]),this[un](p[ys]),Va(p[In],p[Dn],p[Rn]),ua(e[k],o,"",t,c,h,y,p),aa(e[L],"",t,c,h,o,p)}else this[_n](THREE.NormalBlending),ua(e[k],y,or,t,c,h,o),aa(e[L],or,t,c,h,o),ua(e[k],o,z,t,c,h,y),aa(e[L],z,t,c,h,y);oa(this[Mn],e,t),n&&n[Dr]&&n[Ci]!==THREE[hi]&&n[Ci]!==THREE.LinearFilter&&af(n),this[Sn](y),this[un](y)},this[Ni]=function(e,t,n,r,i){var s=Sa(e,t,n,r,i);Do=-1,ko[vr](r),i[gt]?i[gt](s,au,tu):i[bt](function(e){ko[Di](e,s,r)})},this[ks]=function(e){e[k]||(e[k]=[],e[L]=[],e[Vr]=[],e[Ei]=[]);while(e[Xr][i])ha(e[Xr][0],e),e[Xr].splice(0,1);while(e[hr][i])ya(e[hr][0],e),e[hr].splice(0,1);for(var t=0,n=e[k][i];t<n;t++)va(e[k][t][ri])},this.initMaterial=function(e,t,n,r){var i,s,o,u,l,c,h,p,d;e instanceof THREE[$n]?d="depth":e instanceof THREE[os]?d=Ft:e instanceof THREE[Jn]?d="basic":e instanceof THREE[at]?d="lambert":e instanceof THREE[ut]?d="phong":e instanceof THREE[vs]?d="basic":e instanceof THREE[Oi]&&(d="particle_basic"),d&&Ea(e,THREE.ShaderLib[d]),c=hf(t),p=pf(t),h=cf(r),l={map:!!e.map,envMap:!!e[ir],lightMap:!!e[wr],bumpMap:!!e[yn],normalMap:!!e[At],specularMap:!!e[Nt],vertexColors:e[ft],fog:n,useFog:e.fog,sizeAttenuation:e[$s],skinning:e[Sr],maxBones:h,useVertexTexture:bu&&r&&r[Dt],boneTextureWidth:r&&r[dr],boneTextureHeight:r&&r[Kn],morphTargets:e[En],morphNormals:e[F],maxMorphTargets:this[sn],maxMorphNormals:this[on],maxDirLights:c[fn],maxPointLights:c[ls],maxSpotLights:c[Ts],maxHemiLights:c.hemi,maxShadows:p,shadowMapEnabled:this[Kt]&&r.receiveShadow,shadowMapSoft:this[Tn],shadowMapDebug:this[mn],shadowMapCascade:this[$t],alphaTest:e[Rs],metal:e.metal,perPixel:e[lo],wrapAround:e[Gn],doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide},e[Qt]=$a(d,e[Ur],e[Pi],e[Ct],e[a],l);var v=e[Qt][a];v[G]>=0&&au[f](v[G]),v[Mt]>=0&&au[f](v[Mt]),v[Ft]>=0&&au[f](v[Ft]),v[gn]>=0&&au[f](v[gn]),e[Sr]&&v[sr]>=0&&v[Hn]>=0&&(au[f](v[sr]),au[f](v[Hn]));if(e[a])for(s in e[a])v[s]!==undefined&&v[s]>=0&&au[f](v[s]);if(e[En]){e[M]=0;var m,g=qt;for(u=0;u<this[sn];u++)m=g+u,v[m]>=0&&(au[f](v[m]),e[M]++)}if(e[F]){e[Yt]=0;var m,g=Rt;for(u=0;u<this[on];u++)m=g+u,v[m]>=0&&(au[f](v[m]),e[Yt]++)}e[Hi]=[];for(i in e[Ct])e[Hi][Vn]([e[Ct][i],i])},this.setFaceCulling=function(e,t){e?(!t||t==="ccw"?au[Pr](au.CCW):au[Pr](au.CW),e==="back"?au[fs](au.BACK):e==="front"?au[fs](au.FRONT):au[fs](au.FRONT_AND_BACK),au[Bt](au[Cr])):au[pi](au[Cr])},this[vr]=function(e){var t=e.side===THREE.DoubleSide,n=e.side===THREE.BackSide;jo!==t&&(t?au[pi](au[Cr]):au[Bt](au[Cr]),jo=t),Fo!==n&&(n?au[Pr](au.CW):au[Pr](au.CCW),Fo=n)},this[Sn]=function(e){zo!==e&&(e?au[Bt](au[ms]):au[pi](au[ms]),zo=e)},this[un]=function(e){Wo!==e&&(au.depthMask(e),Wo=e)},this[_n]=function(e,t,n,r){e!==Io&&(e===THREE.NoBlending?au[pi](au[Is]):e===THREE.AdditiveBlending?(au[Bt](au[Is]),au[ot](au[qn]),au[kr](au[Bi],au.ONE)):e===THREE.SubtractiveBlending?(au[Bt](au[Is]),au[ot](au[qn]),au[kr](au.ZERO,au[Xi])):e===THREE.MultiplyBlending?(au[Bt](au[Is]),au[ot](au[qn]),au[kr](au.ZERO,au.SRC_COLOR)):e===THREE[no]?au[Bt](au[Is]):(au[Bt](au[Is]),au.blendEquationSeparate(au[qn],au[qn]),au.blendFuncSeparate(au[Bi],au[It],au.ONE,au[It])),Io=e);if(e===THREE[no]){t!==qo&&(au[ot](lf(t)),qo=t);if(n!==Ro||r!==Uo)au[kr](lf(n),lf(r)),Ro=n,Uo=r}else qo=x,Ro=x,Uo=x},this[ni]=function(e,t){e[D]?ef(e,t):tf(e[C],t)},this[Lr]=function(e){var t=e instanceof THREE[tt];if(e&&!e[N]){e[Nr]===undefined&&(e[Nr]=y),e[Bn]===undefined&&(e[Bn]=y),e[C]=au[si]();var n=Ya(e[yt])&&Ya(e[V]),r=lf(e.format),i=lf(e[zi]);if(t){e[N]=[],e[P]=[],au[H](au[E],e[C]),Za(au[E],e,n);for(var s=0;s<6;s++)e[N][s]=au[ws](),e[P][s]=au[Gi](),au[tr](au[rt]+s,0,r,e[yt],e[V],0,r,i,x),of(e[N][s],e,au[rt]+s),uf(e[P][s],e);n&&au[Lt](au[E])}else e[N]=au[ws](),e[P]=au[Gi](),au[H](au[_],e[C]),Za(au[_],e,n),au[tr](au[_],0,r,e[yt],e[V],0,r,i,x),of(e[N],e,au[_]),uf(e[P],e),n&&au[Lt](au[_]);t?au[H](au[E],x):au[H](au[_],x),au[Ms](au[_t],x),au[Or](au[an],x)}var o,u,a,f,l;e?(t?o=e[N][e.activeCubeFace]:o=e[N],u=e[yt],a=e[V],f=0,l=0):(o=x,u=Go,a=Yo,f=Ko,l=Qo),o!==Mo&&(au[Or](au[an],o),au.viewport(f,l,u,a),Mo=o),Zo=u,eu=a},this[Tr]=new THREE.ShadowMapPlugin,this.addPrePlugin(this[Tr]),this[yi](new THREE.SpritePlugin),this[yi](new THREE.LensFlarePlugin)},function(){var e="ClampToEdgeWrapping",t="magFilter",n="minFilter",r="anisotropy",i="format",s="depthBuffer",o=!0,u="stencilBuffer";THREE.WebGLRenderTarget=function(a,f,l){this.width=a,this.height=f,l=l||{},this.wrapS=l.wrapS!==undefined?l.wrapS:THREE[e],this.wrapT=l.wrapT!==undefined?l.wrapT:THREE[e],this[t]=l[t]!==undefined?l[t]:THREE.LinearFilter,this[n]=l[n]!==undefined?l[n]:THREE.LinearMipMapLinearFilter,this[r]=l[r]!==undefined?l[r]:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this[i]=l[i]!==undefined?l[i]:THREE.RGBAFormat,this.type=l.type!==undefined?l.type:THREE.UnsignedByteType,this[s]=l[s]!==undefined?l[s]:o,this[u]=l[u]!==undefined?l[u]:o,this.generateMipmaps=o}}(),THREE.WebGLRenderTarget.prototype.clone=function(){var e="anisotropy",t="depthBuffer",n="stencilBuffer",r="generateMipmaps",i=new THREE.WebGLRenderTarget(this.width,this.height);return i.wrapS=this.wrapS,i.wrapT=this.wrapT,i.magFilter=this.magFilter,i[e]=this[e],i.minFilter=this.minFilter,i.offset.copy(this.offset),i.repeat.copy(this.repeat),i.format=this.format,i.type=this.type,i[t]=this[t],i[n]=this[n],i[r]=this[r],i},function(){var e="#endif",t="if ( fDepth < shadowCoord.z ) shadow += shadowDelta;",n="#ifdef DOUBLE_SIDED",r="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )",i="#ifdef WRAP_AROUND",s="vec3 lVector = lPosition.xyz - mvPosition.xyz;",o="float specularNormalization = ( shininess + 2.0001 ) / 8.0;",u="#else",a="lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );",f="lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );",l="#if MAX_POINT_LIGHTS > 0",c="#if MAX_SPOT_LIGHTS > 0",h="vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );",p="\n",d="vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );",v="lVector = normalize( lVector );",m="#ifdef USE_SKINNING",g="uniform float pointLightDistance[ MAX_POINT_LIGHTS ];",y="float lDistance = 1.0;",b="uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];",w="uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];",E="float dotProduct = dot( transformedNormal, lVector );",S="uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];",x="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )",T="#if MAX_HEMI_LIGHTS > 0",N="#if MAX_DIR_LIGHTS > 0",C="#ifdef PHYSICALLY_BASED_SHADING",k="join",L="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )",A="float dotProduct = dot( normal, lVector );",O="vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );",M="vec4 lPosition = viewMatrix * vec4( hemisphereLightPosition[ i ], 1.0 );",_="if ( pointLightDistance[ i ] > 0.0 )",D="if ( spotLightDistance[ i ] > 0.0 )",P="#ifdef PHONG_PER_PIXEL",H="uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];",B="#ifdef USE_LIGHTMAP",j="#ifdef USE_SHADOWMAP",F="uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];",I="uniform vec3 hemisphereLightPosition[ MAX_HEMI_LIGHTS ];",q="uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];",R="#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )",U="uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];",z="spotEffect = pow( spotEffect, spotLightExponent[ i ] );",W="uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];",X="uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];",V="uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];",$="uniform float spotLightAngle[ MAX_SPOT_LIGHTS ];",J="uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];",K="for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {",Q="vec3 lVector = lPosition.xyz + vViewPosition.xyz;",G="float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;",Y="vec3 dirVector = normalize( lDirection.xyz );",Z="#ifdef USE_COLOR",et="#ifdef SHADOWMAP_CASCADE",tt="}",nt="for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {",rt="#ifdef USE_MAP",it="#ifdef USE_MORPHTARGETS",st="for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {",ot="varying vec4 vPointLight[ MAX_POINT_LIGHTS ];",ut="for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {",at="varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];",ft="if ( spotEffect > spotLightAngle[ i ] ) {",lt="varying vec4 vShadowCoord[ MAX_SHADOWS ];",ct="for( int i = 0; i < MAX_SHADOWS; i ++ ) {",ht="#ifdef GAMMA_INPUT",pt="mat4 getBoneMatrix( const in float i ) {",dt="uniform vec3 ambientLightColor;",vt="uniform float refractionRatio;",mt="varying vec3 vWorldPosition;",gt="uniform bool useRefract;",yt="uniform sampler2D map;",bt="#ifdef USE_SPECULARMAP",wt="varying vec3 vReflect;",Et="#ifndef USE_MORPHNORMALS",St="uniform vec3 wrapRGB;",xt="#ifdef USE_NORMALMAP",Tt="#ifndef PHONG_PER_PIXEL",Nt="#ifdef USE_MORPHNORMALS",Ct="if ( useRefract ) {",kt="#ifdef SHADOWMAP_DEBUG",Lt="varying vec2 vUv2;",At="varying vec2 vUv;",Ot="#ifdef USE_ENVMAP",Mt="varying vec3 vColor;",_t="#ifdef GAMMA_OUTPUT",Dt="WebGLRenderTargetCube",Pt="#ifdef FOG_EXP2",Ht="#ifdef USE_FOG",Bt="WebGLRenderTarget",jt="return bone;",Ft="} else {";THREE[Dt]=function(e,t,n){THREE[Bt].call(this,e,t,n),this.activeCubeFace=0},THREE[Dt].prototype=Object.create(THREE[Bt].prototype),THREE.ShaderChunk={fog_pars_fragment:[Ht,"uniform vec3 fogColor;",Pt,"uniform float fogDensity;",u,"uniform float fogNear;","uniform float fogFar;",e,e][k](p),fog_fragment:[Ht,"float depth = gl_FragCoord.z / gl_FragCoord.w;",Pt,"const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );",u,"float fogFactor = smoothstep( fogNear, fogFar, depth );",e,"gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );",e][k](p),envmap_pars_fragment:[Ot,"uniform float reflectivity;","uniform samplerCube envMap;","uniform float flipEnvMap;","uniform int combine;",R,gt,vt,u,wt,e,e][k](p),envmap_fragment:[Ot,"vec3 reflectVec;",R,"vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );",Ct,"reflectVec = refract( cameraToVertex, normal, refractionRatio );","} else { ","reflectVec = reflect( cameraToVertex, normal );",tt,u,"reflectVec = vReflect;",e,n,"float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );","vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );",u,"vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );",e,ht,"cubeColor.xyz *= cubeColor.xyz;",e,"if ( combine == 1 ) {","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );",Ft,"gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );",tt,e][k](p),envmap_pars_vertex:[L,wt,vt,gt,e][k](p),worldpos_vertex:["#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )",m,"vec4 mPosition = modelMatrix * skinned;",e,"#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 mPosition = modelMatrix * vec4( morphed, 1.0 );",e,"#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 mPosition = modelMatrix * vec4( position, 1.0 );",e,e][k](p),envmap_vertex:[L,"vec3 nWorld = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;",Ct,"vReflect = refract( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ), refractionRatio );",Ft,"vReflect = reflect( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ) );",tt,e][k](p),map_particle_pars_fragment:[rt,yt,e][k](p),map_particle_fragment:[rt,"gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );",e][k](p),map_pars_vertex:[r,At,"uniform vec4 offsetRepeat;",e][k](p),map_pars_fragment:[r,At,e,rt,yt,e][k](p),map_vertex:[r,"vUv = uv * offsetRepeat.zw + offsetRepeat.xy;",e][k](p),map_fragment:[rt,ht,"vec4 texelColor = texture2D( map, vUv );","texelColor.xyz *= texelColor.xyz;","gl_FragColor = gl_FragColor * texelColor;",u,"gl_FragColor = gl_FragColor * texture2D( map, vUv );",e,e][k](p),lightmap_pars_fragment:[B,Lt,"uniform sampler2D lightMap;",e][k](p),lightmap_pars_vertex:[B,Lt,e][k](p),lightmap_fragment:[B,"gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );",e][k](p),lightmap_vertex:[B,"vUv2 = uv2;",e][k](p),bumpmap_pars_fragment:["#ifdef USE_BUMPMAP","uniform sampler2D bumpMap;","uniform float bumpScale;","vec2 dHdxy_fwd() {","vec2 dSTdx = dFdx( vUv );","vec2 dSTdy = dFdy( vUv );","float Hll = bumpScale * texture2D( bumpMap, vUv ).x;","float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","return vec2( dBx, dBy );",tt,"vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","vec3 vSigmaX = dFdx( surf_pos );","vec3 vSigmaY = dFdy( surf_pos );","vec3 vN = surf_norm;","vec3 R1 = cross( vSigmaY, vN );","vec3 R2 = cross( vN, vSigmaX );","float fDet = dot( vSigmaX, R1 );","vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","return normalize( abs( fDet ) * surf_norm - vGrad );",tt,e][k](p),normalmap_pars_fragment:[xt,"uniform sampler2D normalMap;","uniform vec2 normalScale;","vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {","vec3 q0 = dFdx( eye_pos.xyz );","vec3 q1 = dFdy( eye_pos.xyz );","vec2 st0 = dFdx( vUv.st );","vec2 st1 = dFdy( vUv.st );","vec3 S = normalize(  q0 * st1.t - q1 * st0.t );","vec3 T = normalize( -q0 * st1.s + q1 * st0.s );","vec3 N = normalize( surf_norm );","vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;","mapN.xy = normalScale * mapN.xy;","mat3 tsn = mat3( S, T, N );","return normalize( tsn * mapN );",tt,e][k](p),specularmap_pars_fragment:[bt,"uniform sampler2D specularMap;",e][k](p),specularmap_fragment:["float specularStrength;",bt,"vec4 texelSpecular = texture2D( specularMap, vUv );","specularStrength = texelSpecular.r;",u,"specularStrength = 1.0;",e][k](p),lights_lambert_pars_vertex:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 emissive;",dt,N,U,F,e,T,q,H,I,e,l,V,b,g,e,c,J,S,W,w,$,X,e,i,St,e][k](p),lights_lambert_vertex:["vLightFront = vec3( 0.0 );",n,"vLightBack = vec3( 0.0 );",e,"transformedNormal = normalize( transformedNormal );",N,nt,O,Y,"float dotProduct = dot( transformedNormal, dirVector );","vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );",n,"vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );",i,"vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );",e,e,i,"vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );",n,"directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );",e,e,"vLightFront += directionalLightColor[ i ] * directionalLightWeighting;",n,"vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;",e,tt,e,l,K,h,s,y,_,a,v,E,"vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );",n,"vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );",i,"vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );",e,e,i,"vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );",n,"pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );",e,e,"vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;",n,"vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;",e,tt,e,c,st,d,s,v,"float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - mPosition.xyz ) );",ft,z,y,D,f,E,"vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );",n,"vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );",i,"vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );",e,e,i,"vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );",n,"spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );",e,e,"vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;",n,"vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;",e,tt,tt,e,T,ut,M,s,v,E,G,"float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;","vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );",n,"vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );",e,tt,e,"vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;",n,"vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;",e][k](p),lights_phong_pars_vertex:[Tt,l,b,g,ot,e,c,S,w,at,e,e,x,mt,e][k](p),lights_phong_vertex:[Tt,l,K,h,s,y,_,a,"vPointLight[ i ] = vec4( lVector, lDistance );",tt,e,c,st,d,s,y,D,f,"vSpotLight[ i ] = vec4( lVector, lDistance );",tt,e,e,x,"vWorldPosition = mPosition.xyz;",e][k](p),lights_phong_pars_fragment:[dt,N,U,F,e,T,q,H,I,e,l,V,P,b,g,u,ot,e,e,c,J,S,W,$,X,P,w,u,at,e,e,x,mt,e,i,St,e,"varying vec3 vViewPosition;","varying vec3 vNormal;"][k](p),lights_phong_fragment:["vec3 normal = normalize( vNormal );","vec3 viewPosition = normalize( vViewPosition );",n,"normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );",e,xt,"normal = perturbNormal2Arb( -viewPosition, normal );","#elif defined( USE_BUMPMAP )","normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );",e,l,"vec3 pointDiffuse  = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {",P,h,Q,y,_,a,v,u,"vec3 lVector = normalize( vPointLight[ i ].xyz );","float lDistance = vPointLight[ i ].w;",e,A,i,"float pointDiffuseWeightFull = max( dotProduct, 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );",u,"float pointDiffuseWeight = max( dotProduct, 0.0 );",e,"pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;","vec3 pointHalfVector = normalize( lVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );",C,o,"vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;",u,"pointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;",e,tt,e,c,"vec3 spotDiffuse  = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {",P,d,Q,y,D,f,v,u,"vec3 lVector = normalize( vSpotLight[ i ].xyz );","float lDistance = vSpotLight[ i ].w;",e,"float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );",ft,z,A,i,"float spotDiffuseWeightFull = max( dotProduct, 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );",u,"float spotDiffuseWeight = max( dotProduct, 0.0 );",e,"spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;","vec3 spotHalfVector = normalize( lVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );",C,o,"vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;",u,"spotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;",e,tt,tt,e,N,"vec3 dirDiffuse  = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );",nt,O,Y,"float dotProduct = dot( normal, dirVector );",i,"float dirDiffuseWeightFull = max( dotProduct, 0.0 );","float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );",u,"float dirDiffuseWeight = max( dotProduct, 0.0 );",e,"dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );",C,o,"vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;",u,"dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;",e,tt,e,T,"vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );",ut,M,"vec3 lVector = normalize( lPosition.xyz + vViewPosition.xyz );",A,G,"vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += diffuse * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","vec3 lVectorGround = normalize( -lPosition.xyz + vViewPosition.xyz );","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );",C,"float dotProductGround = dot( normal, lVectorGround );",o,"vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );",u,"hemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;",e,tt,e,"vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );",N,"totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;",e,T,"totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;",e,l,"totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;",e,c,"totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;",e,"#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );",u,"gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;",e][k](p),color_pars_fragment:[Z,Mt,e][k](p),color_fragment:[Z,"gl_FragColor = gl_FragColor * vec4( vColor, opacity );",e][k](p),color_pars_vertex:[Z,Mt,e][k](p),color_vertex:[Z,ht,"vColor = color * color;",u,"vColor = color;",e,e][k](p),skinning_pars_vertex:[m,"#ifdef BONE_TEXTURE","uniform sampler2D boneTexture;",pt,"float j = i * 4.0;","float x = mod( j, N_BONE_PIXEL_X );","float y = floor( j / N_BONE_PIXEL_X );","const float dx = 1.0 / N_BONE_PIXEL_X;","const float dy = 1.0 / N_BONE_PIXEL_Y;","y = dy * ( y + 0.5 );","vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );","vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );","vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );","vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );","mat4 bone = mat4( v1, v2, v3, v4 );",jt,tt,u,"uniform mat4 boneGlobalMatrices[ MAX_BONES ];",pt,"mat4 bone = boneGlobalMatrices[ int(i) ];",jt,tt,e,e][k](p),skinbase_vertex:[m,"mat4 boneMatX = getBoneMatrix( skinIndex.x );","mat4 boneMatY = getBoneMatrix( skinIndex.y );",e][k](p),skinning_vertex:[m,it,"vec4 skinVertex = vec4( morphed, 1.0 );",u,"vec4 skinVertex = vec4( position, 1.0 );",e,"vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;",e][k](p),morphtarget_pars_vertex:[it,Et,"uniform float morphTargetInfluences[ 8 ];",u,"uniform float morphTargetInfluences[ 4 ];",e,e][k](p),morphtarget_vertex:[it,"vec3 morphed = vec3( 0.0 );","morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];","morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];","morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];","morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];",Et,"morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];","morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];","morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];","morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];",e,"morphed += position;",e][k](p),default_vertex:["vec4 mvPosition;",m,"mvPosition = modelViewMatrix * skinned;",e,"#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( morphed, 1.0 );",e,"#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( position, 1.0 );",e,"gl_Position = projectionMatrix * mvPosition;"][k](p),morphnormal_vertex:[Nt,"vec3 morphedNormal = vec3( 0.0 );","morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];","morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];","morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];","morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];","morphedNormal += normal;",e][k](p),skinnormal_vertex:[m,"mat4 skinMatrix = skinWeight.x * boneMatX;","skinMatrix 	+= skinWeight.y * boneMatY;",Nt,"vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );",u,"vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );",e,e][k](p),defaultnormal_vertex:["vec3 objectNormal;",m,"objectNormal = skinnedNormal.xyz;",e,"#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )","objectNormal = morphedNormal;",e,"#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )","objectNormal = normal;",e,"#ifdef FLIP_SIDED","objectNormal = -objectNormal;",e,"vec3 transformedNormal = normalMatrix * objectNormal;"][k](p),shadowmap_pars_fragment:[j,"uniform sampler2D shadowMap[ MAX_SHADOWS ];","uniform vec2 shadowMapSize[ MAX_SHADOWS ];","uniform float shadowDarkness[ MAX_SHADOWS ];","uniform float shadowBias[ MAX_SHADOWS ];",lt,"float unpackDepth( const in vec4 rgba_depth ) {","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","float depth = dot( rgba_depth, bit_shift );","return depth;",tt,e][k](p),shadowmap_fragment:[j,kt,"vec3 frustumColors[3];","frustumColors[0] = vec3( 1.0, 0.5, 0.0 );","frustumColors[1] = vec3( 0.0, 1.0, 0.8 );","frustumColors[2] = vec3( 0.0, 0.5, 1.0 );",e,et,"int inFrustumCount = 0;",e,"float fDepth;","vec3 shadowColor = vec3( 1.0 );",ct,"vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;","bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );","bool inFrustum = all( inFrustumVec );",et,"inFrustumCount += int( inFrustum );","bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );",u,"bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );",e,"bool frustumTest = all( frustumTestVec );","if ( frustumTest ) {","shadowCoord.z += shadowBias[ i ];","#ifdef SHADOWMAP_SOFT","float shadow = 0.0;","const float shadowDelta = 1.0 / 9.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.25 * xPixelOffset;","float dy0 = -1.25 * yPixelOffset;","float dx1 = 1.25 * xPixelOffset;","float dy1 = 1.25 * yPixelOffset;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );",t,"fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );",t,"fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );",t,"fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );",t,"fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );",t,"fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );",t,"fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );",t,"fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );",t,"fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );",t,"shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );",u,"vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );","float fDepth = unpackDepth( rgbaDepth );","if ( fDepth < shadowCoord.z )","shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );",e,tt,kt,et,"if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];",u,"if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];",e,e,tt,_t,"shadowColor *= shadowColor;",e,"gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;",e][k](p),shadowmap_pars_vertex:[j,lt,"uniform mat4 shadowMatrix[ MAX_SHADOWS ];",e][k](p),shadowmap_vertex:[j,ct,"vShadowCoord[ i ] = shadowMatrix[ i ] * mPosition;",tt,e][k](p),alphatest_fragment:["#ifdef ALPHATEST","if ( gl_FragColor.a < ALPHATEST ) discard;",e][k](p),linear_to_gamma_fragment:[_t,"gl_FragColor.xyz = sqrt( gl_FragColor.xyz );",e][k](p)}}(),THREE.UniformsUtils={merge:function(e){var t,n,r,i={};for(t=0;t<e.length;t++){r=this.clone(e[t]);for(n in r)i[n]=r[n]}return i},clone:function(e){var t,n,r,i,s={};for(t in e){s[t]={};for(n in e[t])i=e[t][n],i instanceof THREE.Color||i instanceof THREE.Vector2||i instanceof THREE.Vector3||i instanceof THREE.Vector4||i instanceof THREE.Matrix4||i instanceof THREE.Texture?s[t][n]=i.clone():i instanceof Array?s[t][n]=i.slice():s[t][n]=i}return s}},function(){var e="UniformsLib",t="c",n="Color",r="f",i="t",s=null,o="fv",u="fv1",a="join",f="void main() {",l="}",c="\n",h="uniform float opacity;",p="varying vec3 vNormal;",d="vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",v="gl_Position = projectionMatrix * mvPosition;",m="merge",g="UniformsUtils",y="common",b="fog",w="shadowmap",E="ShaderChunk",S="map_pars_vertex",x="lightmap_pars_vertex",T="envmap_pars_vertex",N="color_pars_vertex",C="morphtarget_pars_vertex",k="skinning_pars_vertex",L="shadowmap_pars_vertex",A="map_vertex",O="lightmap_vertex",M="color_vertex",_="morphnormal_vertex",D="skinbase_vertex",P="skinnormal_vertex",H="defaultnormal_vertex",B="#endif",j="morphtarget_vertex",F="skinning_vertex",I="default_vertex",q="worldpos_vertex",R="envmap_vertex",U="shadowmap_vertex",z="uniform vec3 diffuse;",W="color_pars_fragment",X="map_pars_fragment",V="lightmap_pars_fragment",$="envmap_pars_fragment",J="fog_pars_fragment",K="shadowmap_pars_fragment",Q="specularmap_pars_fragment",G="map_fragment",Y="alphatest_fragment",Z="specularmap_fragment",et="lightmap_fragment",tt="color_fragment",nt="envmap_fragment",rt="shadowmap_fragment",it="linear_to_gamma_fragment",st="fog_fragment",ot="varying vec3 vLightFront;",ut="#ifdef DOUBLE_SIDED",at="varying vec3 vLightBack;"
,ft="gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",lt="gl_FragColor.xyz *= vLightFront;";THREE[e]={common:{diffuse:{type:t,value:new THREE[n](15658734)},opacity:{type:r,value:1},map:{type:i,value:s},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:i,value:s},specularMap:{type:i,value:s},envMap:{type:i,value:s},flipEnvMap:{type:r,value:-1},useRefract:{type:"i",value:0},reflectivity:{type:r,value:1},refractionRatio:{type:r,value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:r,value:0}},bump:{bumpMap:{type:i,value:s},bumpScale:{type:r,value:1}},normalmap:{normalMap:{type:i,value:s},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:r,value:25e-5},fogNear:{type:r,value:1},fogFar:{type:r,value:2e3},fogColor:{type:t,value:new THREE[n](16777215)}},lights:{ambientLightColor:{type:o,value:[]},directionalLightDirection:{type:o,value:[]},directionalLightColor:{type:o,value:[]},hemisphereLightPosition:{type:o,value:[]},hemisphereLightSkyColor:{type:o,value:[]},hemisphereLightGroundColor:{type:o,value:[]},pointLightColor:{type:o,value:[]},pointLightPosition:{type:o,value:[]},pointLightDistance:{type:u,value:[]},spotLightColor:{type:o,value:[]},spotLightPosition:{type:o,value:[]},spotLightDirection:{type:o,value:[]},spotLightDistance:{type:u,value:[]},spotLightAngle:{type:u,value:[]},spotLightExponent:{type:u,value:[]}},particle:{psColor:{type:t,value:new THREE[n](15658734)},opacity:{type:r,value:1},size:{type:r,value:1},scale:{type:r,value:1},map:{type:i,value:s},fogDensity:{type:r,value:25e-5},fogNear:{type:r,value:1},fogFar:{type:r,value:2e3},fogColor:{type:t,value:new THREE[n](16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:u,value:[]},shadowDarkness:{type:u,value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={depth:{uniforms:{mNear:{type:r,value:1},mFar:{type:r,value:2e3},opacity:{type:r,value:1}},vertexShader:[f,"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",l][a](c),fragmentShader:["uniform float mNear;","uniform float mFar;",h,f,"float depth = gl_FragCoord.z / gl_FragCoord.w;","float color = 1.0 - smoothstep( mNear, mFar, depth );","gl_FragColor = vec4( vec3( color ), opacity );",l][a](c)},normal:{uniforms:{opacity:{type:r,value:1}},vertexShader:[p,f,d,"vNormal = normalMatrix * normal;",v,l][a](c),fragmentShader:[h,p,f,"gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",l][a](c)},basic:{uniforms:THREE[g][m]([THREE[e][y],THREE[e][b],THREE[e][w]]),vertexShader:[THREE[E][S],THREE[E][x],THREE[E][T],THREE[E][N],THREE[E][C],THREE[E][k],THREE[E][L],f,THREE[E][A],THREE[E][O],THREE[E][M],"#ifdef USE_ENVMAP",THREE[E][_],THREE[E][D],THREE[E][P],THREE[E][H],B,THREE[E][j],THREE[E][F],THREE[E][I],THREE[E][q],THREE[E][R],THREE[E][U],l][a](c),fragmentShader:[z,h,THREE[E][W],THREE[E][X],THREE[E][V],THREE[E][$],THREE[E][J],THREE[E][K],THREE[E][Q],f,"gl_FragColor = vec4( diffuse, opacity );",THREE[E][G],THREE[E][Y],THREE[E][Z],THREE[E][et],THREE[E][tt],THREE[E][nt],THREE[E][rt],THREE[E][it],THREE[E][st],l][a](c)},lambert:{uniforms:THREE[g][m]([THREE[e][y],THREE[e][b],THREE[e].lights,THREE[e][w],{ambient:{type:t,value:new THREE[n](16777215)},emissive:{type:t,value:new THREE[n](0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT",ot,ut,at,B,THREE[E][S],THREE[E][x],THREE[E][T],THREE[E].lights_lambert_pars_vertex,THREE[E][N],THREE[E][C],THREE[E][k],THREE[E][L],f,THREE[E][A],THREE[E][O],THREE[E][M],THREE[E][_],THREE[E][D],THREE[E][P],THREE[E][H],THREE[E][j],THREE[E][F],THREE[E][I],THREE[E][q],THREE[E][R],THREE[E].lights_lambert_vertex,THREE[E][U],l][a](c),fragmentShader:[h,ot,ut,at,B,THREE[E][W],THREE[E][X],THREE[E][V],THREE[E][$],THREE[E][J],THREE[E][K],THREE[E][Q],f,ft,THREE[E][G],THREE[E][Y],THREE[E][Z],ut,"if ( gl_FrontFacing )",lt,"else","gl_FragColor.xyz *= vLightBack;","#else",lt,B,THREE[E][et],THREE[E][tt],THREE[E][nt],THREE[E][rt],THREE[E][it],THREE[E][st],l][a](c)},phong:{uniforms:THREE[g][m]([THREE[e][y],THREE[e].bump,THREE[e].normalmap,THREE[e][b],THREE[e].lights,THREE[e][w],{ambient:{type:t,value:new THREE[n](16777215)},emissive:{type:t,value:new THREE[n](0)},specular:{type:t,value:new THREE[n](1118481)},shininess:{type:r,value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;",p,THREE[E][S],THREE[E][x],THREE[E][T],THREE[E].lights_phong_pars_vertex,THREE[E][N],THREE[E][C],THREE[E][k],THREE[E][L],f,THREE[E][A],THREE[E][O],THREE[E][M],THREE[E][_],THREE[E][D],THREE[E][P],THREE[E][H],"vNormal = transformedNormal;",THREE[E][j],THREE[E][F],THREE[E][I],"vViewPosition = -mvPosition.xyz;",THREE[E][q],THREE[E][R],THREE[E].lights_phong_vertex,THREE[E][U],l][a](c),fragmentShader:[z,h,"uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE[E][W],THREE[E][X],THREE[E][V],THREE[E][$],THREE[E][J],THREE[E].lights_phong_pars_fragment,THREE[E][K],THREE[E].bumpmap_pars_fragment,THREE[E].normalmap_pars_fragment,THREE[E][Q],f,ft,THREE[E][G],THREE[E][Y],THREE[E][Z],THREE[E].lights_phong_fragment,THREE[E][et],THREE[E][tt],THREE[E][nt],THREE[E][rt],THREE[E][it],THREE[E][st],l][a](c)},particle_basic:{uniforms:THREE[g][m]([THREE[e].particle,THREE[e][w]]),vertexShader:["uniform float size;","uniform float scale;",THREE[E][N],THREE[E][L],f,THREE[E][M],d,"#ifdef USE_SIZEATTENUATION","gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","#else","gl_PointSize = size;",B,v,THREE[E][q],THREE[E][U],l][a](c),fragmentShader:["uniform vec3 psColor;",h,THREE[E][W],THREE[E].map_particle_pars_fragment,THREE[E][J],THREE[E][K],f,"gl_FragColor = vec4( psColor, opacity );",THREE[E].map_particle_fragment,THREE[E][Y],THREE[E][tt],THREE[E][rt],THREE[E][st],l][a](c)},depthRGBA:{uniforms:{},vertexShader:[THREE[E][C],THREE[E][k],f,THREE[E][D],THREE[E][j],THREE[E][F],THREE[E][I],l][a](c),fragmentShader:["vec4 pack_depth( const in float depth ) {","const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","vec4 res = fract( depth * bit_shift );","res -= res.xxyz * bit_mask;","return res;",l,f,"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );",l][a](c)}},THREE.Fog=function(e,t,r){this.color=new THREE[n](e),this.near=t!==undefined?t:1,this.far=r!==undefined?r:1e3},THREE.FogExp2=function(e,t){this.color=new THREE[n](e),this.density=t!==undefined?t:25e-5},THREE.Scene=function(){THREE.Object3D.call(this),this[b]=s,this.overrideMaterial=s,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype)}(),THREE.Scene.prototype.__addObject=function(e){var t="indexOf",n="target",r="__objectsRemoved";if(e instanceof THREE.Light)this.__lights[t](e)===-1&&this.__lights.push(e),e[n]&&e[n].parent===undefined&&this.add(e[n]);else if(!(e instanceof THREE.Camera||e instanceof THREE.Bone)&&this.__objects[t](e)===-1){this.__objects.push(e),this.__objectsAdded.push(e);var i=this[r][t](e);i!==-1&&this[r].splice(i,1)}for(var s=0;s<e.children.length;s++)this.__addObject(e.children[s])},THREE.Scene.prototype.__removeObject=function(e){var t="indexOf",n="splice",r="__objectsAdded";if(e instanceof THREE.Light){var i=this.__lights[t](e);i!==-1&&this.__lights[n](i,1)}else if(!(e instanceof THREE.Camera)){var i=this.__objects[t](e);if(i!==-1){this.__objects[n](i,1),this.__objectsRemoved.push(e);var s=this[r][t](e);s!==-1&&this[r][n](s,1)}}for(var o=0;o<e.children.length;o++)this.__removeObject(e.children[o])},THREE.CompressedTexture=function(e,t,n,r,i,s,o,u,a,f){THREE.Texture.call(this,null,s,o,u,a,f,r,i),this.image={width:t,height:n},this.mipmaps=e},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var e="anisotropy",t=new THREE.CompressedTexture;return t.image=this.image,t.mipmaps=this.mipmaps,t.format=this.format,t.type=this.type,t.mapping=this.mapping,t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.magFilter=this.magFilter,t.minFilter=this.minFilter,t[e]=this[e],t.offset.copy(this.offset),t.repeat.copy(this.repeat),t},THREE.DataTexture=function(e,t,n,r,i,s,o,u,a,f){THREE.Texture.call(this,null,s,o,u,a,f,r,i),this.image={data:e,width:t,height:n}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture(this.image.data,this.image.width,this.image.height,this.format,this.type,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter);return e.offset.copy(this.offset),e.repeat.copy(this.repeat),e},THREE.ColorUtils={adjustHSV:function(e,t,n,r){var i="ColorUtils",s=THREE[i].__hsv;THREE[i].rgbToHsv(e,s),s.h=THREE.Math.clamp(s.h+t,0,1),s.s=THREE.Math.clamp(s.s+n,0,1),s.v=THREE.Math.clamp(s.v+r,0,1),e.setHSV(s.h,s.s,s.v)},rgbToHsv:function(e,t){var n=e.r,r=e.g,i=e.b,s=Math.max(Math.max(n,r),i),o=Math.min(Math.min(n,r),i),u,a,f=s;if(o===s)u=0,a=0;else{var l=s-o;a=l/s,n===s?u=(r-i)/l:r===s?u=2+(i-n)/l:u=4+(n-r)/l,u/=6,u<0&&(u+=1),u>1&&(u-=1)}return t===undefined&&(t={h:0,s:0,v:0}),t.h=u,t.s=a,t.v=f,t}},THREE.ColorUtils.__hsv={h:0,s:0,v:0},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(e){var t="faces",n="cssFontWeight",r="cssFontStyle",i=e.familyName.toLowerCase(),s=this;s[t][i]=s[t][i]||{},s[t][i][e[n]]=s[t][i][e[n]]||{},s[t][i][e[n]][e[r]]=e;var o=s[t][i][e[n]][e[r]]=e;return e},drawText:function(e){var t=[],n=[],r,i,s=this.getFace(),o=this.size/s.resolution,u=0,a=String(e).split(""),f=a.length,l=[];for(r=0;r<f;r++){var c=new THREE.Path,h=this.extractGlyphPoints(a[r],s,o,u,c);u+=h.offset,l.push(h.path)}var p=u/2;return{paths:l,offset:p}},extractGlyphPoints:function(e,t,n,r,i){var s="_cachedOutline",o="length",u="Utils",a="Shape",f=[],l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A=t.glyphs[e]||t.glyphs["?"];if(!A)return;if(A.o){p=A[s]||(A[s]=A.o.split(" ")),v=p[o],m=n,g=n;for(l=0;l<v;){d=p[l++];switch(d){case"m":y=p[l++]*m+r,b=p[l++]*g,i.moveTo(y,b);break;case"l":y=p[l++]*m+r,b=p[l++]*g,i.lineTo(y,b);break;case"q":w=p[l++]*m+r,E=p[l++]*g,T=p[l++]*m+r,N=p[l++]*g,i.quadraticCurveTo(T,N,w,E),L=f[f[o]-1];if(L){S=L.x,x=L.y;for(c=1,h=this.divisions;c<=h;c++)var O=c/h,M=THREE[a][u].b2(O,S,T,w),_=THREE[a][u].b2(O,x,N,E)}break;case"b":w=p[l++]*m+r,E=p[l++]*g,T=p[l++]*m+r,N=p[l++]*-g,C=p[l++]*m+r,k=p[l++]*-g,i.bezierCurveTo(w,E,T,N,C,k),L=f[f[o]-1];if(L){S=L.x,x=L.y;for(c=1,h=this.divisions;c<=h;c++)var O=c/h,M=THREE[a][u].b3(O,S,T,C,w),_=THREE[a][u].b3(O,x,N,k,E)}}}}return{offset:A.ha*n,path:i}}},THREE.FontUtils.generateShapes=function(e,t){var n="curveSegments",r="weight",i="normal",s="FontUtils";t=t||{};var o=t.size!==undefined?t.size:100,u=t[n]!==undefined?t[n]:4,a=t.font!==undefined?t.font:"helvetiker",f=t[r]!==undefined?t[r]:i,l=t.style!==undefined?t.style:i;THREE[s].size=o,THREE[s].divisions=u,THREE[s].face=a,THREE[s][r]=f,THREE[s].style=l;var c=THREE[s].drawText(e),h=c.paths,p=[];for(var d=0,v=h.length;d<v;d++)Array.prototype.push.apply(p,h[d].toShapes());return p},function(e){var t="Triangulate",n=1e-10,r=function(e,t){var n=e.length;if(n<3)return null;var r=[],s=[],u=[],a,f,l;if(i(e)>0)for(f=0;f<n;f++)s[f]=f;else for(f=0;f<n;f++)s[f]=n-1-f;var c=n,h=2*c;for(f=c-1;c>2;){if(h--<=0)return console.log("Warning, unable to triangulate polygon!"),t?u:r;a=f,c<=a&&(a=0),f=a+1,c<=f&&(f=0),l=f+1,c<=l&&(l=0);if(o(e,a,f,l,c,s)){var p,d,v,m,g;p=s[a],d=s[f],v=s[l],r.push([e[p],e[d],e[v]]),u.push([s[a],s[f],s[l]]);for(m=f,g=f+1;g<c;m++,g++)s[m]=s[g];c--,h=2*c}}return t?u:r},i=function(e){var t=e.length,n=0;for(var r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return n*.5},s=function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;return a=i-n,f=s-r,l=e-i,c=t-s,h=n-e,p=r-t,d=o-e,v=u-t,m=o-n,g=u-r,y=o-i,b=u-s,S=a*g-f*m,w=h*v-p*d,E=l*b-c*y,S>=0&&E>=0&&w>=0},o=function(e,t,r,i,o,u){var a,f,l,c,h,p,d,v,m;f=e[u[t]].x,l=e[u[t]].y,c=e[u[r]].x,h=e[u[r]].y,p=e[u[i]].x,d=e[u[i]].y;if(n>(c-f)*(d-l)-(h-l)*(p-f))return!1;for(a=0;a<o;a++){if(a==t||a==r||a==i)continue;v=e[u[a]].x,m=e[u[a]].y;if(s(f,l,c,h,p,d,v,m))return!1}return!0};return e[t]=r,e[t].area=i,e}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.GeometryUtils={merge:function(e,t){var n="length",r="vertices",i="faceVertexUvs",s="materials",o="multiplyVector3",u="push",a="vertexNormals",f="vertexColors",l="normal",c="materialIndex",h="centroid",p,d,v=e[r][n],m=e[i][0][n],g=t instanceof THREE.Mesh?t.geometry:t,y=e[r],b=g[r],w=e.faces,E=g.faces,S=e[i][0],x=g[i][0],T={};for(var N=0;N<e[s][n];N++){var C=e[s][N].id;T[C]=N}t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),p=t.matrix,d=new THREE.Matrix4,d.extractRotation(p,t.scale));for(var N=0,k=b[n];N<k;N++){var L=b[N],A=L.clone();p&&p[o](A),y[u](A)}for(N=0,k=E[n];N<k;N++){var O=E[N],M,_,D,P=O[a],H=O[f];O instanceof THREE.Face3?M=new THREE.Face3(O.a+v,O.b+v,O.c+v):O instanceof THREE.Face4&&(M=new THREE.Face4(O.a+v,O.b+v,O.c+v,O.d+v)),M[l].copy(O[l]),d&&d[o](M[l]);for(var B=0,j=P[n];B<j;B++)_=P[B].clone(),d&&d[o](_),M[a][u](_);M.color.copy(O.color);for(var B=0,j=H[n];B<j;B++)D=H[B],M[f][u](D.clone());if(O[c]!==undefined){var F=g[s][O[c]],I=F.id,q=T[I];q===undefined&&(q=e[s][n],T[I]=q,e[s][u](F)),M[c]=q}M[h].copy(O[h]),p&&p[o](M[h]),w[u](M)}for(N=0,k=x[n];N<k;N++){var R=x[N],U=[];for(var B=0,j=R[n];B<j;B++)U[u](new THREE.UV(R[B].u,R[B].v));S[u](U)}},clone:function(e){var t="faceVertexUvs",n="materials",r="length",i=new THREE.Geometry,s,o,u=e.vertices,a=e.faces,f=e[t][0];e[n]&&(i[n]=e[n].slice());for(s=0,o=u[r];s<o;s++){var l=u[s];i.vertices.push(l.clone())}for(s=0,o=a[r];s<o;s++){var c=a[s];i.faces.push(c.clone())}for(s=0,o=f[r];s<o;s++){var h=f[s],p=[];for(var d=0,v=h[r];d<v;d++)p.push(new THREE.UV(h[d].u,h[d].v));i[t][0].push(p)}return i},randomPointInTriangle:function(e,t,n){var r="GeometryUtils",i="multiplyScalar",s,o,u,a=new THREE.Vector3,f=THREE[r].__v1;return s=THREE[r].random(),o=THREE[r].random(),s+o>1&&(s=1-s,o=1-o),u=1-s-o,a.copy(e),a[i](s),f.copy(t),f[i](o),a.addSelf(f),f.copy(n),f[i](u),a.addSelf(f),a},randomPointInFace:function(e,t,n){var r="vertices",i="randomPointInTriangle",s="GeometryUtils",o="_area1",u="_area2",a="triangleArea",f,l,c,h;if(e instanceof THREE.Face3)return f=t[r][e.a],l=t[r][e.b],c=t[r][e.c],THREE[s][i](f,l,c);if(e instanceof THREE.Face4){f=t[r][e.a],l=t[r][e.b],c=t[r][e.c],h=t[r][e.d];var p,d;n?e[o]&&e[u]?(p=e[o],d=e[u]):(p=THREE[s][a](f,l,h),d=THREE[s][a](l,c,h),e[o]=p,e[u]=d):(p=THREE[s][a](f,l,h),d=THREE[s][a](l,c,h));var v=THREE[s].random()*(p+d);return v<p?THREE[s][i](f,l,h):THREE[s][i](l,c,h)}},randomPointsInGeometry:function(e,t){function v(e){function t(n,r){if(r<n)return n;var i=n+Math.floor((r-n)/2);return l[i]>e?t(n,i-1):l[i]<e?t(i+1,r):i}var n=t(0,l.length-1);return n}var n="triangleArea",r="GeometryUtils",i,s,o=e.faces,u=e.vertices,a=o.length,f=0,l=[],c,h,p,d;for(s=0;s<a;s++)i=o[s],i instanceof THREE.Face3?(c=u[i.a],h=u[i.b],p=u[i.c],i._area=THREE[r][n](c,h,p)):i instanceof THREE.Face4&&(c=u[i.a],h=u[i.b],p=u[i.c],d=u[i.d],i._area1=THREE[r][n](c,h,d),i._area2=THREE[r][n](h,p,d),i._area=i._area1+i._area2),f+=i._area,l[s]=f;var m,g,y=[],b={};for(s=0;s<t;s++)m=THREE[r].random()*f,g=v(m),y[s]=THREE[r].randomPointInFace(o[g],e,!0),b[g]?b[g]+=1:b[g]=1;return y},triangleArea:function(e,t,n){var r="length",i,s,o,u,a=THREE.GeometryUtils.__v1;return a.sub(e,t),s=a[r](),a.sub(e,n),o=a[r](),a.sub(t,n),u=a[r](),i=.5*(s+o+u),Math.sqrt(i*(i-s)*(i-o)*(i-u))},center:function(e){var t="computeBoundingBox";e[t]();var n=e.boundingBox,r=new THREE.Vector3;return r.add(n.min,n.max),r.multiplyScalar(-0.5),e.applyMatrix((new THREE.Matrix4).makeTranslation(r.x,r.y,r.z)),e[t](),r},normalizeUVs:function(e){var t=e.faceVertexUvs[0];for(var n=0,r=t.length;n<r;n++){var i=t[n];for(var s=0,o=i.length;s<o;s++)i[s].u!==1&&(i[s].u=i[s].u-Math.floor(i[s].u)),i[s].v!==1&&(i[s].v=i[s].v-Math.floor(i[s].v))}},triangulateQuads:function(e){var t="length",n="faceUvs",r="faceVertexUvs",i="color",s="materialIndex",o="vertexColors",u="clone",a="push",f,l,c,h,p=[],d=[],v=[];for(f=0,l=e[n][t];f<l;f++)d[f]=[];for(f=0,l=e[r][t];f<l;f++)v[f]=[];for(f=0,l=e.faces[t];f<l;f++){var m=e.faces[f];if(m instanceof THREE.Face4){var g=m.a,y=m.b,b=m.c,w=m.d,E=new THREE.Face3,S=new THREE.Face3;E[i].copy(m[i]),S[i].copy(m[i]),E[s]=m[s],S[s]=m[s],E.a=g,E.b=y,E.c=w,S.a=y,S.b=b,S.c=w,m[o][t]===4&&(E[o][0]=m[o][0][u](),E[o][1]=m[o][1][u](),E[o][2]=m[o][3][u](),S[o][0]=m[o][1][u](),S[o][1]=m[o][2][u](),S[o][2]=m[o][3][u]()),p[a](E,S);for(c=0,h=e[r][t];c<h;c++)if(e[r][c][t]){var x=e[r][c][f],T=x[0],N=x[1],C=x[2],k=x[3],L=[T[u](),N[u](),k[u]()],A=[N[u](),C[u](),k[u]()];v[c][a](L,A)}for(c=0,h=e[n][t];c<h;c++)if(e[n][c][t]){var O=e[n][c][f];d[c][a](O,O)}}else{p[a](m);for(c=0,h=e[n][t];c<h;c++)d[c][a](e[n][c][f]);for(c=0,h=e[r][t];c<h;c++)v[c][a](e[r][c][f])}}e.faces=p,e[n]=d,e[r]=v,e.computeCentroids(),e.computeFaceNormals(),e.computeVertexNormals(),e.hasTangents&&e.computeTangents()},explode:function(e){var t="vertices",n="push",r="clone",i=[];for(var s=0,o=e.faces.length;s<o;s++){var u=i.length,a=e.faces[s];if(a instanceof THREE.Face4){var f=a.a,l=a.b,c=a.c,h=a.d,p=e[t][f],d=e[t][l],v=e[t][c],m=e[t][h];i[n](p[r]()),i[n](d[r]()),i[n](v[r]()),i[n](m[r]()),a.a=u,a.b=u+1,a.c=u+2,a.d=u+3}else{var f=a.a,l=a.b,c=a.c,p=e[t][f],d=e[t][l],v=e[t][c];i[n](p[r]()),i[n](d[r]()),i[n](v[r]()),a.a=u,a.b=u+1,a.c=u+2}}e[t]=i,delete e.__tmpVertices},tessellate:function(e,t){var n="length",r="faceVertexUvs",i="vertices",s="distanceTo",o="clone",u="lerpSelf",a="vertexNormals",f="copy",l="vertexColors",c="push",h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X=[],V=[];for(h=0,p=e[r][n];h<p;h++)V[h]=[];for(h=0,p=e.faces[n];h<p;h++){d=e.faces[h];if(d instanceof THREE.Face3){v=d.a,m=d.b,g=d.c,b=e[i][v],w=e[i][m],E=e[i][g],x=b[s](w),T=w[s](E),N=b[s](E);if(x>t||T>t||N>t){L=e[i][n],q=d[o](),R=d[o](),x>=T&&x>=N?(M=b[o](),M[u](w,.5),q.a=v,q.b=L,q.c=g,R.a=L,R.b=m,R.c=g,d[a][n]===3&&(P=d[a][0][o](),P[u](d[a][1],.5),q[a][1][f](P),R[a][0][f](P)),d[l][n]===3&&(j=d[l][0][o](),j[u](d[l][1],.5),q[l][1][f](j),R[l][0][f](j)),W=0):T>=x&&T>=N?(M=w[o](),M[u](E,.5),q.a=v,q.b=m,q.c=L,R.a=L,R.b=g,R.c=v,d[a][n]===3&&(P=d[a][1][o](),P[u](d[a][2],.5),q[a][2][f](P),R[a][0][f](P),R[a][1][f](d[a][2]),R[a][2][f](d[a][0])),d[l][n]===3&&(j=d[l][1][o](),j[u](d[l][2],.5),q[l][2][f](j),R[l][0][f](j),R[l][1][f](d[l][2]),R[l][2][f](d[l][0])),W=1):(M=b[o](),M[u](E,.5),q.a=v,q.b=m,q.c=L,R.a=L,R.b=m,R.c=g,d[a][n]===3&&(P=d[a][0][o](),P[u](d[a][2],.5),q[a][2][f](P),R[a][0][f](P)),d[l][n]===3&&(j=d[l][0][o](),j[u](d[l][2],.5),q[l][2][f](j),R[l][0][f](j)),W=2),X[c](q,R),e[i][c](M);var $,J,K,Q,G,Y,Z,et,tt;for($=0,J=e[r][n];$<J;$++)e[r][$][n]&&(K=e[r][$][h],Q=K[0],G=K[1],Y=K[2],W===0?(Z=Q[o](),Z[u](G,.5),et=[Q[o](),Z[o](),Y[o]()],tt=[Z[o](),G[o](),Y[o]()]):W===1?(Z=G[o](),Z[u](Y,.5),et=[Q[o](),G[o](),Z[o]()],tt=[Z[o](),Y[o](),Q[o]()]):(Z=Q[o](),Z[u](Y,.5),et=[Q[o](),G[o](),Z[o]()],tt=[Z[o](),G[o](),Y[o]()]),V[$][c](et,tt))}else{X[c](d);for($=0,J=e[r][n];$<J;$++)V[$][c](e[r][$][h])}}else{v=d.a,m=d.b,g=d.c,y=d.d,b=e[i][v],w=e[i][m],E=e[i][g],S=e[i][y],x=b[s](w),T=w[s](E),C=E[s](S),k=b[s](S);if(x>t||T>t||C>t||k>t){A=e[i][n],O=e[i][n]+1,U=d[o](),z=d[o](),x>=T&&x>=C&&x>=k||C>=T&&C>=x&&C>=k?(_=b[o](),_[u](w,.5),D=E[o](),D[u](S,.5),U.a=v,U.b=A,U.c=O,U.d=y,z.a=A,z.b=m,z.c=g,z.d=O,d[a][n]===4&&(H=d[a][0][o](),H[u](d[a][1],.5),B=d[a][2][o](),B[u](d[a][3],.5),U[a][1][f](H),U[a][2][f](B),z[a][0][f](H),z[a][3][f](B)),d[l][n]===4&&(F=d[l][0][o](),F[u](d[l][1],.5),I=d[l][2][o](),I[u](d[l][3],.5),U[l][1][f](F),U[l][2][f](I),z[l][0][f](F),z[l][3][f](I)),W=0):(_=w[o](),_[u](E,.5),D=S[o](),D[u](b,.5),U.a=v,U.b=m,U.c=A,U.d=O,z.a=O,z.b=A,z.c=g,z.d=y,d[a][n]===4&&(H=d[a][1][o](),H[u](d[a][2],.5),B=d[a][3][o](),B[u](d[a][0],.5),U[a][2][f](H),U[a][3][f](B),z[a][0][f](B),z[a][1][f](H)),d[l][n]===4&&(F=d[l][1][o](),F[u](d[l][2],.5),I=d[l][3][o](),I[u](d[l][0],.5),U[l][2][f](F),U[l][3][f](I),z[l][0][f](I),z[l][1][f](F)),W=1),X[c](U,z),e[i][c](_,D);var $,J,K,Q,G,Y,nt,rt,it,st,ot;for($=0,J=e[r][n];$<J;$++)e[r][$][n]&&(K=e[r][$][h],Q=K[0],G=K[1],Y=K[2],nt=K[3],W===0?(rt=Q[o](),rt[u](G,.5),it=Y[o](),it[u](nt,.5),st=[Q[o](),rt[o](),it[o](),nt[o]()],ot=[rt[o](),G[o](),Y[o](),it[o]()]):(rt=G[o](),rt[u](Y,.5),it=nt[o](),it[u](Q,.5),st=[Q[o](),G[o](),rt[o](),it[o]()],ot=[it[o](),rt[o](),Y[o](),nt[o]()]),V[$][c](st,ot))}else{X[c](d);for($=0,J=e[r][n];$<J;$++)V[$][c](e[r][$][h])}}}e.faces=X,e[r]=V}},THREE.GeometryUtils.random=THREE.Math.random16,THREE.GeometryUtils.__v1=new THREE.Vector3,THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(e,t,n,r){var i="addEventListener",s="crossOrigin",o=new Image,u=new THREE.Texture(o,t),a=new THREE.ImageLoader;return a[i]("load",function(e){u.image=e.content,u.needsUpdate=!0,n&&n(u)}),a[i]("error",function(e){r&&r(e.message)}),a[s]=this[s],a.load(e,o),u},loadCompressedTexture:function(e,t,n,r){var i=!0,s=new THREE.CompressedTexture;s.mapping=t;var o=new XMLHttpRequest;return o.onload=function(){var e=o.response,t=THREE.ImageUtils.parseDDS(e,i);s.format=t.format,s.mipmaps=t.mipmaps,s.image.width=t.width,s.image.height=t.height,s.generateMipmaps=!1,s.needsUpdate=i,n&&n(s)},o.onerror=r,o.open("GET",e,i),o.responseType="arraybuffer",o.send(null),s},loadTextureCube:function(e,t,n,r){var i="loadCount",s="crossOrigin",o=[];o[i]=0;var u=new THREE.Texture;u.image=o,t!==undefined&&(u.mapping=t),u.flipY=!1;for(var a=0,f=e.length;a<f;++a){var l=new Image;o[a]=l,l.onload=function(){o[i]+=1,o[i]===6&&(u.needsUpdate=!0,n&&n())},l.onerror=r,l[s]=this[s],l.src=e[a]}return u},loadCompressedTextureCube:function(e,t,n,r){var i="loadCount",s=!0,o="format",u=[];u[i]=0;var a=new THREE.CompressedTexture;a.image=u,t!==undefined&&(a.mapping=t),a.flipY=!1,a.generateMipmaps=!1;var f=function(e,t){return function(){var r=e.response,f=THREE.ImageUtils.parseDDS(r,s);t[o]=f[o],t.mipmaps=f.mipmaps,t.width=f.width,t.height=f.height,u[i]+=1,u[i]===6&&(a[o]=f[o],a.needsUpdate=s,n&&n())}};for(var l=0,c=e.length;l<c;++l){var h={};u[l]=h;var p=new XMLHttpRequest;p.onload=f(p,h),p.onerror=r;var d=e[l];p.open("GET",d,s),p.responseType="arraybuffer",p.send(null)}return a},parseDDS:function(e,t){function _(e){return e[n](0)+(e[n](1)<<8)+(e[n](2)<<16)+(e[n](3)<<24)}function D(e){return String.fromCharCode(e&255,e>>8&255,e>>16&255,e>>24&255)}var n="charCodeAt",r="format",i="mipmapCount",s={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},o=542327876,u=1,a=2,f=4,l=8,c=4096,h=131072,p=524288,d=8388608,v=8,m=4194304,g=4096,y=512,b=1024,w=2048,E=4096,S=8192,x=16384,T=32768,N=2097152,C=1,k=2,L=4,A=64,O=512,M=131072,P=_("DXT1"),H=_("DXT3"),B=_("DXT5"),j=31,F=0,I=1,q=2,R=3,U=4,z=7,W=20,X=21,V=new Int32Array(e,0,j);if(V[F]!==o)return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),s;if(!V[W]&L)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),s;var $,J=V[X];switch(J){case P:$=8,s[r]=THREE.RGB_S3TC_DXT1_Format;break;case H:$=16,s[r]=THREE.RGBA_S3TC_DXT3_Format;break;case B:$=16,s[r]=THREE.RGBA_S3TC_DXT5_Format;break;default:return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",D(J)),s}s[i]=1,V[q]&h&&t!==!1&&(s[i]=Math.max(1,V[z])),s.width=V[U],s.height=V[R];var K=V[I]+4,Q=s.width,G=s.height;for(var Y=0;Y<s[i];Y++){var Z=Math.max(4,Q)/4*Math.max(4,G)/4*$,et=new Uint8Array(e,K,Z),tt={data:et,width:Q,height:G};s.mipmaps.push(tt),K+=Z,Q=Math.max(Q*.5,1),G=Math.max(G*.5,1)}return s},getNormalMap:function(e,t){var n="push",r="length",i=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},s=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},o=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t|=1;var u=e.width,a=e.height,f=document.createElement("canvas");f.width=u,f.height=a;var l=f.getContext("2d");l.drawImage(e,0,0);var c=l.getImageData(0,0,u,a).data,h=l.createImageData(u,a),p=h.data;for(var d=0;d<u;d++)for(var v=0;v<a;v++){var m=v-1<0?0:v-1,g=v+1>a-1?a-1:v+1,y=d-1<0?0:d-1,b=d+1>u-1?u-1:d+1,w=[],E=[0,0,c[(v*u+d)*4]/255*t];w[n]([-1,0,c[(v*u+y)*4]/255*t]),w[n]([-1,-1,c[(m*u+y)*4]/255*t]),w[n]([0,-1,c[(m*u+d)*4]/255*t]),w[n]([1,-1,c[(m*u+b)*4]/255*t]),w[n]([1,0,c[(v*u+b)*4]/255*t]),w[n]([1,1,c[(g*u+b)*4]/255*t]),w[n]([0,1,c[(g*u+d)*4]/255*t]),w[n]([-1,1,c[(g*u+y)*4]/255*t]);var S=[],x=w[r];for(var T=0;T<x;T++){var N=w[T],C=w[(T+1)%x];N=s(N,E),C=s(C,E),S[n](o(i(N,C)))}var k=[0,0,0];for(var T=0;T<S[r];T++)k[0]+=S[T][0],k[1]+=S[T][1],k[2]+=S[T][2];k[0]/=S[r],k[1]/=S[r],k[2]/=S[r];var L=(v*u+d)*4;p[L]=(k[0]+1)/2*255|0,p[L+1]=(k[1]+1)/2*255|0,p[L+2]=k[2]*255|0,p[L+3]=255}return l.putImageData(h,0,0),f},generateDataTexture:function(e,t,n){var r=e*t,i=new Uint8Array(3*r),s=Math.floor(n.r*255),o=Math.floor(n.g*255),u=Math.floor(n.b*255);for(var a=0;a<r;a++)i[a*3]=s,i[a*3+1]=o,i[a*3+2]=u;var f=new THREE.DataTexture(i,e,t,THREE.RGBFormat);return f.needsUpdate=!0,f}},THREE.SceneUtils={showHierarchy:function(e,t){THREE.SceneUtils.traverseHierarchy(e,function(e){e.visible=t})},traverseHierarchy:function(e,t){var n,r,i=e.children.length;for(r=0;r<i;r++)n=e.children[r],t(n),THREE.SceneUtils.traverseHierarchy(n,t)},createMultiMaterialObject:function(e,t){var n,r=t.length,i=new THREE.Object3D;for(n=0;n<r;n++){var s=new THREE.Mesh(e,t[n]);i.add(s)}return i},cloneObject:function(e){var t="MorphAnimMesh",n="geometry",r="material",i="mirroredLoop",s="lastKeyframe",o="currentKeyframe",u="directionBackwards",a="SkinnedMesh",f="ParticleSystem",l="sortParticles",c="copy",h="useScreenCoordinates",p="mergeWith3D",d="affectedByDistance",v="scaleByViewport",m="rotation3d",g="rotation",y="parent",b="eulerOrder",w="renderDepth",E="rotationAutoUpdate",S="matrixWorld",x="matrixRotationWorld",T="matrixAutoUpdate",N="matrixWorldNeedsUpdate",C="quaternion",k="useQuaternion",L="boundRadius",A="boundRadiusScale",O="castShadow",M="receiveShadow",_="frustumCulled",D="children",P;e instanceof THREE[t]?(P=new THREE[t](e[n],e[r]),P.duration=e.duration,P[i]=e[i],P.time=e.time,P[s]=e[s],P[o]=e[o],P.direction=e.direction,P[u]=e[u]):e instanceof THREE[a]?P=new THREE[a](e[n],e[r],e.useVertexTexture):e instanceof THREE.Mesh?P=new THREE.Mesh(e[n],e[r]):e instanceof THREE.Line?P=new THREE.Line(e[n],e[r],e.type):e instanceof THREE.Ribbon?P=new THREE.Ribbon(e[n],e[r]):e instanceof THREE[f]?(P=new THREE[f](e[n],e[r]),P[l]=e[l]):e instanceof THREE.Particle?P=new THREE.Particle(e[r]):e instanceof THREE.Sprite?(P=new THREE.Sprite({}),P.color[c](e.color),P.map=e.map,P.blending=e.blending,P[h]=e[h],P[p]=e[p],P[d]=e[d],P[v]=e[v],P.alignment=e.alignment,P[m][c](e[m]),P[g]=e[g],P.opacity=e.opacity,P.uvOffset[c](e.uvOffset),P.uvScale[c](e.uvScale)):e instanceof THREE.LOD?P=new THREE.LOD:e instanceof THREE.Object3D&&(P=new THREE.Object3D),P.name=e.name,P[y]=e[y],P.up[c](e.up),P.position[c](e.position),P[g]instanceof THREE.Vector3&&P[g][c](e[g]),P[b]=e[b],P.scale[c](e.scale),P.dynamic=e.dynamic,P[w]=e[w],P[E]=e[E],P.matrix[c](e.matrix),P[S][c](e[S]),P[x][c](e[x]),P[T]=e[T],P[N]=e[N],P[C][c](e[C]),P[k]=e[k],P[L]=e[L],P[A]=e[A],P.visible=e.visible,P[O]=e[O],P[M]=e[M],P[_]=e[_];for(var H=0;H<e[D].length;H++){var B=THREE.SceneUtils.cloneObject(e[D][H]);P[D][H]=B,B[y]=P}if(e instanceof THREE.LOD)for(var H=0;H<e.LODs.length;H++){var j=e.LODs[H];P.LODs[H]={visibleAtDistance:j.visibleAtDistance,object3D:P[D][H]}}return P},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new THREE.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},function(){var e="t",t=null,n="join",r="varying vec2 vUv;",i="void main() {",s="gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",o="}",u="uniform sampler2D tDiffuse;",a="f",f="uniform samplerCube tCube;",l="varying vec3 vReflect;",c="varying vec3 vRefract[3];",h="varying float vReflectionFactor;",p="\n",d="vec4 mPosition = modelMatrix * vec4( position, 1.0 );",v="gl_Position = projectionMatrix * mvPosition;",m="UniformsLib",g="i",y="v2",b="Vector2",w="varying vec3 vTangent;",E="varying vec3 vBinormal;",S="varying vec3 vNormal;",x="#if MAX_DIR_LIGHTS > 0",T="#endif",N="#if MAX_HEMI_LIGHTS > 0",C="#if MAX_POINT_LIGHTS > 0",k="#if MAX_SPOT_LIGHTS > 0",L="#ifdef WRAP_AROUND",A="varying vec3 vWorldPosition;",O="varying vec3 vViewPosition;",M="ShaderChunk",_="#ifdef GAMMA_INPUT",D="#else",P="#ifdef PHYSICALLY_BASED_SHADING",H="float specularNormalization = ( uShininess + 2.0001 ) / 8.0;",B="AnimationHandler";THREE.WebGLRenderer&&(THREE.ShaderUtils={lib:{additive:{uniforms:{tDiffuse:{type:e,value:0,texture:t},tAdd:{type:e,value:1,texture:t}},vertexShader:[r,i,"vUv = vec2( uv.x, 1.0 - uv.y );",s,o][n]("n"),fragmentShader:[u,"uniform sampler2D tAdd;",r,i,"vec4 texel = texture2D( tDiffuse, vUv );","vec4 glow = texture2D( tAdd, vUv );","gl_FragColor = texel + vec4(0.5, 0.75, 1.0, 1.0) * glow * 2.0;",o][n]("n")},fresnel:{uniforms:{mRefractionRatio:{type:a,value:1.02},mFresnelBias:{type:a,value:.1},mFresnelPower:{type:a,value:2},mFresnelScale:{type:a,value:1},tCube:{type:e,value:t}},fragmentShader:[f,l,c,h,i,"vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","vec4 refractedColor = vec4( 1.0, 1.0, 1.0, 1.0 );","refractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;","refractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;","refractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;","refractedColor.a = 1.0;","gl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );",o][n](p),vertexShader:["uniform float mRefractionRatio;","uniform float mFresnelBias;","uniform float mFresnelScale;","uniform float mFresnelPower;",l,c,h,i,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",d,"vec3 nWorld = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );","vec3 I = mPosition.xyz - cameraPosition;","vReflect = reflect( I, nWorld );","vRefract[0] = refract( normalize( I ), nWorld, mRefractionRatio );","vRefract[1] = refract( normalize( I ), nWorld, mRefractionRatio * 0.99 );","vRefract[2] = refract( normalize( I ), nWorld, mRefractionRatio * 0.98 );","vReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), nWorld ), mFresnelPower );",v,o][n](p)},normal:{uniforms:THREE.UniformsUtils.merge([THREE[m].common,THREE[m].fog,THREE[m].lights,THREE[m].shadowmap,{enableAO:{type:g,value:0},enableDiffuse:{type:g,value:0},enableSpecular:{type:g,value:0},enableReflection:{type:g,value:0},enableDisplacement:{type:g,value:0},tDisplacement:{type:e,value:t},tDiffuse:{type:e,value:t},tCube:{type:e,value:t},tNormal:{type:e,value:t},tSpecular:{type:e,value:t},tAO:{type:e,value:t},uNormalScale:{type:y,value:new THREE[b](1,1)},uDisplacementBias:{type:a,value:0},uDisplacementScale:{type:a,value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:a,value:30},uOpacity:{type:a,value:1},useRefract:{type:g,value:0},uRefractionRatio:{type:a,value:.98},uReflectivity:{type:a,value:.5},uOffset:{type:y,value:new THREE[b](0,0)},uRepeat:{type:y,value:new THREE[b](1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;","uniform vec3 uDiffuseColor;","uniform vec3 uSpecularColor;","uniform float uShininess;","uniform float uOpacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;",u,"uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;",f,"uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float uRefractionRatio;","uniform float uReflectivity;",w,E,S,r,"uniform vec3 ambientLightColor;",x,"uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];",T,N,"uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightPosition[ MAX_HEMI_LIGHTS ];",T,C,"uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];",T,k,"uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];"
,"uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngle[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];",T,L,"uniform vec3 wrapRGB;",T,A,O,THREE[M].shadowmap_pars_fragment,THREE[M].fog_pars_fragment,i,"gl_FragColor = vec4( vec3( 1.0 ), uOpacity );","vec3 specularTex = vec3( 1.0 );","vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","normalTex.xy *= uNormalScale;","normalTex = normalize( normalTex );","if( enableDiffuse ) {",_,"vec4 texelColor = texture2D( tDiffuse, vUv );","texelColor.xyz *= texelColor.xyz;","gl_FragColor = gl_FragColor * texelColor;",D,"gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );",T,o,"if( enableAO ) {",_,"vec4 aoColor = texture2D( tAO, vUv );","aoColor.xyz *= aoColor.xyz;","gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;",D,"gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;",T,o,"if( enableSpecular )","specularTex = texture2D( tSpecular, vUv ).xyz;","mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","vec3 finalNormal = tsb * normalTex;","#ifdef FLIP_SIDED","finalNormal = -finalNormal;",T,"vec3 normal = normalize( finalNormal );","vec3 viewPosition = normalize( vViewPosition );",C,"vec3 pointDiffuse = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","float pointDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","pointVector = normalize( pointVector );",L,"float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );",D,"float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );",T,"pointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;","vec3 pointHalfVector = normalize( pointVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );",P,H,"vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;",D,"pointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;",T,o,T,k,"vec3 spotDiffuse = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","float spotDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","spotVector = normalize( spotVector );","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngle[ i ] ) {","spotEffect = pow( spotEffect, spotLightExponent[ i ] );",L,"float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );",D,"float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );",T,"spotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;","vec3 spotHalfVector = normalize( spotVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );",P,H,"vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;",D,"spotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;",T,o,o,T,x,"vec3 dirDiffuse = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );",L,"float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );",D,"float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );",T,"dirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );",P,H,"vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;",D,"dirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;",T,o,T,N,"vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( hemisphereLightPosition[ i ], 1.0 );","vec3 lVector = normalize( lPosition.xyz + vViewPosition.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += uDiffuseColor * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );","vec3 lVectorGround = normalize( -lPosition.xyz + vViewPosition.xyz );","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );",P,"float dotProductGround = dot( normal, lVectorGround );",H,"vec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );",D,"hemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;",T,o,T,"vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );",x,"totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;",T,N,"totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;",T,C,"totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;",T,k,"totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;",T,"#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );",D,"gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;",T,"if ( enableReflection ) {","vec3 vReflect;","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, normal, uRefractionRatio );","} else {","vReflect = reflect( cameraToVertex, normal );",o,"vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );",_,"cubeColor.xyz *= cubeColor.xyz;",T,"gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );",o,THREE[M].shadowmap_fragment,THREE[M].linear_to_gamma_fragment,THREE[M].fog_fragment,o][n](p),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","uniform sampler2D tDisplacement;","uniform float uDisplacementScale;","uniform float uDisplacementBias;",T,w,E,S,r,A,O,THREE[M].morphtarget_pars_vertex,THREE[M].skinning_pars_vertex,THREE[M].shadowmap_pars_vertex,i,THREE[M].morphnormal_vertex,THREE[M].skinbase_vertex,THREE[M].skinnormal_vertex,THREE[M].morphtarget_vertex,"#ifdef USE_SKINNING","vNormal = normalMatrix * skinnedNormal.xyz;","vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","vTangent = normalMatrix * skinnedTangent.xyz;",D,"vNormal = normalMatrix * normal;","vTangent = normalMatrix * tangent.xyz;",T,"vBinormal = cross( vNormal, vTangent ) * tangent.w;","vUv = uv * uRepeat + uOffset;",THREE[M].skinning_vertex,THREE[M].default_vertex,THREE[M].worldpos_vertex,v,"vWorldPosition = mPosition.xyz;","vViewPosition = -mvPosition.xyz;","#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * mPosition;",o,T,o][n](p)},cube:{uniforms:{tCube:{type:e,value:t},tFlip:{type:a,value:-1}},vertexShader:[O,i,d,"vViewPosition = cameraPosition - mPosition.xyz;",s,o][n](p),fragmentShader:[f,"uniform float tFlip;",O,i,"vec3 wPos = cameraPosition - vViewPosition;","gl_FragColor = textureCube( tCube, vec3( tFlip * wPos.x, wPos.yz ) );",o][n](p)}}}),THREE.Animation=function(e,t,n){this.root=e,this.data=THREE[B].get(t),this.hierarchy=THREE[B].parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.interpolationType=n!==undefined?n:THREE[B].LINEAR,this.points=[],this.target=new THREE.Vector3}}(),THREE.Animation.prototype.play=function(e,t){var n=!0,r="hierarchy",i="AnimationHandler",s="animationCache",o="getNextKeyWith";if(this.isPlaying===!1){this.isPlaying=n,this.loop=e!==undefined?e:n,this.currentTime=t!==undefined?t:0;var u,a=this[r].length,f;for(u=0;u<a;u++){f=this[r][u],this.interpolationType!==THREE[i].CATMULLROM_FORWARD&&(f.useQuaternion=n),f.matrixAutoUpdate=n,f[s]===undefined&&(f[s]={},f[s].prevKey={pos:0,rot:0,scl:0},f[s].nextKey={pos:0,rot:0,scl:0},f[s].originalMatrix=f instanceof THREE.Bone?f.skinMatrix:f.matrix);var l=f[s].prevKey,c=f[s].nextKey;l.pos=this.data[r][u].keys[0],l.rot=this.data[r][u].keys[0],l.scl=this.data[r][u].keys[0],c.pos=this[o]("pos",u,1),c.rot=this[o]("rot",u,1),c.scl=this[o]("scl",u,1)}this.update(0)}this.isPaused=!1,THREE[i].addToUpdate(this)},function(){var e="isPaused",t="AnimationHandler",n="removeFromUpdate";THREE.Animation.prototype.pause=function(){this[e]===!0?THREE[t].addToUpdate(this):THREE[t][n](this),this[e]=!this[e]},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,this[e]=!1,THREE[t][n](this)}}(),THREE.Animation.prototype.update=function(e){var t="pos",n="hierarchy",r="data",i="currentTime",s="length",o="time",u="getNextKeyWith",a="index",f="interpolationType",l="AnimationHandler",c="CATMULLROM_FORWARD",h="points",p="interpolateCatmullRom",d="target";if(this.isPlaying===!1)return;var v=[t,"rot","scl"],m,g,y,b,w,E,S,x,T,N,C=this[r].JIT[n],k,L,A,O,M;this[i]+=e*this.timeScale,L=this[i],k=this[i]=this[i]%this[r][s],N=parseInt(Math.min(k*this[r].fps,this[r][s]*this[r].fps),10);for(var _=0,D=this[n][s];_<D;_++){x=this[n][_],T=x.animationCache;for(var P=0;P<3;P++){m=v[P],E=T.prevKey[m],S=T.nextKey[m];if(S[o]<=L){if(k<L){if(!this.loop){this.stop();return}E=this[r][n][_].keys[0],S=this[u](m,_,1);while(S[o]<k)E=S,S=this[u](m,_,S[a]+1)}else do E=S,S=this[u](m,_,S[a]+1);while(S[o]<k);T.prevKey[m]=E,T.nextKey[m]=S}x.matrixAutoUpdate=!0,x.matrixWorldNeedsUpdate=!0,g=(k-E[o])/(S[o]-E[o]),b=E[m],w=S[m];if(g<0||g>1)console.log("THREE.Animation.update: Warning! Scale out of bounds:"+g+" on bone "+_),g=g<0?0:1;if(m===t){y=x.position;if(this[f]===THREE[l].LINEAR)y.x=b[0]+(w[0]-b[0])*g,y.y=b[1]+(w[1]-b[1])*g,y.z=b[2]+(w[2]-b[2])*g;else if(this[f]===THREE[l].CATMULLROM||this[f]===THREE[l][c])this[h][0]=this.getPrevKeyWith(t,_,E[a]-1)[t],this[h][1]=b,this[h][2]=w,this[h][3]=this[u](t,_,S[a]+1)[t],g=g*.33+.33,A=this[p](this[h],g),y.x=A[0],y.y=A[1],y.z=A[2],this[f]===THREE[l][c]&&(O=this[p](this[h],g*1.01),this[d].set(O[0],O[1],O[2]),this[d].subSelf(y),this[d].y=0,this[d].normalize(),M=Math.atan2(this[d].x,this[d].z),x.rotation.set(0,M,0))}else m==="rot"?THREE.Quaternion.slerp(b,w,x.quaternion,g):m==="scl"&&(y=x.scale,y.x=b[0]+(w[0]-b[0])*g,y.y=b[1]+(w[1]-b[1])*g,y.z=b[2]+(w[2]-b[2])*g)}}},THREE.Animation.prototype.interpolateCatmullRom=function(e,t){var n="length",r="interpolate",i=[],s=[],o,u,a,f,l,c,h,p,d;return o=(e[n]-1)*t,u=Math.floor(o),a=o-u,i[0]=u===0?u:u-1,i[1]=u,i[2]=u>e[n]-2?u:u+1,i[3]=u>e[n]-3?u:u+2,c=e[i[0]],h=e[i[1]],p=e[i[2]],d=e[i[3]],f=a*a,l=a*f,s[0]=this[r](c[0],h[0],p[0],d[0],a,f,l),s[1]=this[r](c[1],h[1],p[1],d[1],a,f,l),s[2]=this[r](c[2],h[2],p[2],d[2],a,f,l),s},THREE.Animation.prototype.interpolate=function(e,t,n,r,i,s,o){var u=(n-e)*.5,a=(r-t)*.5;return(2*(t-n)+u+a)*o+(-3*(t-n)-2*u-a)*s+u*i+t},THREE.Animation.prototype.getNextKeyWith=function(e,t,n){var r="interpolationType",i="AnimationHandler",s="length",o=this.data.hierarchy[t].keys;this[r]===THREE[i].CATMULLROM||this[r]===THREE[i].CATMULLROM_FORWARD?n=n<o[s]-1?n:o[s]-1:n%=o[s];for(;n<o[s];n++)if(o[n][e]!==undefined)return o[n];return this.data.hierarchy[t].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(e,t,n){var r="interpolationType",i="AnimationHandler",s=this.data.hierarchy[t].keys;this[r]===THREE[i].CATMULLROM||this[r]===THREE[i].CATMULLROM_FORWARD?n=n>0?n:0:n=n>=0?n:n+s.length;for(;n>=0;n--)if(s[n][e]!==undefined)return s[n];return this.data.hierarchy[t].keys[s.length-1]},THREE.AnimationHandler=function(){var e="length",t="initialized",n="hierarchy",r="keys",i="Quaternion",s="morphTargets",o="morphTargetsInfluences",u=[],a={},f={};f.update=function(t){for(var n=0;n<u[e];n++)u[n].update(t)},f.addToUpdate=function(e){u.indexOf(e)===-1&&u.push(e)},f.removeFromUpdate=function(e){var t=u.indexOf(e);t!==-1&&u.splice(t,1)},f.add=function(e){a[e.name]!==undefined&&console.log("THREE.AnimationHandler.add: Warning! "+e.name+" already exists in library. Overwriting."),a[e.name]=e,c(e)},f.get=function(e){if(typeof e=="string")return a[e]?a[e]:(console.log("THREE.AnimationHandler.get: Couldn't find animation "+e),null)},f.parse=function(t){var n=[];if(t instanceof THREE.SkinnedMesh)for(var r=0;r<t.bones[e];r++)n.push(t.bones[r]);else l(t,n);return n};var l=function(t,n){n.push(t);for(var r=0;r<t.children[e];r++)l(t.children[r],n)},c=function(u){if(u[t]===!0)return;for(var a=0;a<u[n][e];a++){for(var f=0;f<u[n][a][r][e];f++){u[n][a][r][f].time<0&&(u[n][a][r][f].time=0);if(u[n][a][r][f].rot!==undefined&&!(u[n][a][r][f].rot instanceof THREE[i])){var l=u[n][a][r][f].rot;u[n][a][r][f].rot=new THREE[i](l[0],l[1],l[2],l[3])}}if(u[n][a][r][e]&&u[n][a][r][0][s]!==undefined){var c={};for(var f=0;f<u[n][a][r][e];f++)for(var h=0;h<u[n][a][r][f][s][e];h++){var p=u[n][a][r][f][s][h];c[p]=-1}u[n][a].usedMorphTargets=c;for(var f=0;f<u[n][a][r][e];f++){var d={};for(var p in c){for(var h=0;h<u[n][a][r][f][s][e];h++)if(u[n][a][r][f][s][h]===p){d[p]=u[n][a][r][f][o][h];break}h===u[n][a][r][f][s][e]&&(d[p]=0)}u[n][a][r][f][o]=d}}for(var f=1;f<u[n][a][r][e];f++)u[n][a][r][f].time===u[n][a][r][f-1].time&&(u[n][a][r].splice(f,1),f--);for(var f=0;f<u[n][a][r][e];f++)u[n][a][r][f].index=f}var v=parseInt(u[e]*u.fps,10);u.JIT={},u.JIT[n]=[];for(var a=0;a<u[n][e];a++)u.JIT[n].push(new Array(v));u[t]=!0};return f.LINEAR=0,f.CATMULLROM=1,f.CATMULLROM_FORWARD=2,f}(),THREE.AnimationMorphTarget=function(e,t){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.influence=1},THREE.AnimationMorphTarget.prototype.play=function(e,t){var n="hierarchy",r="animationCache";if(!this.isPlaying){this.isPlaying=!0,this.loop=e!==undefined?e:!0,this.currentTime=t!==undefined?t:0;for(var i=0;i<this[n].length;i++)this[n][i][r]===undefined&&(this[n][i][r]={},this[n][i][r].prevKey=0,this[n][i][r].nextKey=0),this[n][i][r].prevKey=this.data[n][i].keys[0],this[n][i][r].nextKey=this.data[n][i].keys[1];this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.AnimationMorphTarget.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.AnimationMorphTarget.prototype.stop=function(){var e="hierarchy",t="animationCache";this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this);for(var n=0;n<this[e].length;n++)this[e][n][t]!==undefined&&delete this[e][n][t]},THREE.AnimationMorphTarget.prototype.update=function(e){var t="currentTime",n="data",r="hierarchy",i="time",s="morphTargetsInfluences";if(!this.isPlaying)return;var o,u,a,f,l,c,h,p,d,v;this[t]+=e*this.timeScale,v=this[t],d=this[t]=this[t]%this[n].length;for(var m=0,g=this[r].length;m<g;m++){h=this[r][m],p=h.animationCache,l=p.prevKey,c=p.nextKey;if(c[i]<=v){if(d<v){if(!this.loop){this.stop();return}l=this[n][r][m].keys[0],c=this[n][r][m].keys[1];while(c[i]<d)l=c,c=this[n][r][m].keys[c.index+1]}else do l=c,c=this[n][r][m].keys[c.index+1];while(c[i]<d);p.prevKey=l,p.nextKey=c}o=(d-l[i])/(c[i]-l[i]);if(o<0||o>1)console.log("THREE.AnimationMorphTarget.update: Warning! Scale out of bounds:"+o),o=o<0?0:1;var y,b=l[s],w,E=c[s],S,x;for(S in b)y=b[S],w=E[S],x=this.root.getMorphTargetIndexByName(S),this.root.morphTargetInfluences[x]=(y+(w-y)*o)*this.influence}},THREE.KeyFrameAnimation=function(e,t,n){var r="AnimationHandler",i="hierarchy",s=!0,o="length";this.root=e,this.data=THREE[r].get(t),this[i]=THREE[r].parse(e),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=s,this.loop=s,this.JITCompile=n!==undefined?n:s;for(var u=0,a=this[i][o];u<a;u++){var f=this.data[i][u].keys,l=this.data[i][u].sids,c=this[i][u];if(f[o]&&l){for(var h=0;h<l[o];h++){var p=l[h],d=this.getNextKeyWith(p,u,0);d&&d.apply(p)}c.matrixAutoUpdate=!1,this.data[i][u].node.updateMatrix(),c.matrixWorldNeedsUpdate=s}}},THREE.KeyFrameAnimation.prototype.play=function(e,t){var n=!0,r="startTime",i="endTime",s="length",o="hierarchy",u="animationCache";if(!this.isPlaying){this.isPlaying=n,this.loop=e!==undefined?e:n,this.currentTime=t!==undefined?t:0,this.startTimeMs=t,this[r]=1e7,this[i]=-this[r];var a,f=this[o][s],l,c;for(a=0;a<f;a++){l=this[o][a],c=this.data[o][a],l.useQuaternion=n,c[u]===undefined&&(c[u]={},c[u].prevKey=null,c[u].nextKey=null,c[u].originalMatrix=l instanceof THREE.Bone?l.skinMatrix:l.matrix);var h=this.data[o][a].keys;h[s]&&(c[u].prevKey=h[0],c[u].nextKey=h[1],this[r]=Math.min(h[0].time,this[r]),this[i]=Math.max(h[h[s]-1].time,this[i]))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.KeyFrameAnimation.prototype.stop=function(){var e="hierarchy",t="animationCache",n="skinMatrix";this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this);for(var r=0;r<this.data[e].length;r++){var i=this[e][r],s=this.data[e][r];if(s[t]!==undefined){var o=s[t].originalMatrix;i instanceof THREE.Bone?(o.copy(i[n]),i[n]=o):(o.copy(i.matrix),i.matrix=o),delete s[t]}}},THREE.KeyFrameAnimation.prototype.update=function(e){var t="hierarchy",n="data",r="currentTime",i="length",s="startTimeMs",o="updateMatrix",u="matrixWorldNeedsUpdate",a=!0,f="JITCompile",l="skinMatrix",c="matrix",h="originalMatrix",p="time",d="interpolate";if(!this.isPlaying)return;var v,m,g,y,b,w=this[n].JIT[t],E,S,x;this[r]+=e*this.timeScale,S=this[r],E=this[r]=this[r]%this[n][i],E<this[s]&&(E=this[r]=this[s]+E),b=parseInt(Math.min(E*this[n].fps,this[n][i]*this[n].fps),10),x=E<S;if(x&&!this.loop){for(var T=0,N=this[t][i];T<N;T++){var C=this[n][t][T].keys,k=this[n][t][T].sids,L=C[i]-1,A=this[t][T];if(C[i]){for(var O=0;O<k[i];O++){var M=k[O],_=this.getPrevKeyWith(M,T,L);_&&_.apply(M)}this[n][t][T].node[o](),A[u]=a}}this.stop();return}if(E<this.startTime)return;for(var T=0,N=this[t][i];T<N;T++){g=this[t][T],y=this[n][t][T];var C=y.keys,D=y.animationCache;if(this[f]&&w[T][b]!==undefined)g instanceof THREE.Bone?(g[l]=w[T][b],g[u]=!1):(g[c]=w[T][b],g[u]=a);else if(C[i]){this[f]&&D&&(g instanceof THREE.Bone?g[l]=D[h]:g[c]=D[h]),v=D.prevKey,m=D.nextKey;if(v&&m){if(m[p]<=S){if(x&&this.loop){v=C[0],m=C[1];while(m[p]<E)v=m,m=C[v.index+1]}else if(!x){var P=C[i]-1;while(m[p]<E&&m.index!==P)v=m,m=C[v.index+1]}D.prevKey=v,D.nextKey=m}m[p]>=E?v[d](m,E):v[d](m,m[p])}this[n][t][T].node[o](),g[u]=a}}if(this[f]&&w[0][b]===undefined){this[t][0].updateMatrixWorld(a);for(var T=0;T<this[t][i];T++)this[t][T]instanceof THREE.Bone?w[T][b]=this[t][T][l].clone():w[T][b]=this[t][T][c].clone()}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;n%=r.length;for(;n<r.length;n++)if(r[n].hasTarget(e))return r[n];return r[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;n=n>=0?n:n+r.length;for(;n>=0;n--)if(r[n].hasTarget(e))return r[n];return r[r.length-1]},THREE.FirstPersonControls=function(e,t){function z(e,t){return function(){t.apply(e,arguments)}}var n="object",r="target",i="domElement",s="movementSpeed",o="lookVertical",u=!0,a="autoForward",f=!1,l="activeLook",c="heightSpeed",h="heightCoef",p="heightMin",d="constrainVertical",v="verticalMin",m="verticalMax",g="autoSpeedFactor",y="mouseX",b="mouseY",w="lat",E="phi",S="theta",x="moveForward",T="moveBackward",N="moveLeft",C="moveRight",k="freeze",L="mouseDragOn",A="viewHalfX",O="viewHalfY",M="handleResize",_="onMouseDown",D="preventDefault",P="stopPropagation",H="onMouseMove",B="moveUp",j="moveDown",F="position",I="translateZ",q="translateX",R="translateY",U="addEventListener";this[n]=e,this[r]=new THREE.Vector3(0,0,0),this[i]=t!==undefined?t:document,this[s]=1,this.lookSpeed=.005,this[o]=u,this[a]=f,this[l]=u,this[c]=f,this[h]=1,this[p]=0,this.heightMax=1,this[d]=f,this[v]=0,this[m]=Math.PI,this[g]=0,this[y]=0,this[b]=0,this[w]=0,this.lon=0,this[E]=0,this[S]=0,this[x]=f,this[T]=f,this[N]=f,this[C]=f,this[k]=f,this[L]=f,this[A]=0,this[O]=0,this[i]!==document&&this[i].setAttribute("tabindex",-1),this[M]=function(){this[i]===document?(this[A]=window.innerWidth/2,this[O]=window.innerHeight/2):(this[A]=this[i].offsetWidth/2,this[O]=this[i].offsetHeight/2)},this[_]=function(e){this[i]!==document&&this[i].focus(),e[D](),e[P]();if(this[l])switch(e.button){case 0:this[x]=u;break;case 2:this[T]=u}this[L]=u},this.onMouseUp=function(e){e[D](),e[P]();if(this[l])switch(e.button){case 0:this[x]=f;break;case 2:this[T]=f}this[L]=f},this[H]=function(e){this[i]===document?(this[y]=e.pageX-this[A],this[b]=e.pageY-this[O]):(this[y]=e.pageX-this[i].offsetLeft-this[A],this[b]=e.pageY-this[i].offsetTop-this[O])},this.onKeyDown=function(e){switch(e.keyCode){case 38:case 87:this[x]=u;break;case 37:case 65:this[N]=u;break;case 40:case 83:this[T]=u;break;case 39:case 68:this[C]=u;break;case 82:this[B]=u;break;case 70:this[j]=u;break;case 81:this[k]=!this[k]}},this.onKeyUp=function(e){switch(e.keyCode){case 38:case 87:this[x]=f;break;case 37:case 65:this[N]=f;break;case 40:case 83:this[T]=f;break;case 39:case 68:this[C]=f;break;case 82:this[B]=f;break;case 70:this[j]=f}},this.update=function(e){var t=0;if(this[k])return;if(this[c]){var i=THREE.Math.clamp(this[n][F].y,this[p],this.heightMax),u=i-this[p];this[g]=e*u*this[h]}else this[g]=0;t=e*this[s],(this[x]||this[a]&&!this[T])&&this[n][I](-(t+this[g])),this[T]&&this[n][I](t),this[N]&&this[n][q](-t),this[C]&&this[n][q](t),this[B]&&this[n][R](t),this[j]&&this[n][R](-t);var f=e*this.lookSpeed;this[l]||(f=0),this.lon+=this[y]*f,this[o]&&(this[w]-=this[b]*f),this[w]=Math.max(-85,Math.min(85,this[w])),this[E]=(90-this[w])*Math.PI/180,this[S]=this.lon*Math.PI/180;var L=this[r],A=this[n][F];L.x=A.x+100*Math.sin(this[E])*Math.cos(this[S]),L.y=A.y+100*Math.cos(this[E]),L.z=A.z+100*Math.sin(this[E])*Math.sin(this[S]);var O=1;this[d]&&(O=Math.PI/(this[m]-this[v])),this.lon+=this[y]*f,this[o]&&(this[w]-=this[b]*f*O),this[w]=Math.max(-85,Math.min(85,this[w])),this[E]=(90-this[w])*Math.PI/180,this[S]=this.lon*Math.PI/180,this[d]&&(this[E]=THREE.Math.mapLinear(this[E],0,Math.PI,this[v],this[m]));var L=this[r],A=this[n][F];L.x=A.x+100*Math.sin(this[E])*Math.cos(this[S]),L.y=A.y+100*Math.cos(this[E]),L.z=A.z+100*Math.sin(this[E])*Math.sin(this[S]),this[n].lookAt(L)},this[i][U]("contextmenu",function(e){e[D]()},f),this[i][U]("mousemove",z(this,this[H]),f),this[i][U]("mousedown",z(this,this[_]),f),this[i][U]("mouseup",z(this,this.onMouseUp),f),this[i][U]("keydown",z(this,this.onKeyDown),f),this[i][U]("keyup",z(this,this.onKeyUp),f),this[M]()},THREE.FlyControls=function(e,t){function B(e,t){return function(){t.apply(e,arguments)}}var n="object",r="domElement",i="movementSpeed",s="dragToLook",o=!1,u="autoForward",a=!0,f="tmpQuaternion",l="mouseStatus",c="moveState",h="moveVector",p="rotationVector",d="keydown",v="movementSpeedMultiplier",m="forward",g="pitchUp",y="pitchDown",b="yawLeft",w="yawRight",E="rollLeft",S="rollRight",x="updateMovementVector",T="updateRotationVector",N="keyup",C="mousedown",k="preventDefault",L="stopPropagation",A="moveForward",O="moveBackward",M="mousemove",_="getContainerDimensions",D="mouseup",P="quaternion",H="addEventListener";this[n]=e,this[r]=t!==undefined?t:document,t&&this[r].setAttribute("tabindex",-1),this[i]=1,this.rollSpeed=.005,this[s]=o,this[u]=o,this[n].useQuaternion=a,this[f]=new THREE.Quaternion,this[l]=0,this[c]={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this[h]=new THREE.Vector3(0,0,0),this[p]=new THREE.Vector3(0,0,0),this.handleEvent=function(e){typeof this[e.type]=="function"&&this[e.type](e)},this[d]=function(e){if(e.altKey)return;switch(e.keyCode){case 16:this[v]=.1;break;case 87:this[c][m]=1;break;case 83:this[c].back=1;break;case 65:this[c].left=1;break;case 68:this[c].right=1;break;case 82:this[c].up=1;break;case 70:this[c].down=1;break;case 38:this[c][g]=1;break;case 40:this[c][y]=1;break;case 37:this[c][b]=1;break;case 39:this[c][w]=1;break;case 81:this[c][E]=1;break;case 69:this[c][S]=1}this[x](),this[T]()},this[N]=function(e){switch(e.keyCode){case 16:this[v]=1;break;case 87:this[c][m]=0;break;case 83:this[c].back=0;break;case 65:this[c].left=0;break;case 68:this[c].right=0;break;case 82:this[c].up=0;break;case 70:this[c].down=0;break;case 38:this[c][g]=0;break;case 40:this[c][y]=0;break;case 37:this[c][b]=0;break;case 39:this[c][w]=0;break;case 81:this[c][E]=0;break;case 69:this[c][S]=0}this[x](),this[T]()},this[C]=function(e){this[r]!==document&&this[r].focus(),e[k](),e[L]();if(this[s])this[l]++;else switch(e.button){case 0:this[n][A]=a;break;case 2:this[n][O]=a}},this[M]=function(e){if(!this[s]||this[l]>0){var t=this[_](),n=t.size[0]/2,r=t.size[1]/2;this[c][b]=-(e.pageX-t.offset[0]-n)/n,this[c][y]=(e.pageY-t.offset[1]-r)/r,this[T]()}},this[D]=function(e){e[k](),e[L]();if(this[s])this[l]--,this[c][b]=this[c][y]=0;else switch(e.button){case 0:this[A]=o;break;case 2:this[O]=o}this[T]()},this.update=function(e){var t=e*this[i],r=e*this.rollSpeed;this[n].translateX(this[h].x*t),this[n].translateY(this[h].y*t),this[n].translateZ(this[h].z*t),this[f].set(this[p].x*r,this[p].y*r,this[p].z*r,1).normalize(),this[n][P].multiplySelf(this[f]),this[n].matrix.setPosition(this[n].position),this[n].matrix.setRotationFromQuaternion(this[n][P]),this[n].matrixWorldNeedsUpdate=a},this[x]=function(){var e=this[c][m]||this[u]&&!this[c].back?1:0;this[h].x=-this[c].left+this[c].right,this[h].y=-this[c].down+this[c].up,this[h].z=-e+this[c].back},this[T]=function(){this[p].x=-this[c][y]+this[c][g],this[p].y=-this[c][w]+this[c][b],this[p].z=-this[c][S]+this[c][E]},this[_]=function(){return this[r]!=document?{size:[this[r].offsetWidth,this[r].offsetHeight],offset:[this[r].offsetLeft,this[r].offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this[r][H](M,B(this,this[M]),o),this[r][H](C,B(this,this[C]),o),this[r][H](D,B(this,this[D]),o),this[r][H](d,B(this,this[d]),o),this[r][H](N,B(this,this[N]),o),this[x](),this[T]()},THREE.PlaneGeometry=function(e,t,n,r){THREE.Geometry.call(this);var i,s,o=e/2,u=t/2,a=n||1,f=r||1,l=a+1,c=f+1,h=e/a,p=t/f,d=new THREE.Vector3(0,0,1);for(s=0;s<c;s++)for(i=0;i<l;i++){var v=i*h-o,m=s*p-u;this.vertices.push(new THREE.Vector3(v,-m,0))}for(s=0;s<f;s++)for(i=0;i<a;i++){var g=i+l*s,y=i+l*(s+1),b=i+1+l*(s+1),w=i+1+l*s,E=new THREE.Face4(g,y,b,w);E.normal.copy(d),E.vertexNormals.push(d.clone(),d.clone(),d.clone(),d.clone()),this.faces.push(E),this.faceVertexUvs[0].push([new THREE.UV(i/a,1-s/f),new THREE.UV(i/a,1-(s+1)/f),new THREE.UV((i+1)/a,1-(s+1)/f),new THREE.UV((i+1)/a,1-s/f)])}this.computeCentroids()},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(e,t,n,r,i,s,o){var u="push",a="vertices",f="normalize",l="clone",c="faceVertexUvs";THREE.Geometry.call(this),e=e||50,r=r!==undefined?r:0,i=i!==undefined?i:Math.PI*2,s=s!==undefined?s:0,o=o!==undefined?o:Math.PI;var h=Math.max(3,Math.floor(t)||8),p=Math.max(2,Math.floor(n)||6),d,v,m=[],g=[];for(v=0;v<=p;v++){var y=[],b=[];for(d=0;d<=h;d++){var w=d/h,E=v/p,S=new THREE.Vector3;S.x=-e*Math.cos(r+w*i)*Math.sin(s+E*o),S.y=e*Math.cos(s+E*o),S.z=e*Math.sin(r+w*i)*Math.sin(s+E*o),this[a][u](S),y[u](this[a].length-1),b[u](new THREE.UV(w,1-E))}m[u](y),g[u](b)}for(v=0;v<p;v++)for(d=0;d<h;d++){var x=m[v][d+1],T=m[v][d],N=m[v+1][d],C=m[v+1][d+1],k=this[a][x][l]()[f](),L=this[a][T][l]()[f](),A=this[a][N][l]()[f](),O=this[a][C][l]()[f](),M=g[v][d+1][l](),_=g[v][d][l](),D=g[v+1][d][l](),P=g[v+1][d+1][l]();Math.abs(this[a][x].y)==e?(this.faces[u](new THREE.Face3(x,N,C,[k,A,O])),this[c][0][u]([M,D,P])):Math.abs(this[a][N].y)==e?(this.faces[u](new THREE.Face3(x,T,N,[k,L,A])),this[c][0][u]([M,_,D])):(this.faces[u](new THREE.Face4(x,T,N,C,[k,L,A,O])),this[c][0][u]([M,_,D,P]))}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere={radius:e}},function(){var e="prototype",t="create",n="ImmediateRenderObject",r="Object3D",i="LensFlare",s="lensFlares";THREE.SphereGeometry[e]=Object[t](THREE.Geometry[e]),THREE[n]=function(){THREE[r].call(this),this.render=function(e){}},THREE[n][e]=Object[t](THREE[r][e]),THREE[i]=function(e,t,n,i,o){THREE[r].call(this),this[s]=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=undefined,e!==undefined&&this.add(e,t,n,i,o)},THREE[i][e]=Object[t](THREE[r][e]),THREE[i][e].add=function(e,t,n,r,i,o){t===undefined&&(t=-1),n===undefined&&(n=0),o===undefined&&(o=1),i===undefined&&(i=new THREE.Color(16777215)),r===undefined&&(r=THREE.NormalBlending),n=Math.min(n,Math.max(0,n)),this[s].push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:i,blending:r})}}(),THREE.LensFlare.prototype.updateLensFlares=function(){var e="lensFlares",t="positionScreen",n="wantedRotation",r,i=this[e].length,s,o=-this[t].x*2,u=-this[t].y*2;for(r=0;r<i;r++)s=this[e][r],s.x=this[t].x+o*s.distance,s.y=this[t].y+u*s.distance,s[n]=s.x*Math.PI*.25,s.rotation+=(s[n]-s.rotation)*.25},THREE.DepthPassPlugin=function(){var e="renderTarget",t="ShaderMaterial",n="fragmentShader",r="vertexShader",i=!0,s="_shadowPass",o="render",u="clearColor",a="_viewMatrixArray",f="_projectionMatrixArray",l="matrixWorldInverse",c="matrixWorld",h="flattenToArray",p="projectionMatrix",d="multiply",v="length",m="object",g="_modelViewMatrix",y="customDepthMaterial",b="__lights";this.enabled=!1,this[e]=null;var w,E,S,x,T=new THREE.Frustum,N=new THREE.Matrix4;this.init=function(e){w=e.context,E=e;var o=THREE.ShaderLib.depthRGBA,u=THREE.UniformsUtils.clone(o.uniforms);S=new THREE[t]({fragmentShader:o[n],vertexShader:o[r],uniforms:u}),x=new THREE[t]({fragmentShader:o[n],vertexShader:o[r],uniforms:u,morphTargets:i}),S[s]=i,x[s]=i},this[o]=function(e,t){if(!this.enabled)return;this
.update(e,t)},this.update=function(t,n){var r,s,C,k,L,A,O,M,_,D,P,H,B=null;w[u](1,1,1,1),w.disable(w.BLEND),E.setDepthTest(i),E.autoUpdateScene&&t.updateMatrixWorld(),n[a]||(n[a]=new Float32Array(16)),n[f]||(n[f]=new Float32Array(16)),n[l].getInverse(n[c]),n[l][h](n[a]),n[p][h](n[f]),N[d](n[p],n[l]),T.setFromMatrix(N),E.setRenderTarget(this[e]),E.clear(),H=t.__webglObjects;for(C=0,k=H[v];C<k;C++)_=H[C],D=_[m],_[o]=!1,D.visible&&(!(D instanceof THREE.Mesh)||!D.frustumCulled||T.contains(D))&&(D[g][d](n[l],D[c]),_[o]=i);for(C=0,k=H[v];C<k;C++)_=H[C],_[o]&&(D=_[m],O=_.buffer,D.material&&E.setMaterialFaces(D.material),D[y]?M=D[y]:D.geometry.morphTargets[v]?M=x:M=S,O instanceof THREE.BufferGeometry?E.renderBufferDirect(n,t[b],B,M,O,D):E.renderBuffer(n,t[b],B,M,O,D));H=t.__webglObjectsImmediate;for(C=0,k=H[v];C<k;C++)_=H[C],D=_[m],D.visible&&D.castShadow&&(D[g][d](n[l],D[c]),E.renderImmediateObject(n,t[b],B,S,D));var j=E.getClearColor(),F=E.getClearAlpha();w[u](j.r,j.g,j.b,F),w.enable(w.BLEND)}},THREE.ShadowMapPlugin=function(){function st(t,n){var r=new THREE[w];r.isVirtual=f,r.onlyShadow=f,r[L]=f,r[s]=t[s],r[u]=t[u],r[b]=t[b],r[m]=t[m],r[d]=t[d],r[N]=t[N],r[e]=t[e],r[v]=t[v],r.shadowBias=t[U][n],r[p]=t.shadowCascadeWidth[n],r[a]=t.shadowCascadeHeight[n],r[P]=[],r[x]=[];var i=r[P],o=r[x];for(var l=0;l<8;l++)i[l]=new THREE[_],o[l]=new THREE[_];var c=t[j][n],h=t[z][n];return o[0][$](-1,-1,c),o[1][$](1,-1,c),o[2][$](-1,1,c),o[3][$](1,1,c),o[4][$](-1,-1,h),o[5][$](1,-1,h),o[6][$](-1,1,h),o[7][$](1,1,h),r}function ot(t,n){var r=t[i][n];r[y].copy(t[y]),r[M][y].copy(t[M][y]),r.lookAt(r[M]),r[e]=t[e],r[v]=t[v],r.shadowBias=t[U][n];var s=t[j][n],o=t[z][n],u=r[x];u[0].z=s,u[1].z=s,u[2].z=s,u[3].z=s,u[4].z=o,u[5].z=o,u[6].z=o,u[7].z=o}function ut(e,r){var i=r[n],s=r[x],o=r[P];rt[$](Infinity,Infinity,Infinity),it[$](-Infinity,-Infinity,-Infinity);for(var u=0;u<8;u++){var a=o[u];a.copy(s[u]),THREE.ShadowMapPlugin.__projector.unprojectVector(a,e),i[t].multiplyVector3(a),a.x<rt.x&&(rt.x=a.x),a.x>it.x&&(it.x=a.x),a.y<rt.y&&(rt.y=a.y),a.y>it.y&&(it.y=a.y),a.z<rt.z&&(rt.z=a.z),a.z>it.z&&(it.z=a.z)}i.left=rt.x,i.right=it.x,i.top=it.y,i.bottom=rt.y,i.updateProjectionMatrix()}var e="shadowCameraVisible",t="matrixWorldInverse",n="shadowCamera",r="cameraHelper",i="shadowCascadeArray",s="shadowCameraNear",o="_projectionMatrixArray",u="shadowCameraFar",a="shadowMapHeight",f=!0,l="ShaderMaterial",c="fragmentShader",h="matrixWorld",p="shadowMapWidth",d="shadowCameraBottom",v="shadowDarkness",m="shadowCameraRight",g="vertexShader",y="position",b="shadowCameraLeft",w="DirectionalLight",E="_viewMatrixArray",S="projectionMatrix",x="pointsFrustum",T="_shadowPass",N="shadowCameraTop",C="__lights",k="length",L="castShadow",A="shadowMapCullFrontFaces",O="customDepthMaterial",M="target",_="Vector3",D="updateMatrixWorld",P="pointsWorld",H="shadowMap",B="_modelViewMatrix",j="shadowCascadeNearZ",F="originalCamera",I="multiply",q="flattenToArray",R="cullFace",U="shadowCascadeBias",z="shadowCascadeFarZ",W="render",X="morphTargets",V="visible",$="set",J="multiplySelf",K,Q,G,Y,Z,et,tt=new THREE.Frustum,nt=new THREE.Matrix4,rt=new THREE[_],it=new THREE[_];this.init=function(e){K=e.context,Q=e;var t=THREE.ShaderLib.depthRGBA,n=THREE.UniformsUtils.clone(t.uniforms);G=new THREE[l]({fragmentShader:t[c],vertexShader:t[g],uniforms:n}),Y=new THREE[l]({fragmentShader:t[c],vertexShader:t[g],uniforms:n,morphTargets:f}),Z=new THREE[l]({fragmentShader:t[c],vertexShader:t[g],uniforms:n,skinning:f}),et=new THREE[l]({fragmentShader:t[c],vertexShader:t[g],uniforms:n,morphTargets:f,skinning:f}),G[T]=f,Y[T]=f,Z[T]=f,et[T]=f},this[W]=function(e,t){if(!Q.shadowMapEnabled||!Q.shadowMapAutoUpdate)return;this.update(e,t)},this.update=function(l,c){var v,g,x,T,_,P,j,U,z,rt,it,at,ft,lt,ct,ht=[],pt=0,dt=null;K.clearColor(1,1,1,1),K.disable(K.BLEND),K.enable(K.CULL_FACE),K.frontFace(K.CCW),Q[A]?K[R](K.FRONT):K[R](K.BACK),Q.setDepthTest(f);for(v=0,g=l[C][k];v<g;v++){lt=l[C][v];if(!lt[L])continue;if(lt instanceof THREE[w]&&lt.shadowCascade)for(_=0;_<lt.shadowCascadeCount;_++){var vt;if(!lt[i][_]){vt=st(lt,_),vt[F]=c;var mt=new THREE.Gyroscope;mt[y]=lt.shadowCascadeOffset,mt.add(vt),mt.add(vt[M]),c.add(mt),lt[i][_]=vt,console.log("Created virtualLight",vt)}else vt=lt[i][_];ot(lt,_),ht[pt]=vt,pt++}else ht[pt]=lt,pt++}for(v=0,g=ht[k];v<g;v++){lt=ht[v];if(!lt[H]){var gt={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat};lt[H]=new THREE.WebGLRenderTarget(lt[p],lt[a],gt),lt.shadowMapSize=new THREE.Vector2(lt[p],lt[a]),lt.shadowMatrix=new THREE.Matrix4}if(!lt[n]){if(lt instanceof THREE.SpotLight)lt[n]=new THREE.PerspectiveCamera(lt.shadowCameraFov,lt[p]/lt[a],lt[s],lt[u]);else{if(!(lt instanceof THREE[w])){console.error("Unsupported light type for shadow");continue}lt[n]=new THREE.OrthographicCamera(lt[b],lt[m],lt[N],lt[d],lt[s],lt[u])}l.add(lt[n]),Q.autoUpdateScene&&l[D]()}lt[e]&&!lt[r]&&(lt[r]=new THREE.CameraHelper(lt[n]),lt[n].add(lt[r])),lt.isVirtual&&vt[F]==c&&ut(c,lt),P=lt[H],j=lt.shadowMatrix,U=lt[n],U[y].copy(lt[h].getPosition()),U.lookAt(lt[M][h].getPosition()),U[D](),U[t].getInverse(U[h]),lt[r]&&(lt[r][V]=lt[e]),lt[e]&&lt[r].update(),j[$](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),j[J](U[S]),j[J](U[t]),U[E]||(U[E]=new Float32Array(16)),U[o]||(U[o]=new Float32Array(16)),U[t][q](U[E]),U[S][q](U[o]),nt[I](U[S],U[t]),tt.setFromMatrix(nt),Q.setRenderTarget(P),Q.clear(),ct=l.__webglObjects;for(x=0,T=ct[k];x<T;x++)at=ct[x],ft=at.object,at[W]=!1,ft[V]&&ft[L]&&(!(ft instanceof THREE.Mesh)||!ft.frustumCulled||tt.contains(ft))&&(ft[B][I](U[t],ft[h]),at[W]=f);for(x=0,T=ct[k];x<T;x++)at=ct[x],at[W]&&(ft=at.object,rt=at.buffer,ft[O]?it=ft[O]:ft instanceof THREE.SkinnedMesh?it=ft.geometry[X][k]?et:Z:ft.geometry[X][k]?it=Y:it=G,rt instanceof THREE.BufferGeometry?Q.renderBufferDirect(U,l[C],dt,it,rt,ft):Q.renderBuffer(U,l[C],dt,it,rt,ft));ct=l.__webglObjectsImmediate;for(x=0,T=ct[k];x<T;x++)at=ct[x],ft=at.object,ft[V]&&ft[L]&&(ft[B][I](U[t],ft[h]),Q.renderImmediateObject(U,l[C],dt,G,ft))}var yt=Q.getClearColor(),bt=Q.getClearAlpha();K.clearColor(yt.r,yt.g,yt.b,bt),K.enable(K.BLEND),Q[A]&&K[R](K.BACK)}},THREE.ShadowMapPlugin.__projector=new THREE.Projector,THREE.SpritePlugin=function(){function J(e){var t=X.createProgram(),n=X[R](X.FRAGMENT_SHADER),r=X[R](X.VERTEX_SHADER);return X[U](n,e.fragmentShader),X[U](r,e.vertexShader),X[z](n),X[z](r),X[W](t,n),X[W](t,r),X.linkProgram(t),t}function K(e,t){return t.z-e.z}var e="vertices",t="faces",n="vertexBuffer",r="createBuffer",i="elementBuffer",s="bindBuffer",o="ARRAY_BUFFER",u="bufferData",a="STATIC_DRAW",f="ELEMENT_ARRAY_BUFFER",l="program",c="attributes",h="uniforms",p="position",d="getAttribLocation",v="uvOffset",m="getUniformLocation",g="uvScale",y="rotation",b="scale",w="alignment",E="color",S="map",x="opacity",T="useScreenCoordinates",N="affectedByDistance",C="screenPosition",k="modelViewMatrix",L="projectionMatrix",A="attributesEnabled",O=!1,M=!0,_="enableVertexAttribArray",D="enable",P="vertexAttribPointer",H="uniformMatrix4fv",B="uniform1i",j="_modelViewMatrix",F="uniform2f",I="mergeWith3D",q="DEPTH_TEST",R="createShader",U="shaderSource",z="compileShader",W="attachShader",X,V,$={};this.init=function(M){X=M.context,V=M,$[e]=new Float32Array(16),$[t]=new Uint16Array(6);var _=0;$[e][_++]=-1,$[e][_++]=-1,$[e][_++]=0,$[e][_++]=0,$[e][_++]=1,$[e][_++]=-1,$[e][_++]=1,$[e][_++]=0,$[e][_++]=1,$[e][_++]=1,$[e][_++]=1,$[e][_++]=1,$[e][_++]=-1,$[e][_++]=1,$[e][_++]=0,$[e][_++]=1,_=0,$[t][_++]=0,$[t][_++]=1,$[t][_++]=2,$[t][_++]=0,$[t][_++]=2,$[t][_++]=3,$[n]=X[r](),$[i]=X[r](),X[s](X[o],$[n]),X[u](X[o],$[e],X[a]),X[s](X[f],$[i]),X[u](X[f],$[t],X[a]),$[l]=J(THREE.ShaderSprite.sprite),$[c]={},$[h]={},$[c][p]=X[d]($[l],p),$[c].uv=X[d]($[l],"uv"),$[h][v]=X[m]($[l],v),$[h][g]=X[m]($[l],g),$[h][y]=X[m]($[l],y),$[h][b]=X[m]($[l],b),$[h][w]=X[m]($[l],w),$[h][E]=X[m]($[l],E),$[h][S]=X[m]($[l],S),$[h][x]=X[m]($[l],x),$[h][T]=X[m]($[l],T),$[h][N]=X[m]($[l],N),$[h][C]=X[m]($[l],C),$[h][k]=X[m]($[l],k),$[h][L]=X[m]($[l],L),$[A]=O},this.render=function(e,t,r,u){var a=e.__webglSprites,d=a.length;if(!d)return;var m=$[c],R=$[h],U=u/r,z=r*.5,W=u*.5,J=M;X.useProgram($[l]),$[A]||(X[_](m[p]),X[_](m.uv),$[A]=M),X.disable(X.CULL_FACE),X[D](X.BLEND),X.depthMask(M),X[s](X[o],$[n]),X[P](m[p],2,X.FLOAT,O,16,0),X[P](m.uv,2,X.FLOAT,O,16,8),X[s](X[f],$[i]),X[H](R[L],O,t._projectionMatrixArray),X.activeTexture(X.TEXTURE0),X[B](R[S],0);var Q,G,Y,Z,et=[];for(Q=0;Q<d;Q++){G=a[Q];if(!G.visible||G[x]===0)continue;G[T]?G.z=-G[p].z:(G[j].multiply(t.matrixWorldInverse,G.matrixWorld),G.z=-G[j].elements[14])}a.sort(K);for(Q=0;Q<d;Q++){G=a[Q];if(!G.visible||G[x]===0)continue;G[S]&&G[S].image&&G[S].image.width&&(G[T]?(X[B](R[T],1),X.uniform3f(R[C],(G[p].x-z)/z,(W-G[p].y)/W,Math.max(0,Math.min(1,G[p].z)))):(X[B](R[T],0),X[B](R[N],G[N]?1:0),X[H](R[k],O,G[j].elements)),Z=G[S].image.width/(G.scaleByViewport?u:1),et[0]=Z*U*G[b].x,et[1]=Z*G[b].y,X[F](R[g],G[g].x,G[g].y),X[F](R[v],G[v].x,G[v].y),X[F](R[w],G[w].x,G[w].y),X.uniform1f(R[x],G[x]),X.uniform3f(R[E],G[E].r,G[E].g,G[E].b),X.uniform1f(R[y],G[y]),X.uniform2fv(R[b],et),G[I]&&!J?(X[D](X[q]),J=M):!G[I]&&J&&(X.disable(X[q]),J=O),V.setBlending(G.blending,G.blendEquation,G.blendSrc,G.blendDst),V.setTexture(G[S],0),X.drawElements(X.TRIANGLES,6,X.UNSIGNED_SHORT,0))}X[D](X.CULL_FACE),X[D](X[q]),X.depthMask(M)}},function(){var e="join",t="uniform vec3 screenPosition;",n="uniform vec2 scale;",r="uniform float rotation;",i="uniform int renderType;",s="uniform sampler2D occlusionMap;",o="attribute vec2 position;",u="attribute vec2 uv;",a="varying vec2 vUV;",f="varying float vVisibility;",l="void main() {",c="vUV = uv;",h="vec2 pos = position;",p="if( renderType == 2 ) {",d="pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;",v="pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;",m="}",g="gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );",y="\n",b="precision mediump float;",w="uniform sampler2D map;",E="uniform float opacity;",S="uniform vec3 color;",x="if( renderType == 0 ) {",T="} else if( renderType == 1 ) {",N="gl_FragColor = texture2D( map, vUV );",C="} else {",k="vec4 texture = texture2D( map, vUV );",L="gl_FragColor = texture;",A="gl_FragColor.rgb *= color;";THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:[t,n,r,i,s,o,u,a,f,l,c,h,p,"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) ) +","texture2D( occlusionMap, vec2( 0.5, 0.1 ) ) +","texture2D( occlusionMap, vec2( 0.9, 0.1 ) ) +","texture2D( occlusionMap, vec2( 0.9, 0.5 ) ) +","texture2D( occlusionMap, vec2( 0.9, 0.9 ) ) +","texture2D( occlusionMap, vec2( 0.5, 0.9 ) ) +","texture2D( occlusionMap, vec2( 0.1, 0.9 ) ) +","texture2D( occlusionMap, vec2( 0.1, 0.5 ) ) +","texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility = (       visibility.r / 9.0 ) *","( 1.0 - visibility.g / 9.0 ) *","(       visibility.b / 9.0 ) *","( 1.0 - visibility.a / 9.0 );",d,v,m,g,m][e](y),fragmentShader:[b,w,E,i,S,a,f,l,x,"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );",T,N,C,k,"texture.a *= opacity * vVisibility;",L,A,m,m][e](y)},lensFlare:{vertexShader:[t,n,r,i,o,u,a,l,c,h,p,d,v,m,g,m][e](y),fragmentShader:[b,w,s,E,i,S,a,l,x,"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );",T,N,C,"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a +","texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a +","texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a +","texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );",k,"texture.a *= opacity * visibility;",L,A,m,m][e](y)}},THREE.ShaderSprite={sprite:{vertexShader:["uniform int useScreenCoordinates;","uniform int affectedByDistance;",t,"uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;",r,n,"uniform vec2 alignment;","uniform vec2 uvOffset;","uniform vec2 uvScale;",o,u,a,l,"vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position + alignment;","vec2 rotatedPosition;","rotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;","rotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;","vec4 finalPosition;","if( useScreenCoordinates != 0 ) {","finalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );",C,"finalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition * ( affectedByDistance == 1 ? 1.0 : finalPosition.z );",m,"gl_Position = finalPosition;",m][e](y),fragmentShader:[b,S,w,E,a,l,k,"gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );",m][e](y)}}}(),THREE.LensFlarePlugin=function(){function nt(e){var t=Z.createProgram(),n=Z.createShader(Z.FRAGMENT_SHADER),r=Z.createShader(Z.VERTEX_SHADER);return Z.shaderSource(n,e.fragmentShader),Z.shaderSource(r,e.vertexShader),Z[Y](n),Z[Y](r),Z.attachShader(t,n),Z.attachShader(t,r),Z.linkProgram(t),t}var e="TEXTURE_2D",t="getUniformLocation",n="vertices",r="texParameteri",i="program",s="uniforms",o="attributes",u="screenPosition",a="ELEMENT_ARRAY_BUFFER",f="bindTexture",l="renderType",c="CLAMP_TO_EDGE",h="attributesEnabled",p="hasVertexTexture",d="occlusionTexture",v="uniform1i",m="tempTexture",g="bindBuffer",y="opacity",b="occlusionMap",w="elementBuffer",E="activeTexture",S="enableVertexAttribArray",x="faces",T="rotation",N="UNSIGNED_SHORT",C="vertexBuffer",k="ARRAY_BUFFER",L=!1,A="matrixWorld",O="scale",M="color",_="vertexAttribPointer",D="TEXTURE_MAG_FILTER",P="drawElements",H="TEXTURE_MIN_FILTER",B="getAttribLocation",j="NEAREST",F="customUpdateCallback",I="uniform3f",q="multiplyVector3",R="DEPTH_TEST",U="TEXTURE_WRAP_T",z="TEXTURE_WRAP_S",W="copyTexImage2D",X="elements",V="createTexture",$="UNSIGNED_BYTE",J="ShaderFlares",K="createBuffer",Q="TRIANGLES",G="disable",Y="compileShader",Z,et,tt={};this.init=function(v){Z=v.context,et=v,tt[n]=new Float32Array(16),tt[x]=new Uint16Array(6);var E=0;tt[n][E++]=-1,tt[n][E++]=-1,tt[n][E++]=0,tt[n][E++]=0,tt[n][E++]=1,tt[n][E++]=-1,tt[n][E++]=1,tt[n][E++]=0,tt[n][E++]=1,tt[n][E++]=1,tt[n][E++]=1,tt[n][E++]=1,tt[n][E++]=-1,tt[n][E++]=1,tt[n][E++]=0,tt[n][E++]=1,E=0,tt[x][E++]=0,tt[x][E++]=1,tt[x][E++]=2,tt[x][E++]=0,tt[x][E++]=2,tt[x][E++]=3,tt[C]=Z[K](),tt[w]=Z[K](),Z[g](Z[k],tt[C]),Z.bufferData(Z[k],tt[n],Z.STATIC_DRAW),Z[g](Z[a],tt[w]),Z.bufferData(Z[a],tt[x],Z.STATIC_DRAW),tt[m]=Z[V](),tt[d]=Z[V](),Z[f](Z[e],tt[m]),Z.texImage2D(Z[e],0,Z.RGB,16,16,0,Z.RGB,Z[$],null),Z[r](Z[e],Z[z],Z[c]),Z[r](Z[e],Z[U],Z[c]),Z[r](Z[e],Z[D],Z[j]),Z[r](Z[e],Z[H],Z[j]),Z[f](Z[e],tt[d]),Z.texImage2D(Z[e],0,Z.RGBA,16,16,0,Z.RGBA,Z[$],null),Z[r](Z[e],Z[z],Z[c]),Z[r](Z[e],Z[U],Z[c]),Z[r](Z[e],Z[D],Z[j]),Z[r](Z[e],Z[H],Z[j]),Z.getParameter(Z.MAX_VERTEX_TEXTURE_IMAGE_UNITS)<=0?(tt[p]=L,tt[i]=nt(THREE[J].lensFlare)):(tt[p]=!0,tt[i]=nt(THREE[J].lensFlareVertexTexture)),tt[o]={},tt[s]={},tt[o].vertex=Z[B](tt[i],"position"),tt[o].uv=Z[B](tt[i],"uv"),tt[s][l]=Z[t](tt[i],l),tt[s].map=Z[t](tt[i],"map"),tt[s][b]=Z[t](tt[i],b),tt[s][y]=Z[t](tt[i],y),tt[s][M]=Z[t](tt[i],M),tt[s][O]=Z[t](tt[i],O),tt[s][T]=Z[t](tt[i],T),tt[s][u]=Z[t](tt[i],u),tt[h]=L},this.render=function(t,n,r,c){var x=t.__webglFlares,D=x.length;if(!D)return;var H=new THREE.Vector3,B=c/r,j=r*.5,U=c*.5,z=16/c,V=new THREE.Vector2(z*B,z),$=new THREE.Vector3(1,1,0),J=new THREE.Vector2(1,1),K=tt[s],Y=tt[o];Z.useProgram(tt[i]),tt[h]||(Z[S](tt[o].vertex),Z[S](tt[o].uv),tt[h]=!0),Z[v](K[b],0),Z[v](K.map,1),Z[g](Z[k],tt[C]),Z[_](Y.vertex,2,Z.FLOAT,L,16,0),Z[_](Y.uv,2,Z.FLOAT,L,16,8),Z[g](Z[a],tt[w]),Z[G](Z.CULL_FACE),Z.depthMask(L);var nt,rt,it,st,ot;for(nt=0;nt<D;nt++){z=16/c,V.set(z*B,z),st=x[nt],H.set(st[A][X][12],st[A][X][13],st[A][X][14]),n.matrixWorldInverse[q](H),n.projectionMatrix[q](H),$.copy(H),J.x=$.x*j+j,J.y=$.y*U+U;if(tt[p]||J.x>0&&J.x<r&&J.y>0&&J.y<c){Z[E](Z.TEXTURE1),Z[f](Z[e],tt[m]),Z[W](Z[e],0,Z.RGBA,J.x-8,J.y-8,16,16,0),Z[v](K[l],0),Z.uniform2f(K[O],V.x,V.y),Z[I](K[u],$.x,$.y,$.z),Z[G](Z.BLEND),Z.enable(Z[R]),Z[P](Z[Q],6,Z[N],0),Z[E](Z.TEXTURE0),Z[f](Z[e],tt[d]),Z[W](Z[e],0,Z.RGBA,J.x-8,J.y-8,16,16,0),Z[v](K[l],1),Z[G](Z[R]),Z[E](Z.TEXTURE1),Z[f](Z[e],tt[m]),Z[P](Z[Q],6,Z[N],0),st.positionScreen.copy($),st[F]?st[F](st):st.updateLensFlares(),Z[v](K[l],2),Z.enable(Z.BLEND);for(rt=0,it=st.lensFlares.length;rt<it;rt++)ot=st.lensFlares[rt],ot[y]>.001&&ot[O]>.001&&($.x=ot.x,$.y=ot.y,$.z=ot.z,z=ot.size*ot[O]/c,V.x=z*B,V.y=z,Z[I](K[u],$.x,$.y,$.z),Z.uniform2f(K[O],V.x,V.y),Z.uniform1f(K[T],ot[T]),Z.uniform1f(K[y],ot[y]),Z[I](K[M],ot[M].r,ot[M].g,ot[M].b),et.setBlending(ot.blending,ot.blendEquation,ot.blendSrc,ot.blendDst),et.setTexture(ot.texture,1),Z[P](Z[Q],6,Z[N],0))}}Z.enable(Z.CULL_FACE),Z.enable(Z[R]),Z.depthMask(!0)}},THREE.AudioListenerObject=function(e){var t="Vector3",n="getPosition",r="matrixWorld";THREE.Object3D.call(this);var i=new THREE[t],s=new THREE[t],o=new THREE[t],u=new THREE[t],a=new THREE[t],f=this;this.updateMatrix=function(){if(e[r][n]().x==s.x&&e[r][n]().y==s.y&&e[r][n]().z==s.z)return;s.copy(i),i.copy(e[r][n]()),o.sub(i,s),a.copy(e.up),u.set(0,0,-1),e[r].rotateAxis(u),u.normalize(),SCSound.setListenerPosition(i.x,i.y,i.z,o.x,o.y,o.z,u.x,u.y,u.z,a.x,a.y,a.z)}},function(){var e="prototype",t="AudioListenerObject";THREE[t][e]=Object.create(THREE.Object3D[e]),THREE[t][e].context=null,THREE[t][e].type=null}(),THREE.AudioObject=function(e){var t="Vector3",n="copy";THREE.Object3D.call(this);var e=e,r=new THREE[t],i=new THREE[t],s=new THREE[t],o=new THREE[t],u=new THREE[t],a=new THREE[t],f=new THREE[t],l=this;this.updateMatrix=function(){r[n](l.position),u.sub(r,i),a.set(0,0,-1),this.matrixWorld.rotateAxis(a),a.normalize(),f[n](this.up);if(r.x==i.x&&r.y==i.y&&r.z==i.z&&u.x==s.x&&u.y==s.y&&u.z==s.z&&f.x==o.x&&f.y==o.y&&f.z==o.z)return;SCSound.setPannerPosition(e,r.x,r.y,r.z,u.x,u.y,u.z,a.x,a.y,a.z,f.x,f.y,f.z),i[n](r),s[n](u),o[n](f)}},function(){var e="prototype",t="AudioObject";THREE[t][e]=Object.create(THREE.Object3D[e]),THREE[t][e].context=null,THREE[t][e].type=null}(),THREE.ShaderExtras={screen:{uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},convolution:{uniforms:{tDiffuse:{type:"t",value:null},uImageIncrement:{type:"v2",value:new THREE.Vector2(.001953125,0)},cKernel:{type:"fv1",value:[]}},vertexShader:["uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vUv = uv - ( ( KERNEL_SIZE - 1.0 ) / 2.0 ) * uImageIncrement;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cKernel[ KERNEL_SIZE ];","uniform sampler2D tDiffuse;","uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vec2 imageCoord = vUv;","vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );","for( int i = 0; i < KERNEL_SIZE; i ++ ) {","sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];","imageCoord += uImageIncrement;","}","gl_FragColor = sum;","}"].join("\n")},film:{uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},nIntensity:{type:"f",value:.5},sIntensity:{type:"f",value:.05},sCount:{type:"f",value:4096},grayscale:{type:"i",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float x = vUv.x * vUv.y * time *  1000.0;","x = mod( x, 13.0 ) * mod( x, 123.0 );","float dx = mod( x, 0.01 );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","if( grayscale ) {","cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","}","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")},bokeh:{uniforms:{tColor:{type:"t",value:null},tDepth:{type:"t",value:null},focus:{type:"f",value:1},aspect:{type:"f",value:1},aperture:{type:"f",value:.025},maxblur:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tColor;","uniform sampler2D tDepth;","uniform float maxblur;","uniform float aperture;","uniform float focus;","uniform float aspect;","void main() {","vec2 aspectcorrect = vec2( 1.0, aspect );","vec4 depth1 = texture2D( tDepth, vUv );","float factor = depth1.x - focus;","vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );","vec2 dofblur9 = dofblur * 0.9;","vec2 dofblur7 = dofblur * 0.7;","vec2 dofblur4 = dofblur * 0.4;","vec4 col = vec4( 0.0 );","col += texture2D( tColor, vUv.xy );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );","gl_FragColor = col / 41.0;","gl_FragColor.a = 1.0;","}"].join("\n")},dofmipmap:{uniforms:{tColor:{type:"t",value:null},tDepth:{type:"t",value:null},focus:{type:"f",value:1},maxblur:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float focus;","uniform float maxblur;","uniform sampler2D tColor;","uniform sampler2D tDepth;","varying vec2 vUv;","void main() {","vec4 depth = texture2D( tDepth, vUv );","float factor = depth.x - focus;","vec4 col = texture2D( tColor, vUv, 2.0 * maxblur * abs( focus - depth.x ) );","gl_FragColor = col;","gl_FragColor.a = 1.0;","}"].join("\n")},sepia:{uniforms:{tDiffuse:{type:"t",value:null},amount:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float amount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 color = texture2D( tDiffuse, vUv );","vec3 c = color.rgb;","color.r = dot( c, vec3( 1.0 - 0.607 * amount, 0.769 * amount, 0.189 * amount ) );","color.g = dot( c, vec3( 0.349 * amount, 1.0 - 0.314 * amount, 0.168 * amount ) );","color.b = dot( c, vec3( 0.272 * amount, 0.534 * amount, 1.0 - 0.869 * amount ) );","gl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );","}"].join("\n")},dotscreen:{uniforms:{tDiffuse:{type:"t",value:null},tSize:{type:"v2",value:new THREE.Vector2(256,256)},center:{type:"v2",value:new THREE.Vector2(.5,.5)},angle:{type:"f",value:1.57},scale:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec2 center;","uniform float angle;","uniform float scale;","uniform vec2 tSize;","uniform sampler2D tDiffuse;","varying vec2 vUv;","float pattern() {","float s = sin( angle ), c = cos( angle );","vec2 tex = vUv * tSize - center;","vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;","return ( sin( point.x ) * sin( point.y ) ) * 4.0;","}","void main() {","vec4 color = texture2D( tDiffuse, vUv );","float average = ( color.r + color.g + color.b ) / 3.0;","gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );","}"].join("\n")},vignette:{uniforms:{tDiffuse:{type:"t",value:null},offset:{type:"f",value:1},darkness:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")},bleachbypass:{uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 base = texture2D( tDiffuse, vUv );","vec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );","float lum = dot( lumCoeff, base.rgb );","vec3 blend = vec3( lum );","float L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );","vec3 result1 = 2.0 * base.rgb * blend;","vec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );","vec3 newColor = mix( result1, result2, L );","float A2 = opacity * base.a;","vec3 mixRGB = A2 * newColor.rgb;","mixRGB += ( ( 1.0 - A2 ) * base.rgb );","gl_FragColor = vec4( mixRGB, base.a );","}"].join("\n")},focus:{uniforms:{tDiffuse:{type:"t",value:null},screenWidth:{type:"f",value:1024},screenHeight:{type:"f",value:1024},sampleDistance:{type:"f",value:.94},waveFactor:{type:"f",value:.00125}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float screenWidth;","uniform float screenHeight;","uniform float sampleDistance;","uniform float waveFactor;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 color, org, tmp, add;","float sample_dist, f;","vec2 vin;","vec2 uv = vUv;","add = color = org = texture2D( tDiffuse, uv );","vin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );","sample_dist = dot( vin, vin ) * 2.0;","f = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;","vec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );","add += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","color = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );","color = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );","gl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );","}"].join("\n")},triangleBlur:{uniforms:{texture:{type:"t",value:null},delta:{type:"v2",value:new THREE.Vector2(1,1)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define ITERATIONS 10.0","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 vUv;","float random( vec3 scale, float seed ) {","return fract( sin( dot( gl_FragCoord.xyz + seed, scale ) ) * 43758.5453 + seed );","}","void main() {","vec4 color = vec4( 0.0 );","float total = 0.0;","float offset = random( vec3( 12.9898, 78.233, 151.7182 ), 0.0 );","for ( float t = -ITERATIONS; t <= ITERATIONS; t ++ ) {","float percent = ( t + offset - 0.5 ) / ITERATIONS;","float weight = 1.0 - abs( percent );","color += texture2D( texture, vUv + delta * percent ) * weight;","total += weight;","}","gl_FragColor = color / total;","}"].join("\n")},basic:{uniforms:{},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["void main() {","gl_FragColor = vec4( 1.0, 0.0, 0.0, 0.5 );","}"].join("\n")},horizontalBlur:{uniforms:{tDiffuse:{type:"t",value:null},h:{type:"f",value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;"
,"sum += texture2D( tDiffuse, vec2( vUv.x, 		  	vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},verticalBlur:{uniforms:{tDiffuse:{type:"t",value:null},v:{type:"f",value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y			  ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},horizontalTiltShift:{uniforms:{tDiffuse:{type:"t",value:null},h:{type:"f",value:1/512},r:{type:"f",value:.35}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","uniform float r;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float hh = h * abs( r - vUv.y );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * hh, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * hh, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * hh, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * hh, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, 		  	 vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * hh, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * hh, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * hh, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * hh, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},verticalTiltShift:{uniforms:{tDiffuse:{type:"t",value:null},v:{type:"f",value:1/512},r:{type:"f",value:.35}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","uniform float r;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float vv = v * abs( r - vUv.y );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * vv ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * vv ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * vv ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * vv ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y			   ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * vv ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * vv ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * vv ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * vv ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},blend:{uniforms:{tDiffuse1:{type:"t",value:null},tDiffuse2:{type:"t",value:null},mixRatio:{type:"f",value:.5},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float mixRatio;","uniform sampler2D tDiffuse1;","uniform sampler2D tDiffuse2;","varying vec2 vUv;","void main() {","vec4 texel1 = texture2D( tDiffuse1, vUv );","vec4 texel2 = texture2D( tDiffuse2, vUv );","gl_FragColor = opacity * mix( texel1, texel2, mixRatio );","}"].join("\n")},fxaa:{uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","float opacity  = rgbaM.w;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec3 rgbA = 0.5 * (","texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz +","texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz );","vec3 rgbB = rgbA * 0.5 + 0.25 * (","texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * -0.5 ).xyz +","texture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * 0.5 ).xyz );","float lumaB = dot( rgbB, luma );","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = vec4( rgbA, opacity );","} else {","gl_FragColor = vec4( rgbB, opacity );","}","}"].join("\n")},luminosity:{uniforms:{tDiffuse:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","gl_FragColor = vec4( v, v, v, texel.w );","}"].join("\n")},colorCorrection:{uniforms:{tDiffuse:{type:"t",value:null},powRGB:{type:"v3",value:new THREE.Vector3(2,2,2)},mulRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 powRGB;","uniform vec3 mulRGB;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vUv );","gl_FragColor.rgb = mulRGB * pow( gl_FragColor.rgb, powRGB );","}"].join("\n")},normalmap:{uniforms:{heightMap:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(512,512)},scale:{type:"v2",value:new THREE.Vector2(1,1)},height:{type:"f",value:.05}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float height;","uniform vec2 resolution;","uniform sampler2D heightMap;","varying vec2 vUv;","void main() {","float val = texture2D( heightMap, vUv ).x;","float valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;","float valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;","gl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );","}"].join("\n")},ssao:{uniforms:{tDiffuse:{type:"t",value:null},tDepth:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},fogNear:{type:"f",value:5},fogFar:{type:"f",value:100},fogEnabled:{type:"i",value:0},onlyAO:{type:"i",value:0},aoClamp:{type:"f",value:.3},lumInfluence:{type:"f",value:.9}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cameraNear;","uniform float cameraFar;","uniform float fogNear;","uniform float fogFar;","uniform bool fogEnabled;","uniform bool onlyAO;","uniform vec2 size;","uniform float aoClamp;","uniform float lumInfluence;","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","varying vec2 vUv;","#define DL 2.399963229728653","#define EULER 2.718281828459045","float width = size.x;","float height = size.y;","float cameraFarPlusNear = cameraFar + cameraNear;","float cameraFarMinusNear = cameraFar - cameraNear;","float cameraCoef = 2.0 * cameraNear;","const int samples = 8;","const float radius = 5.0;","const bool useNoise = false;","const float noiseAmount = 0.0003;","const float diffArea = 0.4;","const float gDisplace = 0.4;","const vec3 onlyAOColor = vec3( 1.0, 0.7, 0.5 );","float unpackDepth( const in vec4 rgba_depth ) {","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","float depth = dot( rgba_depth, bit_shift );","return depth;","}","vec2 rand( const vec2 coord ) {","vec2 noise;","if ( useNoise ) {","float nx = dot ( coord, vec2( 12.9898, 78.233 ) );","float ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );","noise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );","} else {","float ff = fract( 1.0 - coord.s * ( width / 2.0 ) );","float gg = fract( coord.t * ( height / 2.0 ) );","noise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;","}","return ( noise * 2.0  - 1.0 ) * noiseAmount;","}","float doFog() {","float zdepth = unpackDepth( texture2D( tDepth, vUv ) );","float depth = -cameraFar * cameraNear / ( zdepth * cameraFarMinusNear - cameraFar );","return smoothstep( fogNear, fogFar, depth );","}","float readDepth( const in vec2 coord ) {","return cameraCoef / ( cameraFarPlusNear - unpackDepth( texture2D( tDepth, coord ) ) * cameraFarMinusNear );","}","float compareDepths( const in float depth1, const in float depth2, inout int far ) {","float garea = 2.0;","float diff = ( depth1 - depth2 ) * 100.0;","if ( diff < gDisplace ) {","garea = diffArea;","} else {","far = 1;","}","float dd = diff - gDisplace;","float gauss = pow( EULER, -2.0 * dd * dd / ( garea * garea ) );","return gauss;","}","float calcAO( float depth, float dw, float dh ) {","float dd = radius - depth * radius;","vec2 vv = vec2( dw, dh );","vec2 coord1 = vUv + dd * vv;","vec2 coord2 = vUv - dd * vv;","float temp1 = 0.0;","float temp2 = 0.0;","int far = 0;","temp1 = compareDepths( depth, readDepth( coord1 ), far );","if ( far > 0 ) {","temp2 = compareDepths( readDepth( coord2 ), depth, far );","temp1 += ( 1.0 - temp1 ) * temp2;","}","return temp1;","}","void main() {","vec2 noise = rand( vUv );","float depth = readDepth( vUv );","float tt = clamp( depth, aoClamp, 1.0 );","float w = ( 1.0 / width )  / tt + ( noise.x * ( 1.0 - noise.x ) );","float h = ( 1.0 / height ) / tt + ( noise.y * ( 1.0 - noise.y ) );","float pw;","float ph;","float ao;","float dz = 1.0 / float( samples );","float z = 1.0 - dz / 2.0;","float l = 0.0;","for ( int i = 0; i <= samples; i ++ ) {","float r = sqrt( 1.0 - z );","pw = cos( l ) * r;","ph = sin( l ) * r;","ao += calcAO( depth, pw * w, ph * h );","z = z - dz;","l = l + DL;","}","ao /= float( samples );","ao = 1.0 - ao;","if ( fogEnabled ) {","ao = mix( ao, 1.0, doFog() );","}","vec3 color = texture2D( tDiffuse, vUv ).rgb;","vec3 lumcoeff = vec3( 0.299, 0.587, 0.114 );","float lum = dot( color.rgb, lumcoeff );","vec3 luminance = vec3( lum );","vec3 final = vec3( color * mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","if ( onlyAO ) {","final = onlyAOColor * vec3( mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","}","gl_FragColor = vec4( final, 1.0 );","}"].join("\n")},colorify:{uniforms:{tDiffuse:{type:"t",value:null},color:{type:"c",value:new THREE.Color(16777215)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","gl_FragColor = vec4( v * color, texel.w );","}"].join("\n")},unpackDepthRGBA:{uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","float unpackDepth( const in vec4 rgba_depth ) {","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","float depth = dot( rgba_depth, bit_shift );","return depth;","}","void main() {","float depth = 1.0 - unpackDepth( texture2D( tDiffuse, vUv ) );","gl_FragColor = opacity * vec4( vec3( depth ), 1.0 );","}"].join("\n")},buildKernel:function(e){function t(e,t){return Math.exp(-(e*e)/(2*t*t))}var n,r,i,s,o=25,u=2*Math.ceil(e*3)+1;u>o&&(u=o),s=(u-1)*.5,r=new Array(u),i=0;for(n=0;n<u;++n)r[n]=t(n-s,e),i+=r[n];for(n=0;n<u;++n)r[n]/=i;return r}},CustomImageUtils={crossOrigin:"anonymous",cacheTextures:!0,loadedCompressedTextures:{},parsedCompressedTextures:{},loadedTextures:{},loadTexture:function(e,t,n,r,i,s){var o="loadedTextures",u="needsUpdate",a="crossOrigin",f=new Image,l=new THREE.Texture(f,t);if(CustomImageUtils[o][e]!=undefined)return l.image=CustomImageUtils[o][e],l[u]=!0,r&&r(1,s),n&&n(l,s),l;var c=new CustomImageLoader(e);return c.onLoadCallback=function(t){l.image=t.content,l[u]=!0,CustomImageUtils.cacheTextures&&(CustomImageUtils[o][e]=t.content),n&&n(l,s)},c.onProgressCallback=function(e){r&&r(e.progress,s)},c.onErrorCallback=function(e){i&&i(e.message)},c[a]=this[a],c.load(e,f),l.sourceFile=e,l},loadCompressedTexture:function(e,t,n,r,i,s,o){var u="loadedCompressedTextures",a="parsedCompressedTextures",f="ImageUtils",l=!0,c="cacheTextures",h="format",p="mipmaps",d="width",v="image",m="height",g="generateMipmaps",y="needsUpdate",b=new THREE.CompressedTexture;b.mapping=t;if(CustomImageUtils[u][e]!=undefined){if(!s){var w=CustomImageUtils[u][e],E;CustomImageUtils[a][e]!=undefined?E=CustomImageUtils[a][e]:(E=THREE[f].parseDDS(w,l),CustomImageUtils[c]&&(CustomImageUtils[a][e]=E)),b[h]=E[h],b[p]=E[p],b[v][d]=E[d],b[v][m]=E[m]}return b[g]=!1,b[y]=l,r&&r(1,o),n&&n(b,o),b}var S=new XMLHttpRequest;return S.onload=function(){var t=S.response;if(!s){var r,r;CustomImageUtils[a][e]!=undefined?r=CustomImageUtils[a][e]:(r=THREE[f].parseDDS(t,l),CustomImageUtils[c]&&(CustomImageUtils[a][e]=r)),b[h]=r[h],b[p]=r[p],b[v][d]=r[d],b[v][m]=r[m]}b[g]=!1,b[y]=l,CustomImageUtils[c]&&(CustomImageUtils[u][e]=t),n&&n(b,o)},S.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total;r&&r(t,o)}},S.onerror=i,S.open("GET",e,l),S.responseType="arraybuffer",S.send(null),b}};var CustomImageLoader=function(){function u(){this[e]="test",this[t]=new createjs.PreloadJS,this[n]=r,this[i]=r,this[s]=r}var e="_urlToLoad",t="_preload",n="onLoadCallback",r=null,i="onProgressCallback",s="onErrorCallback",o="progress";return u.prototype.load=function(r,u){var a=this;this[e]=r,this[t].onFileLoad=function(e){a[n]&&a[n]({type:"load",content:e.result})},this[t].onFileProgress=function(e){a[i]&&a[i]({type:o,progress:e[o]})},this[t].onError=function(t){a[s]&&a[s]({type:"error",message:"Couldn't load URL ["+a[e]+"]"})},this[t].loadFile(r)},u}();THREE.EffectComposer=function(e,t){var n="renderTarget1",r="renderTargetParameters",i="LinearFilter",s="renderTarget2";this.renderer=e,this[n]=t;if(this[n]===undefined){var o=window.innerWidth||1,u=window.innerHeight||1;this[r]={minFilter:THREE[i],magFilter:THREE[i],format:THREE.RGBFormat,stencilBuffer:!1},this[n]=new THREE.WebGLRenderTarget(o,u,this[r])}this[s]=this[n].clone(),this.writeBuffer=this[n],this.readBuffer=this[s],this.passes=[],this.copyPass=new THREE.ShaderPass(THREE.ShaderExtras.screen)},THREE.EffectComposer.prototype={swapBuffers:function(){var e="readBuffer",t="writeBuffer",n=this[e];this[e]=this[t],this[t]=n},addPass:function(e){this.passes.push(e)},render:function(e){var t="writeBuffer",n="readBuffer",r="renderer",i="stencilFunc";this[t]=this.renderTarget1,this[n]=this.renderTarget2;var s=!1,o,u,a=this.passes.length;for(u=0;u<a;u++){o=this.passes[u];if(!o.enabled)continue;o.render(this[r],this[t],this[n],e,s);if(o.needsSwap){if(s){var f=this[r].context;f[i](f.NOTEQUAL,1,4294967295),this.copyPass.render(this[r],this[t],this[n],e),f[i](f.EQUAL,1,4294967295)}this.swapBuffers()}o instanceof THREE.MaskPass?s=!0:o instanceof THREE.ClearMaskPass&&(s=!1)}},reset:function(e){var t="renderTarget1",n="renderTarget2";this[t]=e,this[t]===undefined&&(this[t]=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,this.renderTargetParameters)),this[n]=this[t].clone(),this.writeBuffer=this[t],this.readBuffer=this[n]}},function(){var e="camera",t="EffectComposer",n="scene",r="RenderPass",i="overrideMaterial",s="clearColor",o="clearAlpha",u="oldClearColor",a="oldClearAlpha",f="setClearColor";THREE[t][e]=new THREE.OrthographicCamera(-1,1,1,-1,0,1),THREE[t].quad=new THREE.Mesh(new THREE.PlaneGeometry(2,2),null),THREE[t][n]=new THREE.Scene,THREE[t][n].add(THREE[t].quad),THREE[r]=function(t,r,f,l,c){this[n]=t,this[e]=r,this[i]=f,this[s]=l,this[o]=c!==undefined?c:1,this[u]=new THREE.Color,this[a]=1,this.enabled=!0,this.clear=!0,this.needsSwap=!1},THREE[r].prototype={render:function(t,r,l,c){this[n][i]=this[i],this[s]&&(this[u].copy(t.getClearColor()),this[a]=t.getClearAlpha(),t[f](this[s],this[o])),t.render(this[n],this[e],l,this.clear),this[s]&&t[f](this[u],this[a]),this[n][i]=null}}}(),THREE.BloomPass=function(e,t,n,r){var i="LinearFilter",s="WebGLRenderTarget",o="ShaderExtras",u="screenUniforms",a="UniformsUtils",f="ShaderMaterial",l="vertexShader",c="fragmentShader",h="convolutionUniforms",p="#define KERNEL_SIZE ";e=e!==undefined?e:1,t=t!==undefined?t:25,n=n!==undefined?n:4,r=r!==undefined?r:256;var d={minFilter:THREE[i],magFilter:THREE[i],format:THREE.RGBFormat};this.renderTargetX=new THREE[s](r,r,d),this.renderTargetY=new THREE[s](r,r,d);var v=THREE[o].screen;this[u]=THREE[a].clone(v.uniforms),this[u].opacity.value=e,this.materialScreen=new THREE[f]({uniforms:this[u],vertexShader:v[l],fragmentShader:v[c],blending:THREE.AdditiveBlending,transparent:!0});var m=THREE[o].convolution;this[h]=THREE[a].clone(m.uniforms),this[h].uImageIncrement.value=THREE.BloomPass.blurx,this[h].cKernel.value=THREE[o].buildKernel(n),this.materialConvolution=new THREE[f]({uniforms:this[h],vertexShader:p+t+".0\n"+m[l],fragmentShader:p+t+"\n"+m[c]}),this.enabled=!0,this.needsSwap=!1,this.clear=!1},function(){var e="BloomPass",t="context",n="STENCIL_TEST",r="material",i="EffectComposer",s="value",o="convolutionUniforms",u="tDiffuse",a="uImageIncrement",f="render",l="scene",c="camera",h="renderTargetX",p=!0,d="renderTargetY",v="clear",m="ShaderPass",g="textureID",y="uniforms",b="renderToScreen",w=!1;THREE[e].prototype={render:function(m,g,y,b,w){w&&m[t].disable(m[t][n]),THREE[i].quad[r]=this.materialConvolution,this[o][u][s]=y,this[o][a][s]=THREE[e].blurX,m[f](THREE[i][l],THREE[i][c],this[h],p),this[o][u][s]=this[h],this[o][a][s]=THREE[e].blurY,m[f](THREE[i][l],THREE[i][c],this[d],p),THREE[i].quad[r]=this.materialScreen,this.screenUniforms[u][s]=this[d],w&&m[t].enable(m[t][n]),m[f](THREE[i][l],THREE[i][c],y,this[v])}},THREE[e].blurX=new THREE.Vector2(.001953125,0),THREE[e].blurY=new THREE.Vector2(0,.001953125),THREE[m]=function(e,t){this[g]=t!==undefined?t:u,this[y]=THREE.UniformsUtils.clone(e[y]),this[r]=new THREE.ShaderMaterial({uniforms:this[y],vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this[b]=w,this.enabled=p,this.needsSwap=p,this[v]=w},THREE[m].prototype={render:function(e,t,n,o){this[y][this[g]]&&(this[y][this[g]][s]=n),THREE[i].quad[r]=this[r],this[b]?e[f](THREE[i][l],THREE[i][c]):e[f](THREE[i][l],THREE[i][c],t,this[v])}},THREE.MaskPass=function(e,t){this[l]=e,this[c]=t,this.enabled=p,this[v]=p,this.needsSwap=w,this.inverse=w}}(),THREE.MaskPass.prototype={render:function(e,t,n,r){var i=!1,s="REPLACE",o="stencilFunc",u=!0,a=e.context;a.colorMask(i,i,i,i),a.depthMask(i);var f,l;this.inverse?(f=0,l=1):(f=1,l=0),a.enable(a.STENCIL_TEST),a.stencilOp(a[s],a[s],a[s]),a[o](a.ALWAYS,f,4294967295),a.clearStencil(l),e.render(this.scene,this.camera,n,this.clear),e.render(this.scene,this.camera,t,this.clear),a.colorMask(u,u,u,u),a.depthMask(u),a[o](a.EQUAL,1,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP)}},THREE.ClearMaskPass=function(){this.enabled=!0},THREE.ClearMaskPass.prototype={render:function(e,t,n,r){var i=e.context;i.disable(i.STENCIL_TEST)}},THREE.SavePass=function(e){var t="uniforms",n="renderTarget",r="renderTargetParameters",i="LinearFilter",s=!1,o=THREE.ShaderExtras.screen;this.textureID="tDiffuse",this[t]=THREE.UniformsUtils.clone(o[t]),this.material=new THREE.ShaderMaterial({uniforms:this[t],vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}),this[n]=e,this[n]===undefined&&(this[r]={minFilter:THREE[i],magFilter:THREE[i],format:THREE.RGBFormat,stencilBuffer:s},this[n]=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,this[r])),this.enabled=!0,this.needsSwap=s,this.clear=s},THREE.SavePass.prototype={render:function(e,t,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n),THREE.EffectComposer.quad.material=this.material,e.render(THREE.EffectComposer.scene,THREE.EffectComposer.camera,this.renderTarget,this.clear)}},THREE.FilmPass=function(e,t,n,r){var i="uniforms",s="value",o=THREE.ShaderExtras.film;this[i]=THREE.UniformsUtils.clone(o[i]),this.material=new THREE.ShaderMaterial({uniforms:this[i],vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}),r!==undefined&&(this[i].grayscale[s]=r),e!==undefined&&(this[i].nIntensity[s]=e),t!==undefined&&(this[i].sIntensity[s]=t),n!==undefined&&(this[i].sCount[s]=n),this.enabled=!0,this.renderToScreen=!1,this.needsSwap=!0},function(){var e="EffectComposer",t="t",n=null,r="f",i="join",s="varying vec2 vUv;",o="void main() {",u="vUv = uv;",a="gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",f="}",l="\n",c="gl_FragColor.a = 1.0;",h="v2",p="Vector2",d="uniform vec2 vSunPositionScreenSpace;";THREE.FilmPass.prototype={render:function(t,n,r,i){this.uniforms.tDiffuse.value=r,this.uniforms.time.value+=i,THREE[e].quad.material=this.material,this.renderToScreen?t.render(THREE[e].scene,THREE[e].camera):t.render(THREE[e].scene,THREE[e].camera,n,!1)}},THREE.BokehShader={uniforms:{tColor:{type:t,value:n},tDepth:{type:t,value:n},focus:{type:r,value:1},aspect:{type:r,value:1},aperture:{type:r,value:.025},maxblur:{type:r,value:1}},vertexShader:[s,o,u,a,f][i](l),fragmentShader:[s,"uniform sampler2D tColor;","uniform sampler2D tDepth;","uniform float maxblur;","uniform float aperture;","uniform float focus;","uniform float aspect;",o,"vec2 aspectcorrect = vec2( 1.0, aspect );","vec4 depth1 = texture2D( tDepth, vUv );","float factor = depth1.x - focus;","vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );","vec2 dofblur9 = dofblur * 0.9;","vec2 dofblur7 = dofblur * 0.7;","vec2 dofblur4 = dofblur * 0.4;","vec4 col = vec4( 0.0 );","col += texture2D( tColor, vUv.xy );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );","gl_FragColor = col / 41.0;",c,f][i](l)},THREE.ShaderGodRays={godrays_generate:{uniforms:{tInput:{type:t,value:n},fStepSize:{type:r,value:1},vSunPositionScreenSpace:{type:h,value:new THREE[p](.5,.5)}},vertexShader:[s,o,u,a,f][i](l),fragmentShader:["#define TAPS_PER_PASS 6.0",s,"uniform sampler2D tInput;",d,"uniform float fStepSize;",o,"vec2 delta = vSunPositionScreenSpace - vUv;","float dist = length( delta );","vec2 stepv = fStepSize * delta / dist;","float iters = dist/fStepSize;","vec2 uv = vUv.xy;","float col = 0.0;","for ( float i = 0.0; i < TAPS_PER_PASS; i += 1.0 ) {","float addCol = texture2D( tInput, uv ).r;","if(i <= iters && uv.y < 1.0) {","col += addCol;",f,"uv += stepv;",f,"gl_FragColor = vec4( col/TAPS_PER_PASS );",c,f][i](l)},godrays_combine:{uniforms:{tColors:{type:t,value:n},tColors2:{type:t,value:n},tGodRays:{type:t,value:n},fGodRayIntensity:{type:r,value:4},vSunPositionScreenSpace:{type:h,value:new THREE[p](.5,.5)}},vertexShader:[s,o,u,a,f][i](l),fragmentShader:[s,"uniform sampler2D tColors;","uniform sampler2D tColors2;","uniform sampler2D tGodRays;",d,"uniform float fGodRayIntensity;",o,"vec4 godRayColInv = vec4( 1.0 - ( texture2D( tGodRays, vUv ).r * fGodRayIntensity) );","godRayColInv = clamp( godRayColInv , 0.0, 1.0);","gl_FragColor = ( texture2D( tColors, vUv ) ) * ( godRayColInv );",c,f][i](l)},godrays_fake_sun:{uniforms:{vSunPositionScreenSpace:{type:h,value:new THREE[p](.5,.5)},fAspect:{type:r,value:1},sunColor:{type:"c",value:new THREE.Color(16772608)},bgColor:{type:"c",value:new THREE.Color(0)}},vertexShader:[s,o,u,a,f][i](l),fragmentShader:[s,d,"uniform float fAspect;","uniform vec3 sunColor;","uniform vec3 bgColor;",o,"vec2 diff = vUv - vSunPositionScreenSpace;","diff.x *= fAspect;","float prop = clamp( length( diff ) / 0.5, 0.0, 1.0 );","prop = 0.35 * pow( 1.0 - prop, 3.0 );","gl_FragColor.xyz = mix( sunColor, bgColor, 1.0 - prop );","gl_FragColor.w = 1.0;",f][i](l)}}}();var UTILS=UTILS||{};UTILS.deg2rad=function(e){return Math.PI*e/180},UTILS.rad2deg=function(e){return 180*e/Math.PI},UTILS.lerp=function(e,t,n){return(n-t)*e+t},UTILS.lerp1f=function(e,t,n){return e=(e+1)*.5,(n-t)*e+t},UTILS.lerpv3=function(e,t,n,r){return r.x=(n.x-t.x)*e+t.x,r.y=(n.y-t.y)*e+t.y,r.z=(n.z-t.z)*e+t.z,r},UTILS.time01=function(e,t,n){if(n>0){if(e>t){var r=e-t;return r>n&&(r=n),r/n}return 0}return 1},UTILS.time10=function(e,t,n){return 1-UTILS.time01(e,t,n)},UTILS.clamp=function(e,t,n){return Math.max(t,Math.min(n,e))};var Hud=function(e,t,n,r,i){var s="defaultMaterial",o="scene";this.renderer=e,this.w=t,this.h=n,this.flipx=r,this.flipy=i,this.renderTarget=null,this[s]=new THREE.MeshBasicMaterial({color:16777215}),this.plane=new THREE.PlaneGeometry(1,1),this.plane.dynamic=!0,this.quad=new THREE.Mesh(this.plane,this[s]),this.quad.doubleSided=!0,this.camera=new THREE.OrthographicCamera(0,t,0,n,1e3,-1e3),this[o]=new THREE.Scene,this[o].autoClear=!1,this[o].add(this.quad),this[o].add(this.camera)};(function(){var e="prototype",t="camera",n="renderDef",r="setQuadSrc",i="material",s="quad",o=!0,u=!1,a="faceVertexUvs",f="geometry";Hud[e].resize=function(e,n){this.w!=e&&this.h!=n&&(this.w=e,this.h=n,this[t].right=e,this[t].bottom=n,this[t].updateProjectionMatrix(),this[t].updateMatrixWorld())},Hud[e][n]=function(e,n,a,f,l,c,h,p){l===undefined&&(l=0),c===undefined&&(c=1),h===undefined&&(h=THREE.NormalBlending),p?this[r](p.x,p.y,p.w,p.h):this[r](0,0,1,1),this.setQuad(e,n,a,f,l),this[s][i].opacity=c,this[s][i].blending=h,this[s][i].side=THREE.DoubleSide,this[s][i].transparent=o,this[s][i].depthTest=u,this[s][i].depthWrite=u,this.renderer.render(this.scene,this[t],this.renderTarget,u)},Hud[e].render=function(e,t,r,o,u,a,f,l,c){this[s][i]=this.defaultMaterial,this[s][i].map=e,this[n](t,r,o,u,a,f,l,c)},Hud[e].renderMaterial=function(e,t,r,o,u,a,f,l,c){this[s][i]=e,this[n](t,r,o,u,a,f,l,c)},Hud[e][r]=function(e,t,n,r){this[s][f][a][0][0][0].set(e,t),this[s][f][a][0][0][1].set(e,t+r),this[s][f][a][0][0][2].set(e+n,t+r),this[s][f][a][0][0][3].set(e+n,t),this[s][f].__dirtyUvs=o,this[s][f].uvsNeedUpdate=o}})(),Hud.prototype.setQuad=function(e,t,n,r,i){var s="deg2rad",o=e+n*.5,u=t+r*.5,a=0,f=0;this.flipx==1&&(o=this.w-o,f=UTILS[s](180)),this.flipy==1&&(u=this.h-u,a=UTILS[s](180)),this.quad.rotation.set(a+UTILS[s](180),f,i),this.quad.position.set(o,u,1),this.quad.scale.set(n,r,1)};