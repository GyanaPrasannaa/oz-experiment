/*global Package *//*global Class */Package("preloading",[Class("public singleton ImagePreloader",{_public:{cache:{},ImagePreloader:function(){},loadUrl:function(e,t){var n=new Image;this.cache[this.generateKey(e)]=n;n.onload=t;n.src=e},loadDomObject:function(e,t){var n=null,r=$(e),i=r.is("img")?r:r.find("img");i&&i.length>0&&(n=i.attr("src"));if(n)this.loadUrl(n,t);else{this.log("cannot preload DOM object "+e);t()}},generateKey:function(e){return encodeURIComponent(e)},getCached:function(e){return this.cache[this.generateKey(e)]}}})]);