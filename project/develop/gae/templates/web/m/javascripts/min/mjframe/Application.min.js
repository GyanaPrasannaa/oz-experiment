/*global Package *//*global Import *//*global Class *//*global Config *//*global Copy *//*global NavigationManager *//*global PageManager */Package("mjframe",[Import("MjConfig"),Import("mjframe.Copy"),Import("mjframe.NavigationManager"),Import("mjframe.PageManager"),Import("mjframe.Template"),Class("public abstract Application",{_public:{config:null,locale:null,Application:function(){this.config=window.config=MjConfig.getInstance();this.registerPages(this.config.pages);this.setLocale(this.config.defaultLocale);window.PLATFORM=Modernizr.touch?"mobile":"desktop";Template.baseImportPath=this.config.templatesPath},start:function(){NavigationManager.getInstance().onUrlChange()},setLocale:function(e){this.locale=e;this.dispatch(Copy.EVENT_LOCALE_CHANGE,e)},registerPages:function(e){NavigationManager.getInstance().init();for(var t=0;t<e.length;t++)PageManager.getInstance().registerPage(e[t].pageName,e[t].className,e[t].url,"useRegExp"in e[t]?e[t].useRegExp:!1,"popup"in e[t]?e[t].popup:!1,"pageUrl"in e[t]?e[t].pageUrl:null)}}})]);