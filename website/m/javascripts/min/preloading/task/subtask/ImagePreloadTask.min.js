/*global Poof *//*global Package *//*global Import *//*global Class *//*global ImagePreloader *//*global ImagePreloadTask */Package("preloading.task.subtask",[Import("util.Task"),Import("util.ImagePreloader"),Class("public ImagePreloadTask extends Task",{_public:{url:null,ImagePreloadTask:function(e,t){typeof t=="undefined"&&(this.weight=1);if(typeof e=="string"){this.url=e;this._super(t,[])}else if(e&&e.length===1){this.url=e[0];this._super(t,[])}else if(e&&e.length>1){var n=[];for(var r=0;r<e.length;r++)n.push(new ImagePreloadTask(e[r]),t/e.length);this._super(0,n)}},run:function(){if(this.url){console.log("preloading "+this.url);ImagePreloader.getInstance().load(this.url,Poof.retainContext(this,this.onImageLoadComplete))}},onImageLoadComplete:function(){console.log(this.url+" loaded");this.notifyComplete()}}})]);