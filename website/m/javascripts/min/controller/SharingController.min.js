/*global Poof *//*global Package *//*global Class *//*global MjConfig *//*global SharingController */Package("controller",[Class("public singleton SharingController",{_public_static:{EVENT_LINK_READY:"SharingController.Event.LinkReady"},_public:{SharingController:function(){},requestShareLink:function(e){$.ajax({type:"POST",url:MjConfig.getInstance().uploadUrl+(window.googleAppEngineRuntime?"":"/index.php"),contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(e),success:Poof.retainContext(this,function(e){this.dispatch(SharingController.EVENT_LINK_READY,{url:window.location.protocol+"//"+window.location.host+MjConfig.getInstance().shareLinkBase.replace("{id}",e.result.id)})})})},shareLinkOnGoogle:function(e){var t="https://plus.google.com/share?url={LINK}";t=t.replace("{LINK}",e);window.open(t,"_blank")},shareLinkOnFacebook:function(e){var t="http://www.facebook.com/sharer/sharer.php?u={LINK}";t=t.replace("{LINK}",e);window.open(t,"_blank")},shareLinkOnTwitter:function(e){var t="Check out my cutout at {LINK}!",n="http://www.oz.com",r="http://twitter.com/intent/tweet?text={TEXT}&url={URL}";t=t.replace("{LINK}",e);r=r.replace("{TEXT}",t).replace("{URL}",n);window.open(r,"_blank")}}})]);